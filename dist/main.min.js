!function t(e,n,r){function i(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return i(n?n:t)},f,f.exports,t,e,n,r)}return n[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)i(r[s]);return i}({1:[function(t,e,n){"use strict";var r=t("./state"),i=t("./modules/localstate"),o=t("./modules/actions"),s=t("./views/ledger"),u=t("./views/budget"),a=t("./views/addCategory"),c=t("./views/plans"),f=t("./views/addPlan"),l=t("./views/exporter"),h=t("./views/importer");i.load("state",r),i.sync("state",r);var p={state:r,plans:r.select("plans"),currentPlanId:r.select("currentPlanId"),categories:r.facets.currentCategories,entries:r.facets.currentEntries,periods:r.facets.currentPeriods};s.init($(".js-ledger"),p,o),u.init($(".js-budget"),p,o),a.init($(".js-add-category"),p,o),c.init($(".js-plans"),p,o),f.init($(".js-add-plan"),p,o),l.init($(".js-exporter"),p,o),h.init($(".js-importer"),p,o)},{"./modules/actions":80,"./modules/localstate":81,"./state":82,"./views/addCategory":84,"./views/addPlan":85,"./views/budget":86,"./views/exporter":87,"./views/importer":88,"./views/ledger":89,"./views/plans":90}],2:[function(t,e,n){(function(t){(function(){var n,r,i,o,s,u,a,c,f,l,h,p,d,g,v,m,y,b,w,E,_,T,x,A,S,O,I,j,k,N,P,C,R,D,L,M,B,U,F,$,V,W,q,Y,H,G,z,X,Q,J,K,Z,tt,et,nt,rt,it,ot,st,ut,at,ct,ft,lt,ht,pt,dt,gt,vt,mt,yt={}.hasOwnProperty,bt=function(t,e){function n(){this.constructor=t}for(var r in e)yt.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},wt=[].slice,Et=function(t,e){return function(){return t.apply(e,arguments)}};n={toString:function(){return"Bacon"}},n.version="0.7.53",p=("undefined"!=typeof t&&null!==t?t:this).Error,rt=function(){},X=function(t,e){return e},W=function(t,e){return t},P=function(t){return t.slice(0)},A=function(t,e){if(!e)throw new p(t)},O=function(t){if(!(t instanceof h))throw new p("not an EventStream : "+t)},k=function(t){if(!(t instanceof m))throw new p("not an Observable : "+t)},I=function(t){return A("not a function : "+t,T.isFunction(t))},H=function(t){return t instanceof Array},z=function(t){return t instanceof m},S=function(t){if(!H(t))throw new p("not an array : "+t)},j=function(t){return A("no arguments supported",0===t.length)},N=function(t){if("string"!=typeof t)throw new p("not a string : "+t)},T={indexOf:Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){var n,r,i,o;for(n=r=0,i=t.length;i>r;n=++r)if(o=t[n],e===o)return n;return-1},indexWhere:function(t,e){var n,r,i,o;for(n=r=0,i=t.length;i>r;n=++r)if(o=t[n],e(o))return n;return-1},head:function(t){return t[0]},always:function(t){return function(){return t}},negate:function(t){return function(e){return!t(e)}},empty:function(t){return 0===t.length},tail:function(t){return t.slice(1,t.length)},filter:function(t,e){var n,r,i,o;for(n=[],r=0,i=e.length;i>r;r++)o=e[r],t(o)&&n.push(o);return n},map:function(t,e){var n,r,i,o;for(i=[],n=0,r=e.length;r>n;n++)o=e[n],i.push(t(o));return i},each:function(t,e){var n,r;for(n in t)r=t[n],e(n,r);return void 0},toArray:function(t){return H(t)?t:[t]},contains:function(t,e){return-1!==T.indexOf(t,e)},id:function(t){return t},last:function(t){return t[t.length-1]},all:function(t,e){var n,r,i;for(null==e&&(e=T.id),n=0,r=t.length;r>n;n++)if(i=t[n],!e(i))return!1;return!0},any:function(t,e){var n,r,i;for(null==e&&(e=T.id),n=0,r=t.length;r>n;n++)if(i=t[n],e(i))return!0;return!1},without:function(t,e){return T.filter(function(e){return e!==t},e)},remove:function(t,e){var n;return n=T.indexOf(e,t),n>=0?e.splice(n,1):void 0},fold:function(t,e,n){var r,i,o;for(r=0,i=t.length;i>r;r++)o=t[r],e=n(e,o);return e},flatMap:function(t,e){return T.fold(e,[],function(e,n){return e.concat(t(n))})},cached:function(t){var e;return e=v,function(){return e===v&&(e=t(),t=void 0),e}},isFunction:function(t){return"function"==typeof t},toString:function(t){var e,n,r,i;try{return ot++,null==t?"undefined":T.isFunction(t)?"function":H(t)?ot>5?"[..]":"["+T.map(T.toString,t).toString()+"]":null!=(null!=t?t.toString:void 0)&&t.toString!==Object.prototype.toString?t.toString():"object"==typeof t?ot>5?"{..}":(n=function(){var n;n=[];for(r in t)yt.call(t,r)&&(i=function(){try{return t[r]}catch(n){return e=n}}(),n.push(T.toString(r)+":"+T.toString(i)));return n}(),"{"+n+"}"):t}finally{ot--}}},ot=0,n._=T,_=n.UpdateBarrier=function(){var t,e,r,i,o,s,u,a,c,f,l,h,p,d;return f=void 0,l=[],h={},e=[],r=0,t=function(t){return f?e.push(t):t()},p=function(t,e){var n;return f?(n=h[t.id],null==n?(n=h[t.id]=[e],l.push(t)):n.push(e)):e()},o=function(){for(;l.length>0;)u(0);return void 0},u=function(t){var e,n,r,i,o,u;for(i=l[t],o=i.id,u=h[o],l.splice(t,1),delete h[o],s(i),n=0,r=u.length;r>n;n++)(e=u[n])();return void 0},s=function(t){var e,n,r,i,o;for(n=t.internalDeps(),i=0,o=n.length;o>i;i++)e=n[i],s(e),h[e.id]&&(r=T.indexOf(l,e),u(r));return void 0},c=function(t,n,i,s){var u,a;if(f)return i.apply(n,s);f=t;try{a=i.apply(n,s),o()}finally{for(f=void 0;r<e.length;)u=e[r],r++,u();r=0,e=[]}return a},i=function(){return f?f.id:void 0},d=function(e,r){var i,o,s,u;return u=!1,o=!1,i=function(){return o=!0},s=function(){return u=!0,i()},i=e.dispatcher.subscribe(function(e){return t(function(){var t;return u||(t=r(e),t!==n.noMore)?void 0:s()})}),o&&i(),s},a=function(){return l.length>0},{whenDoneWith:p,hasWaiters:a,inTransaction:c,currentEventId:i,wrappedSubscribe:d,afterTransaction:t}}(),E=function(){function t(t,e,n){this.obs=t,this.sync=e,this.lazy=null!=n?n:!1,this.queue=[]}return t.prototype.subscribe=function(t){return this.obs.dispatcher.subscribe(t)},t.prototype.toString=function(){return this.obs.toString()},t.prototype.markEnded=function(){return this.ended=!0},t.prototype.consume=function(){return this.lazy?{value:T.always(this.queue[0])}:this.queue[0]},t.prototype.push=function(t){return this.queue=[t]},t.prototype.mayHave=function(){return!0},t.prototype.hasAtLeast=function(){return this.queue.length},t.prototype.flatten=!0,t}(),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return bt(e,t),e.prototype.consume=function(){return this.queue.shift()},e.prototype.push=function(t){return this.queue.push(t)},e.prototype.mayHave=function(t){return!this.ended||this.queue.length>=t},e.prototype.hasAtLeast=function(t){return this.queue.length>=t},e.prototype.flatten=!1,e}(E),r=function(t){function e(t){e.__super__.constructor.call(this,t,!0)}return bt(e,t),e.prototype.consume=function(){var t;return t=this.queue,this.queue=[],{value:function(){return t}}},e.prototype.push=function(t){return this.queue.push(t.value())},e.prototype.hasAtLeast=function(){return!0},e}(E),E.isTrigger=function(t){return t instanceof E?t.sync:t instanceof h},E.fromObservable=function(t){return t instanceof E?t:t instanceof y?new E(t,!1):new s(t,!0)},u=function(){function t(t,e,n){this.context=t,this.method=e,this.args=n,this.cached=void 0}return t.prototype.deps=function(){return this.cached||(this.cached=F([this.context].concat(this.args)))},t.prototype.apply=function(t){return t.desc=this,t},t.prototype.toString=function(){return T.toString(this.context)+"."+T.toString(this.method)+"("+T.map(T.toString,this.args)+")"},t}(),L=function(){var t,e,n;return e=arguments[0],n=arguments[1],t=3<=arguments.length?wt.call(arguments,2):[],(e||n)instanceof u?e||n:new u(e,n,t)},vt=function(){var t,e,n;return t=2<=arguments.length?wt.call(arguments,0,e=arguments.length-1):(e=0,[]),n=arguments[e++],L.apply(null,t).apply(n)},F=function(t){return H(t)?T.flatMap(F,t):z(t)?[t]:t instanceof E?[t.obs]:[]},mt=function(t){return function(){var e,n,r,i;return r=arguments[0],e=2<=arguments.length?wt.call(arguments,1):[],"object"==typeof r&&e.length&&(n=r,i=e[0],r=function(){return n[i].apply(n,arguments)},e=e.slice(1)),t.apply(null,[r].concat(wt.call(e)))}},K=function(t){return t=Array.prototype.slice.call(t),Z.apply(null,t)},it=function(t,e){return function(){var n;return n=1<=arguments.length?wt.call(arguments,0):[],t.apply(null,e.concat(n))}},dt=function(t){return function(e){return function(n){var r;return null==n?void 0:(r=n[e],T.isFunction(r)?r.apply(n,t):r)}}},lt=function(t,e){var n,r;return r=t.slice(1).split("."),n=T.map(dt(e),r),function(e){var r,i;for(r=0,i=n.length;i>r;r++)t=n[r],e=t(e);return e}},G=function(t){return"string"==typeof t&&t.length>1&&"."===t.charAt(0)},Z=mt(function(){var t,e;return e=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[],T.isFunction(e)?t.length?it(e,t):e:G(e)?lt(e,t):T.always(e)}),J=function(t,e){return Z.apply(null,[t].concat(wt.call(e)))},D=function(t,e,n,r){var i;return e instanceof y?(i=e.sampledBy(t,function(t,e){return[t,e]}),r.call(i,function(t){var e,n;return e=t[0],n=t[1],e}).map(function(t){var e,n;return e=t[0],n=t[1]})):(e=J(e,n),r.call(t,e))},ct=function(t){var e;if(T.isFunction(t))return t;if(G(t))return e=ht(t),function(t,n){return t[e](n)};throw new p("not a function or a field key: "+t)},ht=function(t){return t.slice(1)},w=function(){function t(t){this.value=t}return t.prototype.getOrElse=function(){return this.value},t.prototype.get=function(){return this.value},t.prototype.filter=function(e){return e(this.value)?new t(this.value):v},t.prototype.map=function(e){return new t(e(this.value))},t.prototype.forEach=function(t){return t(this.value)},t.prototype.isDefined=!0,t.prototype.toArray=function(){return[this.value]},t.prototype.inspect=function(){return"Some("+this.value+")"},t.prototype.toString=function(){return this.inspect()},t}(),v={getOrElse:function(t){return t},filter:function(){return v},map:function(){return v},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},pt=function(t){return t instanceof w||t===v?t:new w(t)},n.noMore=["<no-more>"],n.more=["<more>"],B=0,l=function(){function t(){this.id=++B}return t.prototype.isEvent=function(){return!0},t.prototype.isEnd=function(){return!1},t.prototype.isInitial=function(){return!1},t.prototype.isNext=function(){return!1},t.prototype.isError=function(){return!1},t.prototype.hasValue=function(){return!1},t.prototype.filter=function(){return!0},t.prototype.inspect=function(){return this.toString()},t.prototype.log=function(){return this.toString()},t}(),g=function(t){function e(t,n){e.__super__.constructor.call(this),!n&&T.isFunction(t)||t instanceof e?(this.valueF=t,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=t)}return bt(e,t),e.prototype.isNext=function(){return!0},e.prototype.hasValue=function(){return!0},e.prototype.value=function(){return this.valueF instanceof e?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},e.prototype.fmap=function(t){var e,n;return this.valueInternal?(n=this.valueInternal,this.apply(function(){return t(n)})):(e=this,this.apply(function(){return t(e.value())}))},e.prototype.apply=function(t){return new e(t)},e.prototype.filter=function(t){return t(this.value())},e.prototype.toString=function(){return T.toString(this.value())},e.prototype.log=function(){return this.value()},e}(l),d=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return bt(e,t),e.prototype.isInitial=function(){return!0},e.prototype.isNext=function(){return!1},e.prototype.apply=function(t){return new e(t)},e.prototype.toNext=function(){return new g(this)},e}(g),c=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return bt(e,t),e.prototype.isEnd=function(){return!0},e.prototype.fmap=function(){return this},e.prototype.apply=function(){return this},e.prototype.toString=function(){return"<end>"},e}(l),f=function(t){function e(t){this.error=t}return bt(e,t),e.prototype.isError=function(){return!0},e.prototype.fmap=function(){return this},e.prototype.apply=function(){return this},e.prototype.toString=function(){return"<error> "+T.toString(this.error)},e}(l),n.Event=l,n.Initial=d,n.Next=g,n.End=c,n.Error=f,Y=function(t){return new d(t,!0)},nt=function(t){return new g(t,!0)},M=function(){return new c},ft=function(t){return t instanceof l?t:nt(t)},q=0,ut=function(){},m=function(){function t(t){this.id=++q,vt(t,this),this.initialDesc=this.desc}return t.prototype.subscribe=function(t){return _.wrappedSubscribe(this,t)},t.prototype.subscribeInternal=function(t){return this.dispatcher.subscribe(t)},t.prototype.onValue=function(){var t;return t=K(arguments),this.subscribe(function(e){return e.hasValue()?t(e.value()):void 0})},t.prototype.onValues=function(t){return this.onValue(function(e){return t.apply(null,e)})},t.prototype.onError=function(){var t;return t=K(arguments),this.subscribe(function(e){return e.isError()?t(e.error):void 0})},t.prototype.onEnd=function(){var t;return t=K(arguments),this.subscribe(function(e){return e.isEnd()?t():void 0})},t.prototype.name=function(t){return this._name=t,this},t.prototype.withDescription=function(){return L.apply(null,arguments).apply(this)},t.prototype.toString=function(){return this._name?this._name:this.desc.toString()},t.prototype.internalDeps=function(){return this.initialDesc.deps()},t}(),m.prototype.assign=m.prototype.onValue,m.prototype.forEach=m.prototype.onValue,m.prototype.inspect=m.prototype.toString,n.Observable=m,o=function(){function t(t){var e,n,r;for(null==t&&(t=[]),this.unsubscribe=Et(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[],e=0,n=t.length;n>e;e++)r=t[e],this.add(r)}return t.prototype.add=function(t){var e,n,r;if(!this.unsubscribed)return e=!1,n=rt,this.starting.push(t),r=function(r){return function(){return r.unsubscribed?void 0:(e=!0,r.remove(n),T.remove(t,r.starting))}}(this),n=t(this.unsubscribe,r),this.unsubscribed||e?n():this.subscriptions.push(n),T.remove(t,this.starting),n},t.prototype.remove=function(t){return this.unsubscribed?void 0:void 0!==T.remove(t,this.subscriptions)?t():void 0},t.prototype.unsubscribe=function(){var t,e,n,r;if(!this.unsubscribed){for(this.unsubscribed=!0,n=this.subscriptions,t=0,e=n.length;e>t;t++)(r=n[t])();return this.subscriptions=[],this.starting=[]}},t.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},t.prototype.empty=function(){return 0===this.count()},t}(),n.CompositeUnsubscribe=o,a=function(){function t(t,e){this._subscribe=t,this._handleEvent=e,this.subscribe=Et(this.subscribe,this),this.handleEvent=Et(this.handleEvent,this),this.subscriptions=[],this.queue=[],this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0}return t.prototype.hasSubscribers=function(){return this.subscriptions.length>0},t.prototype.removeSub=function(t){return this.subscriptions=T.without(t,this.subscriptions)},t.prototype.push=function(t){return t.isEnd()&&(this.ended=!0),_.inTransaction(t,this,this.pushIt,[t])},t.prototype.pushToSubscriptions=function(t){var e,r,i,o,s,u;try{for(u=this.subscriptions,r=0,i=u.length;i>r;r++)s=u[r],o=s.sink(t),(o===n.noMore||t.isEnd())&&this.removeSub(s);return!0}catch(a){throw e=a,this.pushing=!1,this.queue=[],e}},t.prototype.pushIt=function(t){if(this.pushing)return this.queue.push(t),n.more;if(t!==this.prevError){for(t.isError()&&(this.prevError=t),this.pushing=!0,this.pushToSubscriptions(t),this.pushing=!1;this.queue.length;)t=this.queue.shift(),this.push(t);return this.hasSubscribers()?n.more:(this.unsubscribeFromSource(),n.noMore)}},t.prototype.handleEvent=function(t){return this._handleEvent?this._handleEvent(t):this.push(t)},t.prototype.unsubscribeFromSource=function(){return this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},t.prototype.subscribe=function(t){var e;return this.ended?(t(M()),rt):(I(t),e={sink:t},this.subscriptions.push(e),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),I(this.unsubSrc)),function(t){return function(){return t.removeSub(e),t.hasSubscribers()?void 0:t.unsubscribeFromSource()}}(this))},t}(),h=function(t){function e(t,n,r){T.isFunction(t)&&(r=n,n=t,t=[]),e.__super__.constructor.call(this,t),I(n),this.dispatcher=new a(n,r),ut(this)}return bt(e,t),e.prototype.toProperty=function(t){var e,r;return r=0===arguments.length?v:pt(function(){return t}),e=this.dispatcher,new y(L(this,"toProperty",t),function(t){var i,o,s,u;return i=!1,u=rt,o=n.more,s=function(){return i?void 0:r.forEach(function(e){return i=!0,o=t(new d(e)),o===n.noMore?(u(),u=rt):void 0})},u=e.subscribe(function(e){return e.hasValue()?i&&e.isInitial()?n.more:(e.isInitial()||s(),i=!0,r=new w(e),t(e)):(e.isEnd()&&(o=s()),o!==n.noMore?t(e):void 0)}),s(),u})},e.prototype.toEventStream=function(){return this},e.prototype.withHandler=function(t){return new e(L(this,"withHandler",t),this.dispatcher.subscribe,t)},e}(m),n.EventStream=h,n.never=function(){return new h(L(n,"never"),function(t){return t(M()),rt})},n.when=function(){var t,e,r,i,o,s,u,a,c,f,l,p,d,g,v,m,y,b,w,x;if(0===arguments.length)return n.never();for(u=arguments.length,x="when: expecting arguments in the form (Observable+,function)+",A(x,u%2===0),b=[],d=[],e=0,g=[];u>e;){for(g[e]=arguments[e],g[e+1]=arguments[e+1],p=T.toArray(arguments[e]),t=C(arguments[e+1]),l={f:t,ixs:[]},w=!1,o=0,a=p.length;a>o;o++){for(y=p[o],r=T.indexOf(b,y),w||(w=E.isTrigger(y)),0>r&&(b.push(y),r=b.length-1),v=l.ixs,s=0,c=v.length;c>s;s++)i=v[s],i.index===r&&i.count++;l.ixs.push({index:r,count:1})}A("At least one EventStream required",w||!p.length),p.length>0&&d.push(l),e+=2}return b.length?(b=T.map(E.fromObservable,b),f=T.any(b,function(t){return t.flatten})&&R(T.map(function(t){return t.obs},b)),m=new h(L.apply(null,[n,"when"].concat(wt.call(g))),function(t){var r,i,o,s,u,a,c;return c=[],o=!1,s=function(t){var n,r,i;for(i=t.ixs,n=0,r=i.length;r>n;n++)if(e=i[n],!b[e.index].hasAtLeast(e.count))return!1;return!0},i=function(t){return!t.sync||t.ended},r=function(t){var n,r,i;for(i=t.ixs,n=0,r=i.length;r>n;n++)if(e=i[n],!b[e.index].mayHave(e.count))return!0},u=function(t){return!t.source.flatten},a=function(a){return function(l){var h,p,g;return p=function(){return _.whenDoneWith(m,h)},g=function(){var r,i,o,a,f,l;if(!(c.length>0))return n.more;for(f=n.more,l=c.pop(),i=0,o=d.length;o>i;i++)if(a=d[i],s(a))return r=function(){var t,n,r,i;for(r=a.ixs,i=[],n=0,t=r.length;t>n;n++)e=r[n],i.push(b[e.index].consume());return i}(),f=t(l.e.apply(function(){var t,e;return e=function(){var e,n,i;for(i=[],n=0,e=r.length;e>n;n++)t=r[n],i.push(t.value());return i}(),a.f.apply(a,e)})),c.length&&(c=T.filter(u,c)),f===n.noMore?f:g()},h=function(){var e;return e=g(),o&&(o=!1,(T.all(b,i)||T.all(d,r))&&(e=n.noMore,t(M()))),e===n.noMore&&l(),e},a.subscribe(function(e){var r;return e.isEnd()?(o=!0,a.markEnded(),p()):e.isError()?r=t(e):(a.push(e),a.sync&&(c.push({source:a,e:e}),f||_.hasWaiters()?p():h())),r===n.noMore&&l(),r||n.more})}},new n.CompositeUnsubscribe(function(){var t,e,n;for(n=[],t=0,e=b.length;e>t;t++)y=b[t],n.push(a(y));return n}()).unsubscribe})):n.never()},R=function(t,e){var n;return null==e&&(e=[]),n=function(t){var r;return T.contains(e,t)?!0:(r=t.internalDeps(),r.length?(e.push(t),T.any(r,n)):(e.push(t),!1))},T.any(t,n)},C=function(t){return T.isFunction(t)?t:T.always(t)},n.groupSimultaneous=function(){var t,e,i;return i=1<=arguments.length?wt.call(arguments,0):[],1===i.length&&H(i[0])&&(i=i[0]),e=function(){var e,n,o;for(o=[],e=0,n=i.length;n>e;e++)t=i[e],o.push(new r(t));return o}(),vt.apply(null,[n,"groupSimultaneous"].concat(wt.call(i),[n.when(e,function(){var t;return t=1<=arguments.length?wt.call(arguments,0):[]})]))},b=function(t){function e(t,n,r){this.property=t,this.subscribe=Et(this.subscribe,this),e.__super__.constructor.call(this,n,r),this.current=v,this.currentValueRootId=void 0,this.propertyEnded=!1}return bt(e,t),e.prototype.push=function(t){return t.isEnd()&&(this.propertyEnded=!0),t.hasValue()&&(this.current=new w(t),this.currentValueRootId=_.currentEventId()),e.__super__.push.call(this,t)},e.prototype.maybeSubSource=function(t,e){return e===n.noMore?rt:this.propertyEnded?(t(M()),rt):a.prototype.subscribe.call(this,t)},e.prototype.subscribe=function(t){var e,r,i,o;return r=!1,i=n.more,this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)?(e=_.currentEventId(),o=this.currentValueRootId,!this.propertyEnded&&o&&e&&e!==o?(_.whenDoneWith(this.property,function(e){return function(){return e.currentValueRootId===o?t(Y(e.current.get().value())):void 0}}(this)),this.maybeSubSource(t,i)):(_.inTransaction(void 0,this,function(){return i=t(Y(this.current.get().value()))},[]),this.maybeSubSource(t,i))):this.maybeSubSource(t,i)},e}(a),y=function(t){function e(t,n,r){T.isFunction(t)&&(r=n,n=t,t=[]),e.__super__.constructor.call(this,t),I(n),this.dispatcher=new b(this,n,r),ut(this)}return bt(e,t),e.prototype.changes=function(){return new h(L(this,"changes"),function(t){return function(e){return t.dispatcher.subscribe(function(t){return t.isInitial()?void 0:e(t)})}}(this))},e.prototype.withHandler=function(t){return new e(L(this,"withHandler",t),this.dispatcher.subscribe,t)},e.prototype.toProperty=function(){return j(arguments),this},e.prototype.toEventStream=function(){return new h(L(this,"toEventStream"),function(t){return function(e){return t.dispatcher.subscribe(function(t){return t.isInitial()&&(t=t.toNext()),e(t)})}}(this))},e}(m),n.Property=y,n.constant=function(t){return new y(L(n,"constant",t),function(e){return e(Y(t)),e(M()),rt})},n.fromBinder=function(t,e){return null==e&&(e=T.id),new h(L(n,"fromBinder",t,e),function(r){var i,o,s,u;return u=!1,i=!1,o=function(){return u?void 0:"undefined"!=typeof s&&null!==s?(s(),u=!0):i=!0},s=t(function(){var t,i,s,u,a,c;for(t=1<=arguments.length?wt.call(arguments,0):[],c=e.apply(this,t),H(c)&&T.last(c)instanceof l||(c=[c]),a=n.more,s=0,u=c.length;u>s;s++)if(i=c[s],a=r(i=ft(i)),a===n.noMore||i.isEnd())return o(),a;return a}),i&&o(),o})},U=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]],$=function(t){var e,n,r,i;for(e=0,n=U.length;n>e;e++)if(i=U[e],r=[t[i[0]],t[i[1]]],r[0]&&r[1])return r;throw new f("No suitable event methods in "+t)},n.fromEventTarget=function(t,e,r){var i,o,s;return i=$(t),o=i[0],s=i[1],vt(n,"fromEvent",t,e,n.fromBinder(function(n){return o.call(t,e,n),function(){return s.call(t,e,n)}},r))},n.fromEvent=n.fromEventTarget,n.Observable.prototype.map=function(){var t,e;return e=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[],D(this,e,t,function(t){return vt(this,"map",t,this.withHandler(function(e){return this.push(e.fmap(t))}))})},n.combineAsArray=function(){var t,e,r,i,o,s,u;for(u=1<=arguments.length?wt.call(arguments,0):[],1===u.length&&H(u[0])&&(u=u[0]),t=e=0,r=u.length;r>e;t=++e)s=u[t],z(s)||(u[t]=n.constant(s));return u.length?(o=function(){var t,e,n;for(n=[],t=0,e=u.length;e>t;t++)i=u[t],n.push(new E(i,!0));return n}(),vt.apply(null,[n,"combineAsArray"].concat(wt.call(u),[n.when(o,function(){var t;return t=1<=arguments.length?wt.call(arguments,0):[]}).toProperty()]))):n.constant([])},n.onValues=function(){var t,e,r;return r=2<=arguments.length?wt.call(arguments,0,e=arguments.length-1):(e=0,[]),t=arguments[e++],n.combineAsArray(r).onValues(t)},n.combineWith=function(){var t,e;return t=arguments[0],e=2<=arguments.length?wt.call(arguments,1):[],vt.apply(null,[n,"combineWith",t].concat(wt.call(e),[n.combineAsArray(e).map(function(e){return t.apply(null,e)})]))},n.combineTemplate=function(t){var e,r,i,o,s,u,a,c,f,l;return a=[],l=[],u=function(t){return t[t.length-1]},f=function(t,e,n){return u(t)[e]=n},e=function(t,e){return function(n,r){return f(n,t,r[e])}},s=function(t,e){return function(n){return f(n,t,e)}},c=function(t){return H(t)?[]:{}},i=function(t,n){var r,i;return z(n)?(l.push(n),a.push(e(t,l.length-1))):n!==Object(n)||"function"==typeof n||n instanceof RegExp||n instanceof Date?a.push(s(t,n)):(i=function(t){return function(e){var r;return r=c(n),f(e,t,r),e.push(r)}},r=function(t){return t.pop()},a.push(i(t)),o(n),a.push(r))},o=function(t){return T.each(t,i)},o(t),r=function(e){var n,r,i,o,s;for(s=c(t),n=[s],i=0,o=a.length;o>i;i++)(r=a[i])(n,e);return s},vt(n,"combineTemplate",t,n.combineAsArray(l).map(r))},n.Observable.prototype.combine=function(t,e){var r;return r=ct(e),vt(this,"combine",t,e,n.combineAsArray(this,t).map(function(t){return r(t[0],t[1])}))},n.Observable.prototype.decode=function(t){return vt(this,"decode",t,this.combine(n.combineTemplate(t),function(t,e){return e[t]}))},n.Observable.prototype.withStateMachine=function(t,e){var r;return r=t,vt(this,"withStateMachine",t,e,this.withHandler(function(t){var i,o,s,u,a,c,f;for(i=e(r,t),u=i[0],c=i[1],r=u,f=n.more,o=0,s=c.length;s>o;o++)if(a=c[o],f=this.push(a),f===n.noMore)return f;return f}))},n.Observable.prototype.skipDuplicates=function(t){return null==t&&(t=function(t,e){return t===e}),vt(this,"skipDuplicates",this.withStateMachine(v,function(e,n){return n.hasValue()?n.isInitial()||e===v||!t(e.get(),n.value())?[new w(n.value()),[n]]:[e,[]]:[e,[n]]}))},n.Observable.prototype.awaiting=function(t){return vt(this,"awaiting",t,n.groupSimultaneous(this,t).map(function(t){var e,n;return e=t[0],n=t[1],0===n.length}).toProperty(!1).skipDuplicates())},n.Observable.prototype.not=function(){return vt(this,"not",this.map(function(t){return!t}))},n.Property.prototype.and=function(t){return vt(this,"and",t,this.combine(t,function(t,e){return t&&e}))},n.Property.prototype.or=function(t){return vt(this,"or",t,this.combine(t,function(t,e){return t||e}))},n.scheduler={setTimeout:function(t,e){return setTimeout(t,e)},setInterval:function(t,e){return setInterval(t,e)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},now:function(){return(new Date).getTime()}},n.EventStream.prototype.bufferWithTime=function(t){return vt(this,"bufferWithTime",t,this.bufferWithTimeOrCount(t,Number.MAX_VALUE))},n.EventStream.prototype.bufferWithCount=function(t){return vt(this,"bufferWithCount",t,this.bufferWithTimeOrCount(void 0,t))},n.EventStream.prototype.bufferWithTimeOrCount=function(t,e){var n;return n=function(n){return n.values.length===e?n.flush():void 0!==t?n.schedule():void 0},vt(this,"bufferWithTimeOrCount",t,e,this.buffer(t,n,n))},n.EventStream.prototype.buffer=function(t,e,r){var i,o,s;return null==e&&(e=rt),null==r&&(r=rt),i={scheduled:null,end:void 0,values:[],flush:function(){var t;if(this.scheduled&&(n.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){if(t=this.push(nt(this.values)),this.values=[],null!=this.end)return this.push(this.end);if(t!==n.noMore)return r(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){return this.scheduled?void 0:this.scheduled=t(function(t){return function(){return t.flush()}}(this))}},s=n.more,T.isFunction(t)||(o=t,t=function(t){return n.scheduler.setTimeout(t,o)}),vt(this,"buffer",this.withHandler(function(t){return i.push=function(t){return function(e){return t.push(e)}}(this),t.isError()?s=this.push(t):t.isEnd()?(i.end=t,i.scheduled||i.flush()):(i.values.push(t.value()),e(i)),s}))},n.Observable.prototype.filter=function(){var t,e;return e=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[],D(this,e,t,function(t){return vt(this,"filter",t,this.withHandler(function(e){return e.filter(t)?this.push(e):n.more}))})},n.once=function(t){return new h(L(n,"once",t),function(e){return e(ft(t)),e(M()),rt})},n.EventStream.prototype.concat=function(t){var e;return e=this,new h(L(e,"concat",t),function(n){var r,i;return i=rt,r=e.dispatcher.subscribe(function(e){return e.isEnd()?i=t.dispatcher.subscribe(n):n(e)}),function(){return r(),i()}})},n.Observable.prototype.flatMap=function(){return V(this,et(arguments))},n.Observable.prototype.flatMapFirst=function(){return V(this,et(arguments),!0)},V=function(t,e,r,i){var s,u,a;return a=[t],s=[],u=new h(L(t,"flatMap"+(r?"First":""),e),function(u){var a,c,f,l,h;return f=new o,l=[],h=function(t){var r;return r=tt(e(t.value())),s.push(r),f.add(function(t,e){return r.dispatcher.subscribe(function(i){var o;return i.isEnd()?(T.remove(r,s),c(),a(e),n.noMore):(i instanceof d&&(i=i.toNext()),o=u(i),o===n.noMore&&t(),o)})})},c=function(){var t;return t=l.shift(),t?h(t):void 0},a=function(t){return t(),f.empty()?u(M()):void 0},f.add(function(e,o){return t.dispatcher.subscribe(function(t){return t.isEnd()?a(o):t.isError()?u(t):r&&f.count()>1?n.more:f.unsubscribed?n.noMore:i&&f.count()>i?l.push(t):h(t)})}),f.unsubscribe}),u.internalDeps=function(){return s.length?a.concat(s):a},u},et=function(t){return 1===t.length&&z(t[0])?T.always(t[0]):K(t)},tt=function(t){return z(t)?t:n.once(t)},n.Observable.prototype.flatMapWithConcurrencyLimit=function(){var t,e;return e=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[],vt.apply(null,[this,"flatMapWithConcurrencyLimit",e].concat(wt.call(t),[V(this,et(t),!1,e)]))},n.Observable.prototype.flatMapConcat=function(){return vt.apply(null,[this,"flatMapConcat"].concat(wt.call(arguments),[this.flatMapWithConcurrencyLimit.apply(this,[1].concat(wt.call(arguments)))]))},x=function(t,e){var r;return r=new h(L(t,"justInitValue"),function(e){var i,o;return o=void 0,i=t.dispatcher.subscribe(function(t){return t.isEnd()||(o=t),n.noMore}),_.whenDoneWith(r,function(){return null!=o&&e(o),e(M())}),i}),r.concat(e).toProperty()},n.Observable.prototype.mapEnd=function(){var t;return t=K(arguments),vt(this,"mapEnd",t,this.withHandler(function(e){return e.isEnd()?(this.push(nt(t(e))),this.push(M()),n.noMore):this.push(e)}))},n.Observable.prototype.skipErrors=function(){return vt(this,"skipErrors",this.withHandler(function(t){return t.isError()?n.more:this.push(t)}))},n.EventStream.prototype.takeUntil=function(t){var e;return e={},vt(this,"takeUntil",t,n.groupSimultaneous(this.mapEnd(e),t.skipErrors()).withHandler(function(r){var i,o,s,u,a,c;if(r.hasValue()){if(u=r.value(),i=u[0],t=u[1],t.length)return this.push(M());for(a=n.more,o=0,s=i.length;s>o;o++)c=i[o],a=this.push(c===e?M():nt(c));return a}return this.push(r)}))},n.Property.prototype.takeUntil=function(t){var e;return e=this.changes().takeUntil(t),vt(this,"takeUntil",t,x(this,e))},n.Observable.prototype.flatMapLatest=function(){var t,e;return t=et(arguments),e=this.toEventStream(),vt(this,"flatMapLatest",t,e.flatMap(function(n){return tt(t(n)).takeUntil(e)}))},n.fromPoll=function(t,e){return vt(n,"fromPoll",t,e,n.fromBinder(function(e){var r;return r=n.scheduler.setInterval(e,t),function(){return n.scheduler.clearInterval(r)}},e))},n.later=function(t,e){return vt(n,"later",t,e,n.fromBinder(function(r){var i,o;return o=function(){return r([e,M()])},i=n.scheduler.setTimeout(o,t),function(){return n.scheduler.clearTimeout(i)}}))},n.sequentially=function(t,e){var r;return r=0,vt(n,"sequentially",t,e,n.fromPoll(t,function(){var t;return t=e[r++],r<e.length?t:r===e.length?[t,M()]:M()}))},n.repeatedly=function(t,e){var r;return r=0,vt(n,"repeatedly",t,e,n.fromPoll(t,function(){return e[r++%e.length]}))},n.interval=function(t,e){return null==e&&(e={}),vt(n,"interval",t,e,n.fromPoll(t,function(){return nt(e)}))},n.EventStream.prototype.delay=function(t){return vt(this,"delay",t,this.flatMap(function(e){return n.later(t,e)}))},n.Property.prototype.delay=function(t){return this.delayChanges("delay",t,function(e){return e.delay(t)})},n.Property.prototype.delayChanges=function(){var t,e,n;return t=2<=arguments.length?wt.call(arguments,0,n=arguments.length-1):(n=0,[]),e=arguments[n++],vt.apply(null,[this].concat(wt.call(t),[x(this,e(this.changes()))]))},n.Observable.prototype.bufferingThrottle=function(t){return vt(this,"bufferingThrottle",t,this.flatMapConcat(function(e){return n.once(e).concat(n.later(t).filter(!1))}))},n.Property.prototype.bufferingThrottle=function(){return n.Observable.prototype.bufferingThrottle.apply(this,arguments).toProperty();

},i=function(t){function e(){this.guardedSink=Et(this.guardedSink,this),this.subscribeAll=Et(this.subscribeAll,this),this.unsubAll=Et(this.unsubAll,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,e.__super__.constructor.call(this,L(n,"Bus"),this.subscribeAll)}return bt(e,t),e.prototype.unsubAll=function(){var t,e,n,r;for(n=this.subscriptions,t=0,e=n.length;e>t;t++)r=n[t],"function"==typeof r.unsub&&r.unsub();return void 0},e.prototype.subscribeAll=function(t){var e,n,r,i;for(this.sink=t,r=P(this.subscriptions),e=0,n=r.length;n>e;e++)i=r[e],this.subscribeInput(i);return this.unsubAll},e.prototype.guardedSink=function(t){return function(e){return function(r){return r.isEnd()?(e.unsubscribeInput(t),n.noMore):e.sink(r)}}(this)},e.prototype.subscribeInput=function(t){return t.unsub=t.input.dispatcher.subscribe(this.guardedSink(t.input))},e.prototype.unsubscribeInput=function(t){var e,n,r,i,o;for(i=this.subscriptions,e=n=0,r=i.length;r>n;e=++n)if(o=i[e],o.input===t)return"function"==typeof o.unsub&&o.unsub(),void this.subscriptions.splice(e,1)},e.prototype.plug=function(t){var e;return k(t),this.ended?void 0:(e={input:t},this.subscriptions.push(e),null!=this.sink&&this.subscribeInput(e),function(e){return function(){return e.unsubscribeInput(t)}}(this))},e.prototype.end=function(){return this.ended=!0,this.unsubAll(),"function"==typeof this.sink?this.sink(M()):void 0},e.prototype.push=function(t){return"function"==typeof this.sink?this.sink(nt(t)):void 0},e.prototype.error=function(t){return"function"==typeof this.sink?this.sink(new f(t)):void 0},e}(h),n.Bus=i,Q=function(t,e){return mt(function(){var r,i,o;return i=arguments[0],r=2<=arguments.length?wt.call(arguments,1):[],o=it(e,[function(t,e){return i.apply(null,wt.call(t).concat([e]))}]),vt.apply(null,[n,t,i].concat(wt.call(r),[n.combineAsArray(r).flatMap(o)]))})},n.fromCallback=Q("fromCallback",function(){var t,e;return e=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[],n.fromBinder(function(n){return J(e,t)(n),rt},function(t){return[t,M()]})}),n.fromNodeCallback=Q("fromNodeCallback",function(){var t,e;return e=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[],n.fromBinder(function(n){return J(e,t)(n),rt},function(t,e){return t?[new f(t),M()]:[e,M()]})}),n.EventStream.prototype.debounce=function(t){return vt(this,"debounce",t,this.flatMapLatest(function(e){return n.later(t,e)}))},n.Property.prototype.debounce=function(t){return this.delayChanges("debounce",t,function(e){return e.debounce(t)})},n.EventStream.prototype.debounceImmediate=function(t){return vt(this,"debounceImmediate",t,this.flatMapFirst(function(e){return n.once(e).concat(n.later(t).filter(!1))}))},n.Observable.prototype.scan=function(t,e){var r,i,o;return e=ct(e),r=pt(t),o=function(t){return function(o){var s,u,a,c;return s=!1,c=rt,u=n.more,a=function(){return s?void 0:r.forEach(function(t){return s=!0,u=o(new d(function(){return t})),u===n.noMore?(c(),c=rt):void 0})},c=t.dispatcher.subscribe(function(t){var i,c;return t.hasValue()?s&&t.isInitial()?n.more:(t.isInitial()||a(),s=!0,c=r.getOrElse(void 0),i=e(c,t.value()),r=new w(i),o(t.apply(function(){return i}))):(t.isEnd()&&(u=a()),u!==n.noMore?o(t):void 0)}),_.whenDoneWith(i,a),c}}(this),i=new y(L(this,"scan",t,e),o)},n.Observable.prototype.diff=function(t,e){return e=ct(e),vt(this,"diff",t,e,this.scan([t],function(t,n){return[n,e(t[0],n)]}).filter(function(t){return 2===t.length}).map(function(t){return t[1]}))},n.Observable.prototype.doAction=function(){var t;return t=K(arguments),vt(this,"doAction",t,this.withHandler(function(e){return e.hasValue()&&t(e.value()),this.push(e)}))},n.Observable.prototype.endOnError=function(){var t,e;return e=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[],null==e&&(e=!0),D(this,e,t,function(t){return vt(this,"endOnError",this.withHandler(function(e){return e.isError()&&t(e.error)?(this.push(e),this.push(M())):this.push(e)}))})},m.prototype.errors=function(){return vt(this,"errors",this.filter(function(){return!1}))},gt=function(t){return[t,M()]},n.fromPromise=function(t,e){return vt(n,"fromPromise",t,n.fromBinder(function(n){var r;return null!=(r=t.then(n,function(t){return n(new f(t))}))&&"function"==typeof r.done&&r.done(),function(){return e&&"function"==typeof t.abort?t.abort():void 0}},gt))},n.Observable.prototype.mapError=function(){var t;return t=K(arguments),vt(this,"mapError",t,this.withHandler(function(e){return this.push(e.isError()?nt(t(e.error)):e)}))},n.Observable.prototype.flatMapError=function(t){return vt(this,"flatMapError",t,this.mapError(function(t){return new f(t)}).flatMap(function(e){return e instanceof f?t(e.error):n.once(e)}))},n.EventStream.prototype.sampledBy=function(t,e){return vt(this,"sampledBy",t,e,this.toProperty().sampledBy(t,e))},n.Property.prototype.sampledBy=function(t,e){var r,i,o,s,u;return null!=e?e=ct(e):(r=!0,e=function(t){return t.value()}),u=new E(this,!1,r),o=new E(t,!0,r),s=n.when([u,o],e),i=t instanceof y?s.toProperty():s,vt(this,"sampledBy",t,e,i)},n.Property.prototype.sample=function(t){return vt(this,"sample",t,this.sampledBy(n.interval(t,{})))},n.Observable.prototype.map=function(){var t,e;return e=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[],e instanceof y?e.sampledBy(this,W):D(this,e,t,function(t){return vt(this,"map",t,this.withHandler(function(e){return this.push(e.fmap(t))}))})},n.Observable.prototype.fold=function(t,e){return vt(this,"fold",t,e,this.scan(t,e).sampledBy(this.filter(!1).mapEnd().toProperty()))},m.prototype.reduce=m.prototype.fold,n.EventStream.prototype.merge=function(t){var e;return O(t),e=this,vt(e,"merge",t,n.mergeAll(this,t))},n.mergeAll=function(){var t;return t=1<=arguments.length?wt.call(arguments,0):[],H(t[0])&&(t=t[0]),t.length?new h(L.apply(null,[n,"mergeAll"].concat(wt.call(t))),function(e){var r,i,o;return r=0,o=function(i){return function(o){return i.dispatcher.subscribe(function(i){var s;return i.isEnd()?(r++,r===t.length?e(M()):n.more):(s=e(i),s===n.noMore&&o(),s)})}},i=T.map(o,t),new n.CompositeUnsubscribe(i).unsubscribe}):n.never()},n.Observable.prototype.take=function(t){return 0>=t?n.never():vt(this,"take",t,this.withHandler(function(e){return e.hasValue()?(t--,t>0?this.push(e):(0===t&&this.push(e),this.push(M()),n.noMore)):this.push(e)}))},n.fromArray=function(t){var e;return S(t),t.length?(e=0,new h(L(n,"fromArray",t),function(r){var i,o,s;return s=!1,o=n.more,i=function(){var u;return o===n.noMore||s||(u=t[e++],o=r(ft(u)),o===n.noMore)?void 0:e===t.length?r(M()):_.afterTransaction(i)},i(),function(){return s=!0}})):vt(n,"fromArray",t,n.never())},n.EventStream.prototype.holdWhen=function(t){var e,r,i;return i=t.startWith(!1),r=i.filter(function(t){return!t}),e=i.filter(T.id),vt(this,"holdWhen",t,this.filter(!1).merge(i.flatMapConcat(function(t){return function(i){return i?t.scan([],function(t,e){return t.concat([e])}).sampledBy(r).take(1).flatMap(n.fromArray):t.takeUntil(e)}}(this))))},n.$={},n.$.asEventStream=function(t,e,r){var i;return T.isFunction(e)&&(i=[e,void 0],r=i[0],e=i[1]),vt(this.selector||this,"asEventStream",t,n.fromBinder(function(n){return function(r){return n.on(t,e,r),function(){return n.off(t,e,r)}}}(this),r))},null!=(st="undefined"!=typeof jQuery&&null!==jQuery?jQuery:"undefined"!=typeof Zepto&&null!==Zepto?Zepto:void 0)&&(st.fn.asEventStream=n.$.asEventStream),n.Observable.prototype.log=function(){var t;return t=1<=arguments.length?wt.call(arguments,0):[],this.subscribe(function(e){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log.apply(console,wt.call(t).concat([e.log()])):void 0}),this},n.repeat=function(t){var e;return e=0,n.fromBinder(function(r){var i,o,s,u,a;return i=!1,s=n.more,a=function(){},o=function(t){return t.isEnd()?i?u():i=!0:s=r(t)},u=function(){var u;for(i=!0;i&&s!==n.noMore;)u=t(e++),i=!1,u?a=u.subscribeInternal(o):r(M());return i=!0},u(),function(){return a()}})},n.retry=function(t){var e,r,i,o,s,u,a;if(!T.isFunction(t.source))throw new p("'source' option has to be a function");return a=t.source,u=t.retries||0,s=t.maxRetries||u,e=t.delay||function(){return 0},o=t.isRetryable||function(){return!0},i=!1,r=null,vt(n,"retry",t,n.repeat(function(){var t,c,f;return i?null:(f=function(){return a().endOnError().withHandler(function(t){return t.isError()?(r=t,o(r.error)&&u>0?void 0:(i=!0,this.push(t))):(t.hasValue()&&(r=null,i=!0),this.push(t))})},r?(t={error:r.error,retriesDone:s-u},c=n.later(e(t)).filter(!1),u-=1,c.concat(n.once().flatMap(f))):f())}))},n.Observable.prototype.skip=function(t){return vt(this,"skip",t,this.withHandler(function(e){return e.hasValue()&&t>0?(t--,n.more):this.push(e)}))},n.EventStream.prototype.skipUntil=function(t){var e;return e=t.take(1).map(!0).toProperty(!1),vt(this,"skipUntil",t,this.filter(e))},n.EventStream.prototype.skipWhile=function(){var t,e,r;return e=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[],r=!1,D(this,e,t,function(t){return vt(this,"skipWhile",t,this.withHandler(function(e){return!r&&e.hasValue()&&t(e.value())?n.more:(e.hasValue()&&(r=!0),this.push(e))}))})},n.Observable.prototype.slidingWindow=function(t,e){return null==e&&(e=0),vt(this,"slidingWindow",t,e,this.scan([],function(e,n){return e.concat([n]).slice(-t)}).filter(function(t){return t.length>=e}))},n.spy=function(t){return at.push(t)},at=[],ut=function(t){var e,n,r;if(at.length&&!ut.running)try{for(ut.running=!0,e=0,n=at.length;n>e;e++)(r=at[e])(t)}finally{delete ut.running}return void 0},n.Property.prototype.startWith=function(t){return vt(this,"startWith",t,this.scan(t,function(t,e){return e}))},n.EventStream.prototype.startWith=function(t){return vt(this,"startWith",t,n.once(t).concat(this))},n.Observable.prototype.takeWhile=function(){var t,e;return e=arguments[0],t=2<=arguments.length?wt.call(arguments,1):[],D(this,e,t,function(t){return vt(this,"takeWhile",t,this.withHandler(function(e){return e.filter(t)?this.push(e):(this.push(M()),n.noMore)}))})},n.update=function(){var t,e,r,i;for(e=arguments[0],i=2<=arguments.length?wt.call(arguments,1):[],r=function(t){return function(){var e;return e=1<=arguments.length?wt.call(arguments,0):[],function(n){return t.apply(null,[n].concat(e))}}},t=i.length-1;t>0;)i[t]instanceof Function||(i[t]=function(t){return function(){return t}}(i[t])),i[t]=r(i[t]),t-=2;return vt.apply(null,[n,"update",e].concat(wt.call(i),[n.when.apply(n,i).scan(e,function(t,e){return e(t)})]))},n.zipAsArray=function(){var t;return t=1<=arguments.length?wt.call(arguments,0):[],H(t[0])&&(t=t[0]),vt.apply(null,[n,"zipAsArray"].concat(wt.call(t),[n.zipWith(t,function(){var t;return t=1<=arguments.length?wt.call(arguments,0):[]})]))},n.zipWith=function(){var t,e,r;return t=arguments[0],r=2<=arguments.length?wt.call(arguments,1):[],T.isFunction(t)||(e=[t,r[0]],r=e[0],t=e[1]),r=T.map(function(t){return t.toEventStream()},r),vt.apply(null,[n,"zipWith",t].concat(wt.call(r),[n.when(r,t)]))},n.Observable.prototype.zip=function(t,e){return null==e&&(e=Array),vt(this,"zip",t,n.zipWith([this,t],e))},n.Observable.prototype.first=function(){return vt(this,"first",this.take(1))},n.Observable.prototype.last=function(){var t;return vt(this,"last",this.withHandler(function(e){return e.isEnd()?(t&&this.push(t),this.push(M()),n.noMore):void(t=e)}))},n.EventStream.prototype.throttle=function(t){return vt(this,"throttle",t,this.bufferWithTime(t).map(function(t){return t[t.length-1]}))},n.Property.prototype.throttle=function(t){return this.delayChanges("throttle",t,function(e){return e.throttle(t)})},m.prototype.firstToPromise=function(t){var e=this;if("function"!=typeof t){if("function"!=typeof Promise)throw new p("There isn't default Promise, use shim or parameter");t=Promise}return new t(function(t,r){return e.subscribe(function(e){return e.hasValue()&&t(e.value()),e.isError()&&r(e.error),n.noMore})})},m.prototype.toPromise=function(t){return this.last().firstToPromise(t)},"undefined"!=typeof define&&null!==define&&null!=define.amd?(define([],function(){return n}),this.Bacon=n):"undefined"!=typeof e&&null!==e&&null!=e.exports?(e.exports=n,n.Bacon=n):this.Bacon=n}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(t,e,n){e.exports={autoCommit:!0,asynchronous:!0,facets:{},validate:null,validationBehavior:"rollback"}},{}],4:[function(t,e,n){var r=t("./src/baobab.js"),i=t("./src/helpers.js");Object.defineProperty(r,"version",{value:"1.0.2"}),r.getIn=i.getIn,e.exports=r},{"./src/baobab.js":6,"./src/helpers.js":9}],5:[function(t,e,n){(function(){"use strict";function t(t,e){var n,r={};for(n in t)r[n]=t[n];for(n in e)r[n]=e[n];return r}function r(t){return!(!t||"object"!=typeof t||Array.isArray(t)||t instanceof Function||t instanceof RegExp)}function i(t,e){t=t||[];var n,r,i=[];for(r=0,n=t.length;n>r;r++)t[r].fn!==e&&i.push(t[r]);return i}var o={once:"boolean",scope:"object"},s=0,u=function(){this._enabled=!0,this.unbindAll()};u.prototype.unbindAll=function(){return this._handlers={},this._handlersAll=[],this._handlersComplex=[],this},u.prototype.on=function(t,e,n){var i,u,a,c,f,l,h;if(r(t)){for(c in t)this.on(c,t[c],e);return this}for("function"==typeof t&&(n=e,e=t,t=null),f=[].concat(t),i=0,u=f.length;u>i;i++){if(c=f[i],h={order:s++,fn:e},"string"==typeof c)this._handlers[c]||(this._handlers[c]=[]),l=this._handlers[c];else if(c instanceof RegExp)l=this._handlersComplex,h.pattern=c;else{if(null!==c)throw Error("Emitter.on: invalid event.");l=this._handlersAll}for(a in n||{})o[a]&&(h[a]=n[a]);h.once&&(h.parent=l),l.push(h)}return this},u.prototype.once=function(){var e=Array.prototype.slice.call(arguments),n=e.length-1;return r(e[n])&&e.length>1?e[n]=t(e[n],{once:!0}):e.push({once:!0}),this.on.apply(this,e)},u.prototype.off=function(t,e){var n,o,s,u;if(1===arguments.length&&"function"==typeof t){e=arguments[0];for(s in this._handlers)this._handlers[s]=i(this._handlers[s],e),0===this._handlers[s].length&&delete this._handlers[s];this._handlersAll=i(this._handlersAll,e),this._handlersComplex=i(this._handlersComplex,e)}else if(1===arguments.length&&"string"==typeof t)delete this._handlers[t];else if(2===arguments.length){var a=[].concat(t);for(n=0,o=a.length;o>n;n++)u=a[n],this._handlers[u]=i(this._handlers[u],e),0===(this._handlers[u]||[]).length&&delete this._handlers[u]}else if(r(t))for(s in t)this.off(s,t[s]);return this},u.prototype.listeners=function(t){var e,n,r,i=this._handlersAll||[],o=!1;if(!t)throw Error("Emitter.listeners: no event provided.");for(i=i.concat(this._handlers[t]||[]),n=0,r=this._handlersComplex.length;r>n;n++)e=this._handlersComplex[n],~t.search(e.pattern)&&(o=!0,i.push(e));return this._handlersAll.length||o?i.sort(function(t,e){return t.order-e.order}):i.slice(0)},u.prototype.emit=function(t,e){if(!this._enabled)return this;if(r(t)){for(var n in t)this.emit(n,t[n]);return this}var i,o,s,u,a,c,f,l=[].concat(t),h=[];for(u=0,c=l.length;c>u;u++){for(o=this.listeners(l[u]),a=0,f=o.length;f>a;a++)s=o[a],i={type:l[u],target:this},arguments.length>1&&(i.data=e),s.fn.call("scope"in s?s.scope:this,i),s.once&&h.push(s);for(a=h.length-1;a>=0;a--)h[a].parent.splice(h[a].parent.indexOf(h[a]),1)}return this},u.prototype.kill=function(){this.unbindAll(),this._handlers=null,this._handlersAll=null,this._handlersComplex=null,this._enabled=!1},u.prototype.disable=function(){return this._enabled=!1,this},u.prototype.enable=function(){return this._enabled=!0,this},u.version="3.0.0","undefined"!=typeof n?("undefined"!=typeof e&&e.exports&&(n=e.exports=u),n.Emitter=u):"function"==typeof define&&define.amd?define("emmett",[],function(){return u}):this.Emitter=u}).call(this)},{}],6:[function(t,e,n){function r(t){return t+"$"+(new Date).getTime()+(""+Math.random()).replace("0.","")}function i(t,e){function n(t){this[t]=function(){var e=this.root[t].apply(this.root,arguments);return e instanceof o?this:e}}if(arguments.length<1&&(t={}),!(this instanceof i))return new i(t,e);if(!h.Object(t)&&!h.Array(t))throw Error("Baobab: invalid data.");if(s.call(this),this.options=a.shallowMerge(l,e),this._transaction={},this._future=void 0,this._cursors={},this._identity="[object Baobab]",this.data=a.deepClone(t),this.root=this.select([]),this.facets={},["get","set","unset","update"].forEach(n.bind(this)),!h.Object(this.options.facets))throw Error("Baobab: invalid facets.");for(var r in this.options.facets)this.addFacet(r,this.options.facets[r])}var o=t("./cursor.js"),s=t("emmett"),u=t("./facet.js"),a=t("./helpers.js"),c=t("./update.js"),f=t("./merge.js"),l=t("../defaults.js"),h=t("./type.js");a.inherits(i,s),i.prototype.addFacet=function(t,e,n){return this.facets[t]=this.createFacet(e,n),this},i.prototype.createFacet=function(t,e){return new u(this,t,e)},i.prototype.select=function(t){if(arguments.length>1&&(t=a.arrayOf(arguments)),!h.Path(t))throw Error("Baobab.select: invalid path.");t=[].concat(t);var e,n=h.ComplexPath(t);n&&(e=a.solvePath(this.data,t,this));var i=t.map(function(t){return h.Function(t)?r("fn"):h.Object(t)?r("ob"):t}).join("|λ|");if(this._cursors[i])return this._cursors[i];var s=new o(this,t,e,i);return this._cursors[i]=s,s},i.prototype.stack=function(t,e){var n=this;if(!h.Object(t))throw Error("Baobab.update: wrong specification.");return this._transaction=e&&!Object.keys(this._transaction).length?t:f(this._transaction,t),this.options.autoCommit?this.options.asynchronous?(this._future||(this._future=setTimeout(n.commit.bind(n,null),0)),this):this.commit():this},i.prototype.commit=function(){var t=c(this.data,this._transaction,this.options),e=this.data;this._transaction={},this._future&&(this._future=clearTimeout(this._future));var n=this.options.validate,r=this.options.validationBehavior;if("function"==typeof n){var i=n.call(this,e,t.data,t.log);if(i instanceof Error&&(this.emit("invalid",{error:i}),"rollback"===r))return this}return this.data=t.data,this.emit("update",{log:t.log,previousState:e}),this},i.prototype.release=function(){var t;delete this.data,delete this._transaction;for(t in this._cursors)this._cursors[t].release();delete this._cursors;for(t in this.facets)this.facets[t].release();delete this.facets,this.kill()},i.prototype.toJSON=function(){return this.get()},i.prototype.toString=function(){return this._identity},e.exports=i},{"../defaults.js":3,"./cursor.js":7,"./facet.js":8,"./helpers.js":9,"./merge.js":10,"./type.js":11,"./update.js":12,emmett:5}],7:[function(t,e,n){function r(t,e,n,r){function i(t){if(o.recording&&!o.undoing){var e=u.getIn(t,o.solvedPath,o.tree);o.archive.add(e)}return o.undoing=!1,o.emit("update")}var o=this;s.call(this),e=e||[],this.tree=t,this.path=e,this.hash=r,this.archive=null,this.recording=!1,this.undoing=!1,this._identity="[object Cursor]",this.complexPath=!!n,this.solvedPath=this.complexPath?n:this.path,this.relevant=void 0!==this.get(),this.updateHandler=function(t){var e=t.data.log,n=t.data.previousState,r=!1;if(o.complexPath&&(o.solvedPath=u.solvePath(o.tree.data,o.path,o.tree)),!o.path.length)return i(n);o.solvedPath&&(r=u.solveUpdate(e,[o.solvedPath]));var s=void 0!==o.get();o.relevant?s&&r?i(n):s||(o.emit("irrelevant"),o.relevant=!1):s&&r&&(o.emit("relevant"),i(n),o.relevant=!0)};var a=!1;this._lazyBind=function(){a||(a=!0,o.tree.on("update",o.updateHandler))},this.on=u.before(this._lazyBind,this.on.bind(this)),this.once=u.before(this._lazyBind,this.once.bind(this)),this.complexPath&&this._lazyBind()}function i(t,e,n,r){if(arguments.length>5)throw Error("baobab.Cursor."+t+": too many arguments.");if("unset"===t?(r=!0,2===arguments.length&&(n=[])):arguments.length<4&&(r=n,n=[]),!a.Path(n))throw Error("baobab.Cursor."+t+': invalid path "'+n+'".');if("splice"===t&&!a.Splicer(r)){if(!a.Array(r))throw Error("baobab.Cursor.splice: incorrect value.");r=[r]}if(e&&!e(r))throw Error("baobab.Cursor."+t+": incorrect value.");var i=[].concat(n),o=u.solvePath(this.get(),i,this.tree);if(!o)throw Error("baobab.Cursor."+t+": could not solve dynamic path.");var s={};s["$"+t]=r;var c=u.pathObject(o,s);return c}function o(t,e){r.prototype[t]=function(){var n=i.bind(this,t,e).apply(this,arguments);return this.update(n,!0)}}var s=t("emmett"),u=t("./helpers.js"),a=(t("../defaults.js"),t("./type.js"));u.inherits(r,s),r.prototype.isRoot=function(){return!this.path.length},r.prototype.isLeaf=function(){return a.Primitive(this.get())},r.prototype.isBranch=function(){return!this.isLeaf()&&!this.isRoot()},r.prototype.root=function(){return this.tree.root()},r.prototype.select=function(t){if(arguments.length>1&&(t=u.arrayOf(arguments)),!a.Path(t))throw Error("baobab.Cursor.select: invalid path.");return this.tree.select(this.path.concat(t))},r.prototype.up=function(){return this.solvedPath&&this.solvedPath.length?this.tree.select(this.path.slice(0,-1)):null},r.prototype.left=function(){var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("baobab.Cursor.left: cannot go left on a non-list type.");return t?this.tree.select(this.solvedPath.slice(0,-1).concat(t-1)):null},r.prototype.leftmost=function(){var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("baobab.Cursor.leftmost: cannot go left on a non-list type.");return this.tree.select(this.solvedPath.slice(0,-1).concat(0))},r.prototype.right=function(){var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("baobab.Cursor.right: cannot go right on a non-list type.");return t+1===this.up().get().length?null:this.tree.select(this.solvedPath.slice(0,-1).concat(t+1))},r.prototype.rightmost=function(){var t=+this.solvedPath[this.solvedPath.length-1];if(isNaN(t))throw Error("baobab.Cursor.right: cannot go right on a non-list type.");var e=this.up().get();return this.tree.select(this.solvedPath.slice(0,-1).concat(e.length-1))},r.prototype.down=function(){+this.solvedPath[this.solvedPath.length-1];return this.get()instanceof Array?this.tree.select(this.solvedPath.concat(0)):null},r.prototype.get=function(t){arguments.length>1&&(t=u.arrayOf(arguments));var e=this.solvedPath.concat([].concat(t||0===t?t:[]));return u.getIn(this.tree.data,e,this.tree)},o("set"),o("apply",a.Function),o("chain",a.Function),o("push"),o("unshift"),o("merge",a.Object),o("splice"),r.prototype.unset=function(t){if(void 0===t&&this.isRoot())throw Error("baobab.Cursor.unset: cannot remove root node.");var e=i.bind(this,"unset",null).apply(this,arguments);return this.update(e,!0)},r.prototype.update=function(t,e){if(!a.Object(t))throw Error("baobab.Cursor.update: invalid specifications.");return this.tree.stack(u.pathObject(this.solvedPath,t),e),this},r.prototype.startRecording=function(t){if(t=t||5,1>t)throw Error("baobab.Cursor.startRecording: invalid maximum number of records.");return this.archive?this:(this._lazyBind(),this.archive=u.archive(t),this.recording=!0,this)},r.prototype.stopRecording=function(){return this.recording=!1,this},r.prototype.undo=function(t){if(t=t||1,!this.recording)throw Error("baobab.Cursor.undo: cursor is not recording.");if(!a.PositiveInteger(t))throw Error("baobab.Cursor.undo: expecting a positive integer.");var e=this.archive.back(t);if(!e)throw Error("boabab.Cursor.undo: cannot find a relevant record ("+t+" back).");return this.undoing=!0,this.set(e)},r.prototype.hasHistory=function(){return!(!this.archive||!this.archive.get().length)},r.prototype.getHistory=function(){return this.archive?this.archive.get():[]},r.prototype.clearHistory=function(){return this.archive=null,this},r.prototype.release=function(){this.tree.off("update",this.updateHandler),this.hash&&delete this.tree._cursors[this.hash],delete this.tree,delete this.path,delete this.solvedPath,delete this.archive,this.kill()},r.prototype.toJSON=function(){return this.get()},r.prototype.toString=function(){return this._identity},e.exports=r},{"../defaults.js":3,"./helpers.js":9,"./type.js":11,emmett:5}],8:[function(t,e,n){function r(t,e,n){function a(e,n,i,s,a){if(e||h){p=!1;var c=n;if(e&&(c=n.apply(this,a)),!s(c))throw Error("baobab.Facet: incorrect "+i+" mapping.");l[i]={},Object.keys(c).forEach(function(e){if("cursors"===i){if(c[e]instanceof o)return void(l.cursors[e]=c[e]);if(u.Path(c[e]))return void(l.cursors[e]=t.select(c[e]))}else{if(c[e]instanceof r)return void(l.facets[e]=c[e]);if("string"==typeof c[e]){if(l.facets[e]=t.facets[c[e]],!l.facets[e])throw Error('baobab.Facet: unkown "'+c[e]+'" facet in facets mapping.');return}}})}}function c(t){return Object.keys(t).map(function(e){return t[e].solvedPath})}function f(t){var e=Object.keys(t).map(function(e){return c(t[e].cursors)});return[].concat.apply([],e)}var l=this,h=!0,p=!1,d=e.get,g=null;i.call(this),this.tree=t,this.cursors={},this.facets={};var v=e.cursors,m=e.facets,y="function"==typeof e.cursors,b="function"==typeof e.facets;this.refresh=function(t){if(t=t||[],!u.Array(t))throw Error("baobab.Facet.refresh: first argument should be an array.");v&&a(y,v,"cursors",u.FacetCursors,t),m&&a(b,m,"facets",u.FacetFacets,t)},this.get=function(){if(p)return g;var t,e={};for(t in l.facets)e[t]=l.facets[t].get();for(t in l.cursors)e[t]=l.cursors[t].get();return e="function"==typeof d?d.call(null,e):e,p=!0,g=e},this.updateHandler=function(t){var e=c(l.cursors).concat(f(l.facets));s.solveUpdate(t.data.log,e)&&(p=!1,l.emit("update"))},this.refresh(n),this.tree.on("update",this.updateHandler),h=!1}var i=t("emmett"),o=t("./cursor.js"),s=t("./helpers.js"),u=t("./type.js");s.inherits(r,i),r.prototype.release=function(){this.tree.off("update",this.updateHandler),this.tree=null,this.cursors=null,this.facets=null,this.kill()},e.exports=r},{"./cursor.js":7,"./helpers.js":9,"./type.js":11,emmett:5}],9:[function(t,e,n){(function(n){function r(t){return Array.prototype.slice.call(t)}function i(t,e){return function(){t(),e.apply(null,arguments)}}function o(t,e,n){var i=r(arguments).slice(3);return t.slice(0,e).concat(i).concat(t.slice(e+n))}function s(t,e){var n,r={};for(n in t)r[n]=t[n];for(n in e)r[n]=e[n];return r}function u(t){var e=t.source,n="";return t.global&&(n+="g"),t.multiline&&(n+="m"),t.ignoreCase&&(n+="i"),t.sticky&&(n+="y"),t.unicode&&(n+="u"),new RegExp(e,n)}function a(t,e){if(!e||"object"!=typeof e||e instanceof Error||"ArrayBuffer"in n&&e instanceof ArrayBuffer)return e;if(_.Array(e)){if(t){var r,i,o=[];for(r=0,i=e.length;i>r;r++)o.push(x(e[r]));return o}return e.slice(0)}if(_.Date(e))return new Date(e.getTime());if(e instanceof RegExp)return u(e);if(_.Object(e)){var s,a={};e.constructor&&e.constructor!==Object&&(a=Object.create(e.constructor.prototype));for(s in e)e.hasOwnProperty(s)&&(a[s]=t?x(e[s]):e[s]);return a}return e}function c(t,e){return function(n){return e(t(n))}}function f(t,e){var n,r;for(n=0,r=t.length;r>n;n++)if(e(t[n]))return t[n]}function l(t,e){var n,r;for(n=0,r=t.length;r>n;n++)if(e(t[n]))return n;return-1}function h(t,e){var n,r=!0;if(!t)return!1;for(n in e)if(_.Object(e[n]))r=r&&h(t[n],e[n]);else if(_.Array(e[n]))r=r&&!!~e[n].indexOf(t[n]);else if(t[n]!==e[n])return!1;return r}function d(t,e){return f(t,function(t){return h(t,e)})}function g(t,e){return l(t,function(t){return h(t,e)})}function v(t,e,n){e=e||[];var r,i,o,s=t;for(i=0,o=e.length;o>i;i++){if(!s)return;if("function"==typeof e[i]){if(!_.Array(s))return;s=f(s,e[i])}else if("object"==typeof e[i])if(n&&"$cursor"in e[i]){if(!_.Path(e[i].$cursor))throw Error("baobab.getIn: $cursor path must be an array.");r=n.get(e[i].$cursor),s=s[r]}else{if(!_.Array(s))return;s=d(s,e[i])}else s=s[e[i]]}return s}function m(t,e,n){var r,i,o,s=[],u=t;for(i=0,o=e.length;o>i;i++){if(!u)return null;if("function"==typeof e[i]){if(!_.Array(u))return;r=l(u,e[i]),s.push(r),u=u[r]}else if("object"==typeof e[i])if(n&&"$cursor"in e[i]){if(!_.Path(e[i].$cursor))throw Error("baobab.getIn: $cursor path must be an array.");p=n.get(e[i].$cursor),s.push(p),u=u[p]}else{if(!_.Array(u))return;r=g(u,e[i]),s.push(r),u=u[r]}else s.push(e[i]),u=u[e[i]]||{}}return s}function y(t,e){var n,r,i,o,s,u,a,c,f;for(n=0,o=e.length;o>n;n++)for(a=e[n],r=0,s=t.length;s>r;r++)for(c=t[r],i=0,u=c.length;u>i&&(f=c[i],f==a[i]);i++)if(i+1===u||i+1===a.length)return!0;return!1}function b(t,e){var n,r=t.length,i={},o=i;for(r||(i=e),n=0;r>n;n++)o[t[n]]=n+1===r?e:{},o=o[t[n]];return i}function w(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t){var e=[];return{add:function(n){e.unshift(n),e.length>t&&(e.length=t)},back:function(t){var n=e[t-1];return n&&(e=e.slice(t)),n},get:function(){return e}}}var _=t("./type.js"),T=a.bind(null,!1),x=a.bind(null,!0);e.exports={archive:E,arrayOf:r,before:i,deepClone:x,shallowClone:T,shallowMerge:s,compose:c,getIn:v,inherits:w,pathObject:b,solvePath:m,solveUpdate:y,splice:o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./type.js":11}],10:[function(t,e,n){function r(t,e){var n={};return n[t]=e,n}function i(t,e){var n,a=o.shallowClone(t||{}),c=!1;if(u.forEach(function(t){t in e&&(a=r(t,e[t]),c=!0)}),e.$chain&&(a.$apply=a.$apply?o.compose(a.$apply,e.$chain):e.$chain,a=r("$apply",a.$apply),c=!0),e.$merge&&(a.$merge=o.shallowMerge(a.$merge||{},e.$merge),c=!0),(e.$splice||e.$splice)&&(a.$splice=[].concat(a.$splice||[]).concat(e.$splice||[]),c=!0),(e.$push||a.$push)&&(a.$push=[].concat(a.$push||[]).concat(e.$push||[]),c=!0),(e.$unshift||a.$unshift)&&(a.$unshift=[].concat(e.$unshift||[]).concat(a.$unshift||[]),c=!0),c)return a;for(n in a)"$"===n.charAt(0)&&delete a[n];for(n in e)s.Object(e[n])&&(a[n]=i(a[n],e[n]));return a}var o=t("./helpers.js"),s=t("./type.js"),u=["$unset","$set","$apply"];e.exports=i},{"./helpers.js":9,"./type.js":11}],11:[function(t,e,n){function r(t,e){return e.some(function(e){return i[e](t)})}var i={};i.Array=function(t){return Array.isArray(t)},i.Object=function(t){return t&&"object"==typeof t&&!Array.isArray(t)&&!(t instanceof Function)},i.String=function(t){return"string"==typeof t},i.Number=function(t){return"number"==typeof t},i.PositiveInteger=function(t){return"number"==typeof t&&t>0&&t%1===0},i.Function=function(t){return"function"==typeof t},i.Primitive=function(t){return!t||"string"==typeof t||"number"==typeof t||"boolean"==typeof t},i.Date=function(t){return t instanceof Date},i.NonScalar=function(t){return i.Object(t)||i.Array(t)},i.Splicer=function(t){return i.Array(t)&&t.every(i.Array)},i.Path=function(t,e){return e=e||["String","Number","Function","Object"],i.Array(t)?t.every(function(t){return r(t,e)}):r(t,e)},i.ComplexPath=function(t){return t.some(function(t){return r(t,["Object","Function"])})},i.FacetCursors=function(e){return i.Object(e)?Object.keys(e).every(function(n){var r=e[n];return i.Path(r,["String","Number","Object"])||r instanceof t("./cursor.js")}):!1},i.FacetFacets=function(e){return i.Object(e)?Object.keys(e).every(function(n){var r=e[n];return"string"==typeof r||r instanceof t("./facet.js")}):!1},e.exports=i},{"./cursor.js":7,"./facet.js":8}],12:[function(t,e,n){function r(t,e){var n=new Error("baobab.update: "+e+" at path /"+t.slice(1).join("/"));return n.path=t,n}var i=t("./helpers.js"),o=t("./type.js");e.exports=function(t,e,n){n=n||{};var s={};t={root:i.shallowClone(t)};var u=function(t,e,n,a){n=n||["root"];var c,f,l,h,p,d=n.join("|λ|"),g=n[n.length-1],v=t[g];t[g]=o.Primitive(t[g])?{}:i.shallowClone(t[g]);var m=Object.keys(e).some(function(t){return"$"===t.charAt(0)});if(m){s[d]=!0;for(f in e){if("$unset"===f){var y=n[n.length-2];if(!o.Object(a[y]))throw r(n.slice(0,-1),"using command $unset on a non-object");a[y]=i.shallowClone(t),delete a[y][g];break}if("$set"===f)l=e.$set,t[g]=l;else if("$apply"===f||"$chain"===f){if(c=e.$apply||e.$chain,"function"!=typeof c)throw r(n,"using command $apply with a non function");t[g]=c.call(null,v)}else if("$merge"===f){if(l=e.$merge,!o.Object(t[g])||!o.Object(l))throw r(n,"using command $merge with a non object");t[g]=i.shallowMerge(t[g],l)}if("$splice"===f){if(l=e.$splice,!o.Array(t[g]))throw r(n,"using command $push to a non array");for(h=0,p=l.length;p>h;h++)t[g]=i.splice.apply(null,[t[g]].concat(l[h]));

}if("$push"===f){if(l=e.$push,!o.Array(t[g]))throw r(n,"using command $push to a non array");t[g]=t[g].concat(l)}if("$unshift"===f){if(l=e.$unshift,!o.Array(t[g]))throw r(n,"using command $unshift to a non array");t[g]=[].concat(l).concat(t[g])}}}else for(f in e)u(t[g],e[f],n.concat(f),t)};return u(t,e),{data:t.root,log:Object.keys(s).map(function(t){return t.split("|λ|").slice(1)})}}},{"./helpers.js":9,"./type.js":11}],13:[function(t,e,n){+function(t){"use strict";function e(e,r){return this.each(function(){var i=t(this),o=i.data("bs.modal"),s=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);o||i.data("bs.modal",o=new n(this,s)),"string"==typeof e?o[e](r):s.show&&o.show(r)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var r=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){r.$element.one("mouseup.dismiss.bs.modal",function(e){t(e.target).is(r.$element)&&(r.ignoreBackdropClick=!0)})}),this.backdrop(function(){var i=t.support.transition&&r.$element.hasClass("fade");r.$element.parent().length||r.$element.appendTo(r.$body),r.$element.show().scrollTop(0),r.adjustDialog(),i&&r.$element[0].offsetWidth,r.$element.addClass("in").attr("aria-hidden",!1),r.enforceFocus();var o=t.Event("shown.bs.modal",{relatedTarget:e});i?r.$dialog.one("bsTransitionEnd",function(){r.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):r.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?t(window).on("resize.bs.modal",t.proxy(this.handleUpdate,this)):t(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var r=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var s=function(){r.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",s).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):s()}else e&&e()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var r=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=r,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var r=t(this),i=r.attr("href"),o=t(r.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(i)&&i},o.data(),r.data());r.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){r.is(":visible")&&r.trigger("focus")})}),e.call(o,s,this)})}(jQuery)},{}],14:[function(t,e,n){},{}],15:[function(t,e,n){function r(t,e){var n=this;if(!(n instanceof r))return new r(t,e);var i,o=typeof t;if("number"===o)i=+t;else if("string"===o)i=r.byteLength(t,e);else{if("object"!==o||null===t)throw new TypeError("must start with number, buffer, array or string");"Buffer"===t.type&&L(t.data)&&(t=t.data),i=+t.length}if(i>M)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+M.toString(16)+" bytes");0>i?i=0:i>>>=0,r.TYPED_ARRAY_SUPPORT?n=r._augment(new Uint8Array(i)):(n.length=i,n._isBuffer=!0);var s;if(r.TYPED_ARRAY_SUPPORT&&"number"==typeof t.byteLength)n._set(t);else if(S(t))if(r.isBuffer(t))for(s=0;i>s;s++)n[s]=t.readUInt8(s);else for(s=0;i>s;s++)n[s]=(t[s]%256+256)%256;else if("string"===o)n.write(t,0,e);else if("number"===o&&!r.TYPED_ARRAY_SUPPORT)for(s=0;i>s;s++)n[s]=0;return i>0&&i<=r.poolSize&&(n.parent=B),n}function i(t,e){if(!(this instanceof i))return new i(t,e);var n=new r(t,e);return delete n.parent,n}function o(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var s=0;r>s;s++){var u=parseInt(e.substr(2*s,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[n+s]=u}return s}function s(t,e,n,r){var i=P(I(e,t.length-n),t,n,r);return i}function u(t,e,n,r){var i=P(j(e),t,n,r);return i}function a(t,e,n,r){return u(t,e,n,r)}function c(t,e,n,r){var i=P(N(e),t,n,r);return i}function f(t,e,n,r){var i=P(k(e,t.length-n),t,n,r);return i}function l(t,e,n){return R.fromByteArray(0===e&&n===t.length?t:t.slice(e,n))}function h(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;n>o;o++)t[o]<=127?(r+=C(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+C(i)}function p(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(127&t[i]);return r}function d(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;n>i;i++)r+=String.fromCharCode(t[i]);return r}function g(t,e,n){var r=t.length;(!e||0>e)&&(e=0),(!n||0>n||n>r)&&(n=r);for(var i="",o=e;n>o;o++)i+=O(t[o]);return i}function v(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function m(t,e,n){if(t%1!==0||0>t)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function y(t,e,n,i,o,s){if(!r.isBuffer(t))throw new TypeError("buffer must be a Buffer instance");if(e>o||s>e)throw new RangeError("value is out of bounds");if(n+i>t.length)throw new RangeError("index out of range")}function b(t,e,n,r){0>e&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);o>i;i++)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function w(t,e,n,r){0>e&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);o>i;i++)t[n+i]=e>>>8*(r?i:3-i)&255}function E(t,e,n,r,i,o){if(e>i||o>e)throw new RangeError("value is out of bounds");if(n+r>t.length)throw new RangeError("index out of range");if(0>n)throw new RangeError("index out of range")}function _(t,e,n,r,i){return i||E(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),D.write(t,e,n,r,23,4),n+4}function T(t,e,n,r,i){return i||E(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),D.write(t,e,n,r,52,8),n+8}function x(t){if(t=A(t).replace(F,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function A(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function S(t){return L(t)||r.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function O(t){return 16>t?"0"+t.toString(16):t.toString(16)}function I(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],s=0;r>s;s++){if(n=t.charCodeAt(s),n>55295&&57344>n){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(56320>n){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=i-55296<<10|n-56320|65536,i=null}else i&&((e-=3)>-1&&o.push(239,191,189),i=null);if(128>n){if((e-=1)<0)break;o.push(n)}else if(2048>n){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(65536>n){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(2097152>n))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function j(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function k(t,e){for(var n,r,i,o=[],s=0;s<t.length&&!((e-=2)<0);s++)n=t.charCodeAt(s),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function N(t){return R.toByteArray(x(t))}function P(t,e,n,r){for(var i=0;r>i&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function C(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}var R=t("base64-js"),D=t("ieee754"),L=t("is-array");n.Buffer=r,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,r.poolSize=8192;var M=1073741823,B={};r.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(n){return!1}}(),r.isBuffer=function(t){return!(null==t||!t._isBuffer)},r.compare=function(t,e){if(!r.isBuffer(t)||!r.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,o=0,s=Math.min(n,i);s>o&&t[o]===e[o];o++);return o!==s&&(n=t[o],i=e[o]),i>n?-1:n>i?1:0},r.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},r.concat=function(t,e){if(!L(t))throw new TypeError("list argument must be an Array of Buffers.");if(0===t.length)return new r(0);if(1===t.length)return t[0];var n;if(void 0===e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var i=new r(e),o=0;for(n=0;n<t.length;n++){var s=t[n];s.copy(i,o),o+=s.length}return i},r.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":n=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;case"hex":n=t.length>>>1;break;case"utf8":case"utf-8":n=I(t).length;break;case"base64":n=N(t).length;break;default:n=t.length}return n},r.prototype.length=void 0,r.prototype.parent=void 0,r.prototype.toString=function(t,e,n){var r=!1;if(e>>>=0,n=void 0===n||n===1/0?this.length:n>>>0,t||(t="utf8"),0>e&&(e=0),n>this.length&&(n=this.length),e>=n)return"";for(;;)switch(t){case"hex":return g(this,e,n);case"utf8":case"utf-8":return h(this,e,n);case"ascii":return p(this,e,n);case"binary":return d(this,e,n);case"base64":return l(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return v(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}},r.prototype.equals=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:0===r.compare(this,t)},r.prototype.inspect=function(){var t="",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,e).match(/.{2}/g).join(" "),this.length>e&&(t+=" ... ")),"<Buffer "+t+">"},r.prototype.compare=function(t){if(!r.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?0:r.compare(this,t)},r.prototype.indexOf=function(t,e){function n(t,e,n){for(var r=-1,i=0;n+i<t.length;i++)if(t[n+i]===e[-1===r?0:i-r]){if(-1===r&&(r=i),i-r+1===e.length)return n+r}else r=-1;return-1}if(e>2147483647?e=2147483647:-2147483648>e&&(e=-2147483648),e>>=0,0===this.length)return-1;if(e>=this.length)return-1;if(0>e&&(e=Math.max(this.length+e,0)),"string"==typeof t)return 0===t.length?-1:String.prototype.indexOf.call(this,t,e);if(r.isBuffer(t))return n(this,t,e);if("number"==typeof t)return r.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,t,e):n(this,[t],e);throw new TypeError("val must be string, number or Buffer")},r.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},r.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},r.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var i=r;r=e,e=n,n=i}if(e=Number(e)||0,0>n||0>e||e>this.length)throw new RangeError("attempt to write outside buffer bounds");var l=this.length-e;n?(n=Number(n),n>l&&(n=l)):n=l,r=String(r||"utf8").toLowerCase();var h;switch(r){case"hex":h=o(this,t,e,n);break;case"utf8":case"utf-8":h=s(this,t,e,n);break;case"ascii":h=u(this,t,e,n);break;case"binary":h=a(this,t,e,n);break;case"base64":h=c(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":h=f(this,t,e,n);break;default:throw new TypeError("Unknown encoding: "+r)}return h},r.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},r.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,0>t?(t+=n,0>t&&(t=0)):t>n&&(t=n),0>e?(e+=n,0>e&&(e=0)):e>n&&(e=n),t>e&&(e=t);var i;if(r.TYPED_ARRAY_SUPPORT)i=r._augment(this.subarray(t,e));else{var o=e-t;i=new r(o,void 0);for(var s=0;o>s;s++)i[s]=this[s+t]}return i.length&&(i.parent=this.parent||this),i},r.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||m(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},r.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||m(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},r.prototype.readUInt8=function(t,e){return e||m(t,1,this.length),this[t]},r.prototype.readUInt16LE=function(t,e){return e||m(t,2,this.length),this[t]|this[t+1]<<8},r.prototype.readUInt16BE=function(t,e){return e||m(t,2,this.length),this[t]<<8|this[t+1]},r.prototype.readUInt32LE=function(t,e){return e||m(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},r.prototype.readUInt32BE=function(t,e){return e||m(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},r.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||m(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},r.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||m(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},r.prototype.readInt8=function(t,e){return e||m(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},r.prototype.readInt16LE=function(t,e){e||m(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt16BE=function(t,e){e||m(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},r.prototype.readInt32LE=function(t,e){return e||m(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},r.prototype.readInt32BE=function(t,e){return e||m(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},r.prototype.readFloatLE=function(t,e){return e||m(t,4,this.length),D.read(this,t,!0,23,4)},r.prototype.readFloatBE=function(t,e){return e||m(t,4,this.length),D.read(this,t,!1,23,4)},r.prototype.readDoubleLE=function(t,e){return e||m(t,8,this.length),D.read(this,t,!0,52,8)},r.prototype.readDoubleBE=function(t,e){return e||m(t,8,this.length),D.read(this,t,!1,52,8)},r.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||y(this,t,e,n,Math.pow(2,8*n),0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i>>>0&255;return e+n},r.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||y(this,t,e,n,Math.pow(2,8*n),0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o>>>0&255;return e+n},r.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,1,255,0),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=t,e+1},r.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):b(this,t,e,!0),e+2},r.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,2,65535,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):b(this,t,e,!1),e+2},r.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=t):w(this,t,e,!0),e+4},r.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,4,4294967295,0),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):w(this,t,e,!1),e+4},r.prototype.writeIntLE=function(t,e,n,r){t=+t,e>>>=0,r||y(this,t,e,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var i=0,o=1,s=0>t?1:0;for(this[e]=255&t;++i<n&&(o*=256);)this[e+i]=(t/o>>0)-s&255;return e+n},r.prototype.writeIntBE=function(t,e,n,r){t=+t,e>>>=0,r||y(this,t,e,n,Math.pow(2,8*n-1)-1,-Math.pow(2,8*n-1));var i=n-1,o=1,s=0>t?1:0;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=(t/o>>0)-s&255;return e+n},r.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,1,127,-128),r.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),0>t&&(t=255+t+1),this[e]=t,e+1},r.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8):b(this,t,e,!0),e+2},r.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,2,32767,-32768),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=t):b(this,t,e,!1),e+2},r.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,4,2147483647,-2147483648),r.TYPED_ARRAY_SUPPORT?(this[e]=t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):w(this,t,e,!0),e+4},r.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||y(this,t,e,4,2147483647,-2147483648),0>t&&(t=4294967295+t+1),r.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=t):w(this,t,e,!1),e+4},r.prototype.writeFloatLE=function(t,e,n){return _(this,t,e,!0,n)},r.prototype.writeFloatBE=function(t,e,n){return _(this,t,e,!1,n)},r.prototype.writeDoubleLE=function(t,e,n){return T(this,t,e,!0,n)},r.prototype.writeDoubleBE=function(t,e,n){return T(this,t,e,!1,n)},r.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&n>i&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(0>e)throw new RangeError("targetStart out of bounds");if(0>n||n>=this.length)throw new RangeError("sourceStart out of bounds");if(0>i)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var o=i-n;if(1e3>o||!r.TYPED_ARRAY_SUPPORT)for(var s=0;o>s;s++)t[s+e]=this[s+n];else t._set(this.subarray(n,n+o),e);return o},r.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),e>n)throw new RangeError("end < start");if(n!==e&&0!==this.length){if(0>e||e>=this.length)throw new RangeError("start out of bounds");if(0>n||n>this.length)throw new RangeError("end out of bounds");var r;if("number"==typeof t)for(r=e;n>r;r++)this[r]=t;else{var i=I(t.toString()),o=i.length;for(r=e;n>r;r++)this[r]=i[r%o]}return this}},r.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(r.TYPED_ARRAY_SUPPORT)return new r(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;n>e;e+=1)t[e]=this[e];return t.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var U=r.prototype;r._augment=function(t){return t.constructor=r,t._isBuffer=!0,t._set=t.set,t.get=U.get,t.set=U.set,t.write=U.write,t.toString=U.toString,t.toLocaleString=U.toString,t.toJSON=U.toJSON,t.equals=U.equals,t.compare=U.compare,t.indexOf=U.indexOf,t.copy=U.copy,t.slice=U.slice,t.readUIntLE=U.readUIntLE,t.readUIntBE=U.readUIntBE,t.readUInt8=U.readUInt8,t.readUInt16LE=U.readUInt16LE,t.readUInt16BE=U.readUInt16BE,t.readUInt32LE=U.readUInt32LE,t.readUInt32BE=U.readUInt32BE,t.readIntLE=U.readIntLE,t.readIntBE=U.readIntBE,t.readInt8=U.readInt8,t.readInt16LE=U.readInt16LE,t.readInt16BE=U.readInt16BE,t.readInt32LE=U.readInt32LE,t.readInt32BE=U.readInt32BE,t.readFloatLE=U.readFloatLE,t.readFloatBE=U.readFloatBE,t.readDoubleLE=U.readDoubleLE,t.readDoubleBE=U.readDoubleBE,t.writeUInt8=U.writeUInt8,t.writeUIntLE=U.writeUIntLE,t.writeUIntBE=U.writeUIntBE,t.writeUInt16LE=U.writeUInt16LE,t.writeUInt16BE=U.writeUInt16BE,t.writeUInt32LE=U.writeUInt32LE,t.writeUInt32BE=U.writeUInt32BE,t.writeIntLE=U.writeIntLE,t.writeIntBE=U.writeIntBE,t.writeInt8=U.writeInt8,t.writeInt16LE=U.writeInt16LE,t.writeInt16BE=U.writeInt16BE,t.writeInt32LE=U.writeInt32LE,t.writeInt32BE=U.writeInt32BE,t.writeFloatLE=U.writeFloatLE,t.writeFloatBE=U.writeFloatBE,t.writeDoubleLE=U.writeDoubleLE,t.writeDoubleBE=U.writeDoubleBE,t.fill=U.fill,t.inspect=U.inspect,t.toArrayBuffer=U.toArrayBuffer,t};var F=/[^+\/0-9A-z\-]/g},{"base64-js":16,ieee754:17,"is-array":18}],16:[function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===s||e===l?62:e===u||e===h?63:a>e?-1:a+10>e?e-a+26+26:f+26>e?e-f:c+26>e?e-c+26:void 0}function n(t){function n(t){c[l++]=t}var r,i,s,u,a,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;a="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,c=new o(3*t.length/4-a),s=a>0?t.length-4:t.length;var l=0;for(r=0,i=0;s>r;r+=4,i+=3)u=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&u)>>16),n((65280&u)>>8),n(255&u);return 2===a?(u=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&u)):1===a&&(u=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(u>>8&255),n(255&u)),c}function i(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,s,u=t.length%3,a="";for(i=0,s=t.length-u;s>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],a+=n(o);switch(u){case 1:o=t[t.length-1],a+=e(o>>2),a+=e(o<<4&63),a+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],a+=e(o>>10),a+=e(o>>4&63),a+=e(o<<2&63),a+="="}return a}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="+".charCodeAt(0),u="/".charCodeAt(0),a="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0),l="-".charCodeAt(0),h="_".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}("undefined"==typeof n?this.base64js={}:n)},{}],17:[function(t,e,n){n.read=function(t,e,n,r,i){var o,s,u=8*i-r-1,a=(1<<u)-1,c=a>>1,f=-7,l=n?i-1:0,h=n?-1:1,p=t[e+l];for(l+=h,o=p&(1<<-f)-1,p>>=-f,f+=u;f>0;o=256*o+t[e+l],l+=h,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=r;f>0;s=256*s+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===a)return s?0/0:(p?-1:1)*(1/0);s+=Math.pow(2,r),o-=c}return(p?-1:1)*s*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var s,u,a,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),e+=s+l>=1?h/a:h*Math.pow(2,1-l),e*a>=2&&(s++,a/=2),s+l>=f?(u=0,s=f):s+l>=1?(u=(e*a-1)*Math.pow(2,i),s+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,i),s=0));i>=8;t[n+p]=255&u,p+=d,u/=256,i-=8);for(s=s<<i|u,c+=i;c>0;t[n+p]=255&s,p+=d,s/=256,c-=8);t[n+p-d]|=128*g}},{}],18:[function(t,e,n){var r=Array.isArray,i=Object.prototype.toString;e.exports=r||function(t){return!!t&&"[object Array]"==i.call(t)}},{}],19:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function o(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function u(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,a,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],u(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,o=new Array(r-1),a=1;r>a;a++)o[a-1]=arguments[a];n.apply(this,o)}else if(s(n)){for(r=arguments.length,o=new Array(r-1),a=1;r>a;a++)o[a-1]=arguments[a];for(c=n.slice(),r=c.length,a=0;r>a;a++)c[a].apply(this,o)}return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned){var n;n=u(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,u;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(u=o;u-->0;)if(n[u]===e||n[u].listener&&n[u].listener===e){r=u;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.listenerCount=function(t,e){var n;return n=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}],20:[function(t,e,n){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},{}],21:[function(t,e,n){e.exports=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)}},{}],22:[function(t,e,n){function r(){if(!u){u=!0;for(var t,e=s.length;e;){t=s,s=[];for(var n=-1;++n<e;)t[n]();e=s.length}u=!1}}function i(){}var o=e.exports={},s=[],u=!1;o.nextTick=function(t){s.push(t),u||setTimeout(r,0)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=i,o.addListener=i,o.once=i,o.off=i,o.removeListener=i,o.removeAllListeners=i,o.emit=i,o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],23:[function(t,e,n){e.exports=t("./lib/_stream_duplex.js")},{"./lib/_stream_duplex.js":24}],24:[function(t,e,n){(function(n){function r(t){return this instanceof r?(a.call(this,t),c.call(this,t),t&&t.readable===!1&&(this.readable=!1),t&&t.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,t&&t.allowHalfOpen===!1&&(this.allowHalfOpen=!1),void this.once("end",i)):new r(t)}function i(){this.allowHalfOpen||this._writableState.ended||n.nextTick(this.end.bind(this))}function o(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}e.exports=r;var s=Object.keys||function(t){var e=[];for(var n in t)e.push(n);return e},u=t("core-util-is");u.inherits=t("inherits");var a=t("./_stream_readable"),c=t("./_stream_writable");u.inherits(r,a),o(s(c.prototype),function(t){r.prototype[t]||(r.prototype[t]=c.prototype[t])})}).call(this,t("_process"))},{"./_stream_readable":26,"./_stream_writable":28,_process:22,"core-util-is":29,inherits:20}],25:[function(t,e,n){function r(t){return this instanceof r?void i.call(this,t):new r(t)}e.exports=r;var i=t("./_stream_transform"),o=t("core-util-is");o.inherits=t("inherits"),o.inherits(r,i),r.prototype._transform=function(t,e,n){n(null,t)}},{"./_stream_transform":27,"core-util-is":29,inherits:20}],26:[function(t,e,n){(function(n){function r(e,n){var r=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.highWaterMark=~~this.highWaterMark,this.buffer=[],this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.objectMode=!!e.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!e.readableObjectMode),
this.defaultEncoding=e.defaultEncoding||"utf8",this.ranOut=!1,this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(I||(I=t("string_decoder/").StringDecoder),this.decoder=new I(e.encoding),this.encoding=e.encoding)}function i(e){t("./_stream_duplex");return this instanceof i?(this._readableState=new r(e,this),this.readable=!0,void S.call(this)):new i(e)}function o(t,e,n,r,i){var o=c(e,n);if(o)t.emit("error",o);else if(O.isNullOrUndefined(n))e.reading=!1,e.ended||f(t,e);else if(e.objectMode||n&&n.length>0)if(e.ended&&!i){var u=new Error("stream.push() after EOF");t.emit("error",u)}else if(e.endEmitted&&i){var u=new Error("stream.unshift() after end event");t.emit("error",u)}else!e.decoder||i||r||(n=e.decoder.write(n)),i||(e.reading=!1),e.flowing&&0===e.length&&!e.sync?(t.emit("data",n),t.read(0)):(e.length+=e.objectMode?1:n.length,i?e.buffer.unshift(n):e.buffer.push(n),e.needReadable&&l(t)),p(t,e);else i||(e.reading=!1);return s(e)}function s(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}function u(t){if(t>=k)t=k;else{t--;for(var e=1;32>e;e<<=1)t|=t>>e;t++}return t}function a(t,e){return 0===e.length&&e.ended?0:e.objectMode?0===t?0:1:isNaN(t)||O.isNull(t)?e.flowing&&e.buffer.length?e.buffer[0].length:e.length:0>=t?0:(t>e.highWaterMark&&(e.highWaterMark=u(t)),t>e.length?e.ended?e.length:(e.needReadable=!0,0):t)}function c(t,e){var n=null;return O.isBuffer(e)||O.isString(e)||O.isNullOrUndefined(e)||t.objectMode||(n=new TypeError("Invalid non-string/buffer chunk")),n}function f(t,e){if(e.decoder&&!e.ended){var n=e.decoder.end();n&&n.length&&(e.buffer.push(n),e.length+=e.objectMode?1:n.length)}e.ended=!0,l(t)}function l(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(j("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n.nextTick(function(){h(t)}):h(t))}function h(t){j("emit readable"),t.emit("readable"),y(t)}function p(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(function(){d(t,e)}))}function d(t,e){for(var n=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(j("maybeReadMore read 0"),t.read(0),n!==e.length);)n=e.length;e.readingMore=!1}function g(t){return function(){var e=t._readableState;j("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&A.listenerCount(t,"data")&&(e.flowing=!0,y(t))}}function v(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(function(){m(t,e)}))}function m(t,e){e.resumeScheduled=!1,t.emit("resume"),y(t),e.flowing&&!e.reading&&t.read(0)}function y(t){var e=t._readableState;if(j("flow",e.flowing),e.flowing)do var n=t.read();while(null!==n&&e.flowing)}function b(t,e){var n,r=e.buffer,i=e.length,o=!!e.decoder,s=!!e.objectMode;if(0===r.length)return null;if(0===i)n=null;else if(s)n=r.shift();else if(!t||t>=i)n=o?r.join(""):x.concat(r,i),r.length=0;else if(t<r[0].length){var u=r[0];n=u.slice(0,t),r[0]=u.slice(t)}else if(t===r[0].length)n=r.shift();else{n=o?"":new x(t);for(var a=0,c=0,f=r.length;f>c&&t>a;c++){var u=r[0],l=Math.min(t-a,u.length);o?n+=u.slice(0,l):u.copy(n,a,0,l),l<u.length?r[0]=u.slice(l):r.shift(),a+=l}}return n}function w(t){var e=t._readableState;if(e.length>0)throw new Error("endReadable called on non-empty stream");e.endEmitted||(e.ended=!0,n.nextTick(function(){e.endEmitted||0!==e.length||(e.endEmitted=!0,t.readable=!1,t.emit("end"))}))}function E(t,e){for(var n=0,r=t.length;r>n;n++)e(t[n],n)}function _(t,e){for(var n=0,r=t.length;r>n;n++)if(t[n]===e)return n;return-1}e.exports=i;var T=t("isarray"),x=t("buffer").Buffer;i.ReadableState=r;var A=t("events").EventEmitter;A.listenerCount||(A.listenerCount=function(t,e){return t.listeners(e).length});var S=t("stream"),O=t("core-util-is");O.inherits=t("inherits");var I,j=t("util");j=j&&j.debuglog?j.debuglog("stream"):function(){},O.inherits(i,S),i.prototype.push=function(t,e){var n=this._readableState;return O.isString(t)&&!n.objectMode&&(e=e||n.defaultEncoding,e!==n.encoding&&(t=new x(t,e),e="")),o(this,n,t,e,!1)},i.prototype.unshift=function(t){var e=this._readableState;return o(this,e,t,"",!0)},i.prototype.setEncoding=function(e){return I||(I=t("string_decoder/").StringDecoder),this._readableState.decoder=new I(e),this._readableState.encoding=e,this};var k=8388608;i.prototype.read=function(t){j("read",t);var e=this._readableState,n=t;if((!O.isNumber(t)||t>0)&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return j("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?w(this):l(this),null;if(t=a(t,e),0===t&&e.ended)return 0===e.length&&w(this),null;var r=e.needReadable;j("need readable",r),(0===e.length||e.length-t<e.highWaterMark)&&(r=!0,j("length less than watermark",r)),(e.ended||e.reading)&&(r=!1,j("reading or ended",r)),r&&(j("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1),r&&!e.reading&&(t=a(n,e));var i;return i=t>0?b(t,e):null,O.isNull(i)&&(e.needReadable=!0,t=0),e.length-=t,0!==e.length||e.ended||(e.needReadable=!0),n!==t&&e.ended&&0===e.length&&w(this),O.isNull(i)||this.emit("data",i),i},i.prototype._read=function(t){this.emit("error",new Error("not implemented"))},i.prototype.pipe=function(t,e){function r(t){j("onunpipe"),t===l&&o()}function i(){j("onend"),t.end()}function o(){j("cleanup"),t.removeListener("close",a),t.removeListener("finish",c),t.removeListener("drain",v),t.removeListener("error",u),t.removeListener("unpipe",r),l.removeListener("end",i),l.removeListener("end",o),l.removeListener("data",s),!h.awaitDrain||t._writableState&&!t._writableState.needDrain||v()}function s(e){j("ondata");var n=t.write(e);!1===n&&(j("false write response, pause",l._readableState.awaitDrain),l._readableState.awaitDrain++,l.pause())}function u(e){j("onerror",e),f(),t.removeListener("error",u),0===A.listenerCount(t,"error")&&t.emit("error",e)}function a(){t.removeListener("finish",c),f()}function c(){j("onfinish"),t.removeListener("close",a),f()}function f(){j("unpipe"),l.unpipe(t)}var l=this,h=this._readableState;switch(h.pipesCount){case 0:h.pipes=t;break;case 1:h.pipes=[h.pipes,t];break;default:h.pipes.push(t)}h.pipesCount+=1,j("pipe count=%d opts=%j",h.pipesCount,e);var p=(!e||e.end!==!1)&&t!==n.stdout&&t!==n.stderr,d=p?i:o;h.endEmitted?n.nextTick(d):l.once("end",d),t.on("unpipe",r);var v=g(l);return t.on("drain",v),l.on("data",s),t._events&&t._events.error?T(t._events.error)?t._events.error.unshift(u):t._events.error=[u,t._events.error]:t.on("error",u),t.once("close",a),t.once("finish",c),t.emit("pipe",l),h.flowing||(j("pipe resume"),l.resume()),t},i.prototype.unpipe=function(t){var e=this._readableState;if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this),this);if(!t){var n=e.pipes,r=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var i=0;r>i;i++)n[i].emit("unpipe",this);return this}var i=_(e.pipes,t);return-1===i?this:(e.pipes.splice(i,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this),this)},i.prototype.on=function(t,e){var r=S.prototype.on.call(this,t,e);if("data"===t&&!1!==this._readableState.flowing&&this.resume(),"readable"===t&&this.readable){var i=this._readableState;if(!i.readableListening)if(i.readableListening=!0,i.emittedReadable=!1,i.needReadable=!0,i.reading)i.length&&l(this,i);else{var o=this;n.nextTick(function(){j("readable nexttick read 0"),o.read(0)})}}return r},i.prototype.addListener=i.prototype.on,i.prototype.resume=function(){var t=this._readableState;return t.flowing||(j("resume"),t.flowing=!0,t.reading||(j("resume read 0"),this.read(0)),v(this,t)),this},i.prototype.pause=function(){return j("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(j("pause"),this._readableState.flowing=!1,this.emit("pause")),this},i.prototype.wrap=function(t){var e=this._readableState,n=!1,r=this;t.on("end",function(){if(j("wrapped end"),e.decoder&&!e.ended){var t=e.decoder.end();t&&t.length&&r.push(t)}r.push(null)}),t.on("data",function(i){if(j("wrapped data"),e.decoder&&(i=e.decoder.write(i)),i&&(e.objectMode||i.length)){var o=r.push(i);o||(n=!0,t.pause())}});for(var i in t)O.isFunction(t[i])&&O.isUndefined(this[i])&&(this[i]=function(e){return function(){return t[e].apply(t,arguments)}}(i));var o=["error","close","destroy","pause","resume"];return E(o,function(e){t.on(e,r.emit.bind(r,e))}),r._read=function(e){j("wrapped _read",e),n&&(n=!1,t.resume())},r},i._fromList=b}).call(this,t("_process"))},{"./_stream_duplex":24,_process:22,buffer:15,"core-util-is":29,events:19,inherits:20,isarray:21,stream:34,"string_decoder/":35,util:14}],27:[function(t,e,n){function r(t,e){this.afterTransform=function(t,n){return i(e,t,n)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null}function i(t,e,n){var r=t._transformState;r.transforming=!1;var i=r.writecb;if(!i)return t.emit("error",new Error("no writecb in Transform class"));r.writechunk=null,r.writecb=null,a.isNullOrUndefined(n)||t.push(n),i&&i(e);var o=t._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&t._read(o.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);u.call(this,t),this._transformState=new r(t,this);var e=this;this._readableState.needReadable=!0,this._readableState.sync=!1,this.once("prefinish",function(){a.isFunction(this._flush)?this._flush(function(t){s(e,t)}):s(e)})}function s(t,e){if(e)return t.emit("error",e);var n=t._writableState,r=t._transformState;if(n.length)throw new Error("calling transform done when ws.length != 0");if(r.transforming)throw new Error("calling transform done when still transforming");return t.push(null)}e.exports=o;var u=t("./_stream_duplex"),a=t("core-util-is");a.inherits=t("inherits"),a.inherits(o,u),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,u.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,n){throw new Error("not implemented")},o.prototype._write=function(t,e,n){var r=this._transformState;if(r.writecb=n,r.writechunk=t,r.writeencoding=e,!r.transforming){var i=this._readableState;(r.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;a.isNull(e.writechunk)||!e.writecb||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))}},{"./_stream_duplex":24,"core-util-is":29,inherits:20}],28:[function(t,e,n){(function(n){function r(t,e,n){this.chunk=t,this.encoding=e,this.callback=n}function i(e,n){var r=t("./_stream_duplex");e=e||{};var i=e.highWaterMark,o=e.objectMode?16:16384;this.highWaterMark=i||0===i?i:o,this.objectMode=!!e.objectMode,n instanceof r&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=~~this.highWaterMark,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){p(n,t)},this.writecb=null,this.writelen=0,this.buffer=[],this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1}function o(e){var n=t("./_stream_duplex");return this instanceof o||this instanceof n?(this._writableState=new i(e,this),this.writable=!0,void T.call(this)):new o(e)}function s(t,e,r){var i=new Error("write after end");t.emit("error",i),n.nextTick(function(){r(i)})}function u(t,e,r,i){var o=!0;if(!(_.isBuffer(r)||_.isString(r)||_.isNullOrUndefined(r)||e.objectMode)){var s=new TypeError("Invalid non-string/buffer chunk");t.emit("error",s),n.nextTick(function(){i(s)}),o=!1}return o}function a(t,e,n){return!t.objectMode&&t.decodeStrings!==!1&&_.isString(e)&&(e=new E(e,n)),e}function c(t,e,n,i,o){n=a(e,n,i),_.isBuffer(n)&&(i="buffer");var s=e.objectMode?1:n.length;e.length+=s;var u=e.length<e.highWaterMark;return u||(e.needDrain=!0),e.writing||e.corked?e.buffer.push(new r(n,i,o)):f(t,e,!1,s,n,i,o),u}function f(t,e,n,r,i,o,s){e.writelen=r,e.writecb=s,e.writing=!0,e.sync=!0,n?t._writev(i,e.onwrite):t._write(i,o,e.onwrite),e.sync=!1}function l(t,e,r,i,o){r?n.nextTick(function(){e.pendingcb--,o(i)}):(e.pendingcb--,o(i)),t._writableState.errorEmitted=!0,t.emit("error",i)}function h(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function p(t,e){var r=t._writableState,i=r.sync,o=r.writecb;if(h(r),e)l(t,r,i,e,o);else{var s=m(t,r);s||r.corked||r.bufferProcessing||!r.buffer.length||v(t,r),i?n.nextTick(function(){d(t,r,s,o)}):d(t,r,s,o)}}function d(t,e,n,r){n||g(t,e),e.pendingcb--,r(),b(t,e)}function g(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function v(t,e){if(e.bufferProcessing=!0,t._writev&&e.buffer.length>1){for(var n=[],r=0;r<e.buffer.length;r++)n.push(e.buffer[r].callback);e.pendingcb++,f(t,e,!0,e.length,e.buffer,"",function(t){for(var r=0;r<n.length;r++)e.pendingcb--,n[r](t)}),e.buffer=[]}else{for(var r=0;r<e.buffer.length;r++){var i=e.buffer[r],o=i.chunk,s=i.encoding,u=i.callback,a=e.objectMode?1:o.length;if(f(t,e,!1,a,o,s,u),e.writing){r++;break}}r<e.buffer.length?e.buffer=e.buffer.slice(r):e.buffer.length=0}e.bufferProcessing=!1}function m(t,e){return e.ending&&0===e.length&&!e.finished&&!e.writing}function y(t,e){e.prefinished||(e.prefinished=!0,t.emit("prefinish"))}function b(t,e){var n=m(t,e);return n&&(0===e.pendingcb?(y(t,e),e.finished=!0,t.emit("finish")):y(t,e)),n}function w(t,e,r){e.ending=!0,b(t,e),r&&(e.finished?n.nextTick(r):t.once("finish",r)),e.ended=!0}e.exports=o;var E=t("buffer").Buffer;o.WritableState=i;var _=t("core-util-is");_.inherits=t("inherits");var T=t("stream");_.inherits(o,T),o.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe. Not readable."))},o.prototype.write=function(t,e,n){var r=this._writableState,i=!1;return _.isFunction(e)&&(n=e,e=null),_.isBuffer(t)?e="buffer":e||(e=r.defaultEncoding),_.isFunction(n)||(n=function(){}),r.ended?s(this,r,n):u(this,r,t,n)&&(r.pendingcb++,i=c(this,r,t,e,n)),i},o.prototype.cork=function(){var t=this._writableState;t.corked++},o.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.finished||t.bufferProcessing||!t.buffer.length||v(this,t))},o.prototype._write=function(t,e,n){n(new Error("not implemented"))},o.prototype._writev=null,o.prototype.end=function(t,e,n){var r=this._writableState;_.isFunction(t)?(n=t,t=null,e=null):_.isFunction(e)&&(n=e,e=null),_.isNullOrUndefined(t)||this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||r.finished||w(this,r,n)}}).call(this,t("_process"))},{"./_stream_duplex":24,_process:22,buffer:15,"core-util-is":29,inherits:20,stream:34}],29:[function(t,e,n){(function(t){function e(t){return Array.isArray(t)}function r(t){return"boolean"==typeof t}function i(t){return null===t}function o(t){return null==t}function s(t){return"number"==typeof t}function u(t){return"string"==typeof t}function a(t){return"symbol"==typeof t}function c(t){return void 0===t}function f(t){return l(t)&&"[object RegExp]"===m(t)}function l(t){return"object"==typeof t&&null!==t}function h(t){return l(t)&&"[object Date]"===m(t)}function p(t){return l(t)&&("[object Error]"===m(t)||t instanceof Error)}function d(t){return"function"==typeof t}function g(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function v(e){return t.isBuffer(e)}function m(t){return Object.prototype.toString.call(t)}n.isArray=e,n.isBoolean=r,n.isNull=i,n.isNullOrUndefined=o,n.isNumber=s,n.isString=u,n.isSymbol=a,n.isUndefined=c,n.isRegExp=f,n.isObject=l,n.isDate=h,n.isError=p,n.isFunction=d,n.isPrimitive=g,n.isBuffer=v}).call(this,t("buffer").Buffer)},{buffer:15}],30:[function(t,e,n){e.exports=t("./lib/_stream_passthrough.js")},{"./lib/_stream_passthrough.js":25}],31:[function(t,e,n){n=e.exports=t("./lib/_stream_readable.js"),n.Stream=t("stream"),n.Readable=n,n.Writable=t("./lib/_stream_writable.js"),n.Duplex=t("./lib/_stream_duplex.js"),n.Transform=t("./lib/_stream_transform.js"),n.PassThrough=t("./lib/_stream_passthrough.js")},{"./lib/_stream_duplex.js":24,"./lib/_stream_passthrough.js":25,"./lib/_stream_readable.js":26,"./lib/_stream_transform.js":27,"./lib/_stream_writable.js":28,stream:34}],32:[function(t,e,n){e.exports=t("./lib/_stream_transform.js")},{"./lib/_stream_transform.js":27}],33:[function(t,e,n){e.exports=t("./lib/_stream_writable.js")},{"./lib/_stream_writable.js":28}],34:[function(t,e,n){function r(){i.call(this)}e.exports=r;var i=t("events").EventEmitter,o=t("inherits");o(r,i),r.Readable=t("readable-stream/readable.js"),r.Writable=t("readable-stream/writable.js"),r.Duplex=t("readable-stream/duplex.js"),r.Transform=t("readable-stream/transform.js"),r.PassThrough=t("readable-stream/passthrough.js"),r.Stream=r,r.prototype.pipe=function(t,e){function n(e){t.writable&&!1===t.write(e)&&c.pause&&c.pause()}function r(){c.readable&&c.resume&&c.resume()}function o(){f||(f=!0,t.end())}function s(){f||(f=!0,"function"==typeof t.destroy&&t.destroy())}function u(t){if(a(),0===i.listenerCount(this,"error"))throw t}function a(){c.removeListener("data",n),t.removeListener("drain",r),c.removeListener("end",o),c.removeListener("close",s),c.removeListener("error",u),t.removeListener("error",u),c.removeListener("end",a),c.removeListener("close",a),t.removeListener("close",a)}var c=this;c.on("data",n),t.on("drain",r),t._isStdio||e&&e.end===!1||(c.on("end",o),c.on("close",s));var f=!1;return c.on("error",u),t.on("error",u),c.on("end",a),c.on("close",a),t.on("close",a),t.emit("pipe",c),t}},{events:19,inherits:20,"readable-stream/duplex.js":23,"readable-stream/passthrough.js":30,"readable-stream/readable.js":31,"readable-stream/transform.js":32,"readable-stream/writable.js":33}],35:[function(t,e,n){function r(t){if(t&&!a(t))throw new Error("Unknown encoding: "+t)}function i(t){return t.toString(this.encoding)}function o(t){this.charReceived=t.length%2,this.charLength=this.charReceived?2:0}function s(t){this.charReceived=t.length%3,this.charLength=this.charReceived?3:0}var u=t("buffer").Buffer,a=u.isEncoding||function(t){switch(t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}},c=n.StringDecoder=function(t){switch(this.encoding=(t||"utf8").toLowerCase().replace(/[-_]/,""),r(t),this.encoding){case"utf8":this.surrogateSize=3;break;case"ucs2":case"utf16le":this.surrogateSize=2,this.detectIncompleteChar=o;break;case"base64":this.surrogateSize=3,this.detectIncompleteChar=s;break;default:return void(this.write=i)}this.charBuffer=new u(6),this.charReceived=0,this.charLength=0};c.prototype.write=function(t){for(var e="";this.charLength;){var n=t.length>=this.charLength-this.charReceived?this.charLength-this.charReceived:t.length;if(t.copy(this.charBuffer,this.charReceived,0,n),this.charReceived+=n,this.charReceived<this.charLength)return"";t=t.slice(n,t.length),e=this.charBuffer.slice(0,this.charLength).toString(this.encoding);var r=e.charCodeAt(e.length-1);if(!(r>=55296&&56319>=r)){if(this.charReceived=this.charLength=0,0===t.length)return e;break}this.charLength+=this.surrogateSize,e=""}this.detectIncompleteChar(t);var i=t.length;this.charLength&&(t.copy(this.charBuffer,0,t.length-this.charReceived,i),i-=this.charReceived),e+=t.toString(this.encoding,0,i);var i=e.length-1,r=e.charCodeAt(i);if(r>=55296&&56319>=r){var o=this.surrogateSize;return this.charLength+=o,this.charReceived+=o,this.charBuffer.copy(this.charBuffer,o,0,o),t.copy(this.charBuffer,0,0,o),e.substring(0,i)}return e},c.prototype.detectIncompleteChar=function(t){for(var e=t.length>=3?3:t.length;e>0;e--){var n=t[t.length-e];if(1==e&&n>>5==6){this.charLength=2;break}if(2>=e&&n>>4==14){this.charLength=3;break}if(3>=e&&n>>3==30){this.charLength=4;break}}this.charReceived=e},c.prototype.end=function(t){var e="";if(t&&t.length&&(e=this.write(t)),this.charReceived){var n=this.charReceived,r=this.charBuffer,i=this.encoding;e+=r.slice(0,n).toString(i)}return e}},{buffer:15}],36:[function(t,e,n){var r=r||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,o=function(n){var r=e.createEvent("MouseEvents");r.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)},s=t.webkitRequestFileSystem,u=t.requestFileSystem||s||t.mozRequestFileSystem,a=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c="application/octet-stream",f=0,l=500,h=function(e){var r=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};t.chrome?r():setTimeout(r,l)},p=function(t,e,n){e=[].concat(e);for(var r=e.length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(o){a(o)}}},d=function(e,a){var l,d,g,v=this,m=e.type,y=!1,b=function(){p(v,"writestart progress write writeend".split(" "))},w=function(){if((y||!l)&&(l=n().createObjectURL(e)),d)d.location.href=l;else{var r=t.open(l,"_blank");void 0==r&&"undefined"!=typeof safari&&(t.location.href=l)}v.readyState=v.DONE,b(),h(l)},E=function(t){return function(){return v.readyState!==v.DONE?t.apply(this,arguments):void 0}},_={create:!0,exclusive:!1};return v.readyState=v.INIT,a||(a="download"),i?(l=n().createObjectURL(e),r.href=l,r.download=a,o(r),v.readyState=v.DONE,b(),void h(l)):(t.chrome&&m&&m!==c&&(g=e.slice||e.webkitSlice,e=g.call(e,0,e.size,c),y=!0),s&&"download"!==a&&(a+=".download"),(m===c||s)&&(d=t),u?(f+=e.size,void u(t.TEMPORARY,f,E(function(t){t.root.getDirectory("saved",_,E(function(t){var n=function(){t.getFile(a,_,E(function(t){t.createWriter(E(function(n){n.onwriteend=function(e){d.location.href=t.toURL(),v.readyState=v.DONE,p(v,"writeend",e),h(t)},n.onerror=function(){var t=n.error;t.code!==t.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach(function(t){n["on"+t]=v["on"+t]}),n.write(e),v.abort=function(){n.abort(),v.readyState=v.DONE},v.readyState=v.WRITING}),w)}),w)};t.getFile(a,{create:!1},E(function(t){t.remove(),n()}),E(function(t){t.code===t.NOT_FOUND_ERR?n():w()}))}),w)}),w)):void w())},g=d.prototype,v=function(t,e){return new d(t,e)};return g.abort=function(){var t=this;t.readyState=t.DONE,p(t,"abort")},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,v}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof e&&e.exports?e.exports=r:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return r})},{}],37:[function(t,e,n){(function(){"use strict";var t={ramda:"placeholder"},r=function(t,e){return t+e},i=function(t,e){for(var n=-1;++n<e.length;)if(!t(e[n]))return!1;return!0},o=function(t,e){for(var n=-1;++n<e.length;)if(t(e[n]))return!0;return!1},s=function(t,e,n){var r={};for(var i in n)r[i]=n[i];return r[t]=e,r},u=function(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))},a=function(t){return function(){return!t.apply(this,arguments)}},c=function(t,e){return function(){return t.call(this,e.apply(this,arguments))}},f=function(t,e){t=t||[],e=e||[];var n,r=t.length,i=e.length,o=[];for(n=-1;++n<r;)o[o.length]=t[n];for(n=-1;++n<i;)o[o.length]=e[n];return o},l=function(t,e,n){for(var r=-1,i=n.length;++r<i;)if(t(e,n[r]))return!0;return!1},h=function(t,e){var n={};return n[t]=e,n},p=function(t){return function(e,n){if(n&&n.length>0){for(var r,i=0,o=n[i],s=e(o);++i<n.length;)r=e(n[i]),t(r,s)&&(s=r,o=n[i]);return o}}},d=function(e){return function n(r){return 0===arguments.length?n:r===t?n:e(r)}},g=function(e){return function n(r,i){var o=arguments.length;return 0===o?n:1===o&&r===t?n:1===o?d(function(t){return e(r,t)}):2===o&&r===t&&i===t?n:2===o&&r===t?d(function(t){return e(t,i)}):2===o&&i===t?d(function(t){return e(r,t)}):e(r,i)}},v=function(e){return function n(r,i,o){var s=arguments.length;return 0===s?n:1===s&&r===t?n:1===s?g(function(t,n){return e(r,t,n)}):2===s&&r===t&&i===t?n:2===s&&r===t?g(function(t,n){return e(t,i,n)}):2===s&&i===t?g(function(t,n){return e(r,t,n)}):2===s?d(function(t){return e(r,i,t)}):3===s&&r===t&&i===t&&o===t?n:3===s&&r===t&&i===t?g(function(t,n){return e(t,n,o)}):3===s&&r===t&&o===t?g(function(t,n){return e(t,i,n)}):3===s&&i===t&&o===t?g(function(t,n){return e(r,t,n)}):3===s&&r===t?d(function(t){return e(t,i,o)}):3===s&&i===t?d(function(t){return e(r,t,o)}):3===s&&o===t?d(function(t){return e(r,i,t)}):e(r,i,o)}},m=function(t,e){var n={};for(var r in e)r!==t&&(n[r]=e[r]);return n},y=function(t,e){for(var n=-1,r=e.length,i=[];++n<r;)t(e[n])&&(i[i.length]=e[n]);return i},b=function(t,e){for(var n=-1,r=e.length,i=[];++n<r;)t(e[n],n,e)&&(i[i.length]=e[n]);return i},w=function(t,e){for(var n=-1,r=e.length;++n<r;)t(e[n]);return e},E=function(t){return function(e){return y(function(t){return"function"==typeof e[t]},t(e))}},_=function(t,e){return t>e},T=function(t,e){return Object.prototype.hasOwnProperty.call(e,t)},x=function(t){return t},A=function(t,e,n){var r=0,i=t.length;for("number"==typeof n&&(r=0>n?Math.max(0,i+n):n);i>r;){if(t[r]===e)return r;++r}return-1},S=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)},O=Number.isInteger||function(t){return t<<0===t},I=function(t){return null!=t&&t===Object(t)&&"function"==typeof t.then},j=function(t){return"function"==typeof t.step&&"function"==typeof t.result},k=function(t,e,n){var r=t.length;for("number"==typeof n&&(r=0>n?r+n+1:Math.min(r,n+1));--r>=0;)if(t[r]===e)return r;return-1},N=function(t,e){return e>t},P=function(t,e){for(var n=-1,r=e.length,i=[];++n<r;)i[n]=t(e[n]);return i},C=function(t,e){return t*e},R=function(t,e){return 0>t?e[e.length+t]:e[t]},D=function(t,e){if(null!=e&&0!==t.length){for(var n=e,r=0,i=t.length;i>r&&null!=n;r+=1)n=n[t[r]];return n}},L=function(t,e){return f([t],e)},M=function(t){return t&&t.__transducers_reduced__?t:{value:t,__transducers_reduced__:!0}},B=function(t,e,n){if(t===n)return!0;if(null==n)return!1;e.fn=e.fn||[],e.obj=e.obj||[];for(var r,i,o=-1,s=e.fn.length,u=-1,a=e.obj.length;++o<s;){if(r=e.fn[o],i=t[r],!(r in n))return!1;if(!i(n[r],n))return!1}for(;++u<a;)if(r=e.obj[u],t[r]!==n[r])return!1;return!0},U=function pi(t,e,n){switch(arguments.length){case 1:return pi(t,0,t.length);case 2:return pi(t,e,t.length);default:for(var r=Math.max(0,n-e),i=[],o=-1;++o<r;)i[o]=t[e+o];return i}},F=function(){function t(t,e){this.xf=e,this.f=t,this.all=!0}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.all&&(t=this.xf.step(t,!0)),this.xf.result(t)},t.prototype.step=function(t,e){return this.f(e)||(this.all=!1,t=M(this.xf.step(t,!1))),t},g(function(e,n){return new t(e,n)})}(),$=function(){function t(t,e){this.xf=e,this.f=t,this.any=!1}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.any||(t=this.xf.step(t,!1)),this.xf.result(t)},t.prototype.step=function(t,e){return this.f(e)&&(this.any=!0,t=M(this.xf.step(t,!0))),t},g(function(e,n){return new t(e,n)})}(),V=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(t)},t.prototype.step=function(t,e){return this.n>0?(this.n-=1,t):this.xf.step(t,e)},g(function(e,n){return new t(e,n)})}(),W=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(t)},t.prototype.step=function(t,e){if(this.f){if(this.f(e))return t;this.f=null}return this.xf.step(t,e)},g(function(e,n){return new t(e,n)})}(),q=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(t)},t.prototype.step=function(t,e){return this.f(e)?this.xf.step(t,e):t},g(function(e,n){return new t(e,n)})}(),Y=function(){function t(t,e){this.xf=e,this.f=t,this.found=!1}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.found||(t=this.xf.step(t,void 0)),this.xf.result(t)},t.prototype.step=function(t,e){return this.f(e)&&(this.found=!0,t=M(this.xf.step(t,e))),t},g(function(e,n){return new t(e,n)})}(),H=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.found||(t=this.xf.step(t,-1)),this.xf.result(t)},t.prototype.step=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=M(this.xf.step(t,this.idx))),t},g(function(e,n){return new t(e,n)})}(),G=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(this.xf.step(t,this.last))},t.prototype.step=function(t,e){return this.f(e)&&(this.last=e),t},g(function(e,n){return new t(e,n)})}(),z=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.lastIdx=-1}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(this.xf.step(t,this.lastIdx))},t.prototype.step=function(t,e){return this.idx+=1,this.f(e)&&(this.lastIdx=this.idx),t},g(function(e,n){return new t(e,n)})}(),X=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(t)},t.prototype.step=function(t,e){return this.xf.step(t,this.f(e))},g(function(e,n){return new t(e,n)})}(),Q=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(t)},t.prototype.step=function(t,e){return this.n-=1,0===this.n?M(this.xf.step(t,e)):this.xf.step(t,e)},g(function(e,n){return new t(e,n)})}(),J=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){return this.xf.result(t)},t.prototype.step=function(t,e){return this.f(e)?this.xf.step(t,e):M(t)},g(function(e,n){return new t(e,n)})}(),K=function(){function t(t){this.f=t}return t.prototype.init=function(){throw new Error("init not implemented on XWrap")},t.prototype.result=function(t){return t},t.prototype.step=function(t,e){return this.f(t,e)},function(e){return new t(e)}}(),Z=g(r),tt=d(function(t){return function(){return t}}),et=g(function(t,e){return t&&e}),nt=g(function(t,e){for(var n=-1,r=e.length-(t-1),i=new Array(r>=0?r:0);++n<r;)i[n]=U(e,n,n+t);return i}),rt=g(function(t,e){return t.apply(this,e)}),it=g(function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,i){return e.apply(this,arguments)};case 5:return function(t,n,r,i,o){return e.apply(this,arguments)};case 6:return function(t,n,r,i,o,s){return e.apply(this,arguments)};case 7:return function(t,n,r,i,o,s,u){return e.apply(this,arguments)};case 8:return function(t,n,r,i,o,s,u,a){return e.apply(this,arguments)};case 9:return function(t,n,r,i,o,s,u,a,c){return e.apply(this,arguments)};case 10:return function(t,n,r,i,o,s,u,a,c,f){return e.apply(this,arguments)};default:throw new Error("First argument to arity must be a non-negative integer no greater than ten")}}),ot=v(s),st=g(function(t,e){return it(t.length,function(){return t.apply(e,arguments);

})}),ut=g(function(t,e){return function(){return t.apply(this,arguments)&&e.apply(this,arguments)}}),at=d(function(t){return function(e,n){return t(e,n)?-1:t(n,e)?1:0}}),ct=d(a),ft=function(){var t=arguments;return function(){for(var e=-1;++e<t.length;)if(t[e][0].apply(this,arguments))return t[e][1].apply(this,arguments)}},lt=v(l),ht=g(function(t,e){for(var n={},r=e.length,i=-1;++i<r;){var o=t(e[i]);n[o]=(T(o,n)?n[o]:0)+1}return n}),pt=g(h),dt=g(function di(e,n){return it(e,function(){for(var r=arguments.length,i=e-r,o=r;--o>=0;)arguments[o]===t&&(i+=1);if(0>=i)return n.apply(this,arguments);var s=U(arguments);return di(i,function(){for(var e=U(arguments),i=[],o=-1;++o<r;){var u=s[o];i[o]=u===t?e.shift():u}return n.apply(this,i.concat(e))})})}),gt=Z(-1),vt=g(function(t,e){return null==e?t:e}),mt=v(function(t,e,n){for(var r=[],i=-1,o=e.length,s=lt(t);++i<o;)s(e[i],n)||s(e[i],r)||(r[i]=e[i]);return r}),yt=g(m),bt=g(function(t,e){return t/e}),wt=g(function(t,e){return function(){return t.apply(this,arguments)||e.apply(this,arguments)}}),Et=g(function(t,e){return 0===t?1/t===1/e:t===e||t!==t&&e!==e}),_t=v(function(t,e,n){return e[t]===n[t]}),Tt=g(b),xt=g(w),At=g(function(t,e){for(var n=-1,r=e.length;++n<r;)t(e[n],n,e);return e}),St=d(function(t){for(var e=-1,n=t.length,r={};++e<n;)S(t[e])&&t[e].length&&(r[t[e][0]]=t[e][1]);return r}),Ot=g(_),It=g(function(t,e){return t>=e}),jt=g(T),kt=g(function(t,e){return t in e}),Nt=d(x),Pt=v(function(t,e,n){return dt(Math.max(t.length,e.length,n.length),function(){return t.apply(this,arguments)?e.apply(this,arguments):n.apply(this,arguments)})}),Ct=Z(1),Rt=g(function(t,e){return A(e,t)}),Dt=v(function(t,e,n){return t=t<n.length&&t>=0?t:n.length,f(f(U(n,0,t),e),U(n,t))}),Lt=g(function(t,e){return null!=e&&e.constructor===t||e instanceof t}),Mt=d(function(t){return S(t)?!0:t?"object"!=typeof t?!1:t instanceof String?!1:1===t.nodeType?!!t.length:0===t.length?!0:t.length>0?t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1):!1:!1}),Bt=d(function(t){return 0===Object(t).length}),Ut=d(function(t){return"number"==typeof t&&t!==t}),Ft=d(function(t){return null==t}),$t=d(function(t){for(var e=t.length,n=-1;++n<e;)if(A(t,t[n],n+1)>=0)return!1;return!0}),Vt=d(function(t){var e,n=[];for(e in t)n[n.length]=e;return n}),Wt=g(function(t,e){return k(e,t)}),qt=d(function(t){return null!=t&&Lt(Number,t.length)?t.length:0/0}),Yt=g(function(t,e){var n=function(e){return t(e)};return n.set=g(e),n.map=g(function(n,r){return e(n(t(r)),r)}),n}),Ht=v(function(t,e,n){var r=function(){return t(n)};return r.set=e,r.map=function(r){return e(r(t(n)))},r}),Gt=g(N),zt=g(function(t,e){return e>=t}),Xt=v(function(t,e,n){for(var r=-1,i=n.length,o=[],s=[e];++r<i;)s=t(s[0],n[r]),o[r]=s[1];return[s[0],o]}),Qt=v(function(t,e,n){for(var r=n.length,i=[],o=[e];--r>=0;)o=t(o[0],n[r]),i[r]=o[1];return[o[0],i]}),Jt=g(function(t,e){for(var n=-1,r=e.length,i=[];++n<r;)i[n]=t(e[n],n,e);return i}),Kt=g(function(t,e){return O(t)?!O(e)||1>e?0/0:(t%e+e)%e:0/0}),Zt=g(p(_)),te=function(){var t=function(t){return t+"::"+Object.prototype.toString.call(t)},e=function(e){return e.length+":{"+P(t,e).join(",")+"}"};return d(function(t){var n={};return function(){var r=e(arguments);return T(r,n)||(n[r]=t.apply(this,arguments)),n[r]}})}(),ee=g(p(N)),ne=g(function(t,e){return t%e}),re=g(C),ie=g(function(t,e){switch(t){case 0:return function(){return e.call(this)};case 1:return function(t){return e.call(this,t)};case 2:return function(t,n){return e.call(this,t,n)};case 3:return function(t,n,r){return e.call(this,t,n,r)};case 4:return function(t,n,r,i){return e.call(this,t,n,r,i)};case 5:return function(t,n,r,i,o){return e.call(this,t,n,r,i,o)};case 6:return function(t,n,r,i,o,s){return e.call(this,t,n,r,i,o,s)};case 7:return function(t,n,r,i,o,s,u){return e.call(this,t,n,r,i,o,s,u)};case 8:return function(t,n,r,i,o,s,u,a){return e.call(this,t,n,r,i,o,s,u,a)};case 9:return function(t,n,r,i,o,s,u,a,c){return e.call(this,t,n,r,i,o,s,u,a,c)};case 10:return function(t,n,r,i,o,s,u,a,c,f){return e.call(this,t,n,r,i,o,s,u,a,c,f)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),oe=d(function(t){return-t}),se=d(function(t){return!t}),ue=g(R),ae=d(function(t){return function(){return R(t,arguments)}}),ce=g(function(t,e){return e.charAt(0>t?e.length+t:t)}),fe=g(function(t,e){return e.charCodeAt(0>t?e.length+t:t)}),le=d(function(t){return[t]}),he=g(function(t,e){var n={};for(var r in e)A(t,r)<0&&(n[r]=e[r]);return n}),pe=d(function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments))}}),de=g(function(t,e){return t||e}),ge=g(D),ve=v(function(t,e,n){return D(t,n)===e}),me=g(function(t,e){var n={};for(var r in e)A(t,r)>=0&&(n[r]=e[r]);return n}),ye=g(function(t,e){for(var n={},r=-1,i=t.length;++r<i;){var o=t[r];n[o]=e[o]}return n}),be=g(function(t,e){var n={};for(var r in e)t(e[r],r,e)&&(n[r]=e[r]);return n}),we=g(L),Ee=g(function(t,e){return e[t]}),_e=v(function(t,e,n){return n[t]===e}),Te=v(function(t,e,n){return T(e,n)?n[e]:t}),xe=g(function(t,e){for(var n=t.length,r=[],i=-1;++i<n;)r[i]=e[t[i]];return r}),Ae=g(function(t,e){for(var n=[],r=t;e>r;)n[n.length]=r,r+=1;return n}),Se=v(function(t,e,n){for(var r=-1,i=n.length;++r<i;)e=t(e,n[r],r,n);return e}),Oe=v(function(t,e,n){for(var r=n.length;--r>=0;)e=t(e,n[r]);return e}),Ie=v(function(t,e,n){for(var r=n.length;--r>=0;)e=t(e,n[r],r,n);return e}),je=g(function(t,e){return b(a(t),e)}),ke=v(function(t,e,n){return f(U(n,0,Math.min(t,n.length)),U(n,Math.min(n.length,t+e)))}),Ne=v(function(t,e,n){return n.replace(t,e)}),Pe=d(function(t){return U(t).reverse()}),Ce=v(function(t,e,n){for(var r=0,i=n.length+1,o=[e];++r<i;)e=t(e,n[r-1]),o[r]=e;return o}),Re=g(function(t,e){return U(e).sort(function(e,n){var r=t(e),i=t(n);return i>r?-1:r>i?1:0})}),De=g(function(t,e){return e.indexOf(t)}),Le=g(function(t,e){return e.lastIndexOf(t)}),Me=g(function(t,e){return t-e}),Be=g(function(t,e){return t(e),e}),Ue=g(function(t,e){return u(t).test(e)}),Fe=g(function(t,e){for(var n=Number(e),r=new Array(n),i=0;n>i;)r[i]=t(i),i+=1;return r}),$e=d(function(t){var e=[];for(var n in t)T(n,t)&&(e[e.length]=[n,t[n]]);return e}),Ve=d(function(t){var e=[];for(var n in t)e[e.length]=[n,t[n]];return e}),We=function(){var t="	\n\f\r   ᠎             　\u2028\u2029\ufeff",e="​",n="function"==typeof String.prototype.trim;return d(n&&!t.trim()&&e.trim()?function(t){return t.trim()}:function(e){var n=new RegExp("^["+t+"]["+t+"]*"),r=new RegExp("["+t+"]["+t+"]*$");return e.replace(n,"").replace(r,"")})}(),qe=d(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}),Ye=d(function(t){return function(){return t(U(arguments))}}),He=d(function(t){return ie(1,t)}),Ge=g(function(t,e){for(var n=t(e),r=[];n&&n.length;)r[r.length]=n[0],n=t(n[1]);return r}),ze=g(function(t,e){for(var n,r=-1,i=e.length,o=[];++r<i;)n=e[r],l(t,n,o)||(o[o.length]=n);return o}),Xe=d(function(t){var e,n=[];for(e in t)n[n.length]=t[e];return n}),Qe=g(function(t,e){return dt(t.length,function(){return e.apply(this,f([t],arguments))})}),Je=g(function(t,e){for(var n,r=-1,i=t.length,o=e.length,s=[];++r<i;)for(n=-1;++n<o;)s[s.length]=[t[r],e[n]];return s}),Ke=g(function(t,e){for(var n=[],r=-1,i=Math.min(t.length,e.length);++r<i;)n[r]=[t[r],e[r]];return n}),Ze=g(function(t,e){for(var n=-1,r=t.length,i={};++n<r;)i[t[n]]=e[n];return i}),tn=v(function(t,e,n){for(var r=[],i=-1,o=Math.min(e.length,n.length);++i<o;)r[i]=t(e[i],n[i]);return r}),en=tt(!1),nn=tt(!0),rn=function(t,e){return f(e,[t])},on=function gi(t,e,n){switch(t.length){case 0:return n;case 1:return s(t[0],e,n);default:return s(t[0],gi(U(t,1),e,Object(n[t[0]])),n)}},sn=function vi(t,e,n){var r=function(r){for(var i=e.length,o=-1;++o<i;)if(t===e[o])return n[o];e[o+1]=t,n[o+1]=r;for(var s in t)r[s]=vi(t[s],e,n);return r};switch(qe(t)){case"Object":return r({});case"Array":return r([]);case"Date":return new Date(t);case"RegExp":return u(t);default:return t}},un=function(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return S(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,U(arguments,0,n-1))}},an=function(t,e){return function(){var n=this,r=e.apply(this,arguments);return I(r)?r.then(function(e){return t.call(n,e)}):t.call(this,r)}},cn=function(t,e){return A(e,t)>=0},fn=function(t){return function(){for(var e=arguments.length-1,n=arguments[e],r=n.length;--e>=0;)n=t(arguments[e],n);return it(r,n)}},ln=function(t,e){return d(function(n){for(var r,i=-1,o=e;++i<n.length;)r=+n[i],t(r,o)&&(o=r);return o})},hn=function(t){return function(e){var n=U(arguments,1);return it(Math.max(0,e.length-n.length),function(){return e.apply(this,t(n,arguments))})}},pn=function(t,e,n){return function(){var r=arguments.length;if(0===r)return n();var i=arguments[r-1];if(!S(i)){var o=U(arguments,0,r-1);if("function"==typeof i[t])return i[t].apply(i,o);if(j(i)){var s=e.apply(null,o);return s(i)}}return n.apply(this,arguments)}},dn=function mi(t,e){switch(t.length){case 0:return e;case 1:return m(t[0],e);default:var n=t[0],r=U(t,1);return null==e[n]?e:s(n,mi(r,e[n]),e)}},gn=function(t,e){return null!=e&&!S(e)&&"function"==typeof e[t]},vn=function(t){return function e(n){for(var r,i,o,s=[],u=-1,a=n.length;++u<a;)if(Mt(n[u]))for(r=t?e(n[u]):n[u],i=-1,o=r.length;++i<o;)s[s.length]=r[i];else s[s.length]=n[u];return s}},mn=function(t,e){return P(Ee(t),e)},yn=function(){function t(t,e,n){for(var r=-1,i=n.length;++r<i;)if(e=t.step(e,n[r]),e&&e.__transducers_reduced__){e=e.value;break}return t.result(e)}function e(t,e,n){for(var r=n.next();!r.done;){if(e=t.step(e,r.value),e&&e.__transducers_reduced__){e=e.value;break}r=n.next()}return t.result(e)}function n(t,e,n){return t.result(n.reduce(st(t.step,t),e))}var r="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(i,o,s){if("function"==typeof i&&(i=K(i)),Mt(s))return t(i,o,s);if("function"==typeof s.reduce)return n(i,o,s);if(null!=s[r])return e(i,o,s[r]());if("function"==typeof s.next)return e(i,o,s);throw new TypeError("reduce: list must be array or iterable")}}(),bn=function(){function t(t,e){this.xf=e,this.f=t,this.inputs={}}return t.prototype.init=function(){return this.xf.init()},t.prototype.result=function(t){var e;for(e in this.inputs)if(T(e,this.inputs)&&(t=this.xf.step(t,this.inputs[e]),t.__transducers_reduced__)){t=t.value;break}return this.xf.result(t)},t.prototype.step=function(t,e){var n=this.f(e);return this.inputs[n]=this.inputs[n]||[n,[]],this.inputs[n][1]=rn(e,this.inputs[n][1]),t},g(function(e,n){return new t(e,n)})}(),wn=g(pn("all",F,i)),En=g(pn("any",$,o)),_n=g(rn),Tn=v(on),xn=d(function(t){return ie(2,t)}),An=d(function(t){return sn(t,[],[])}),Sn=fn(c),On=fn(an),In=g(function(t,e){if(S(e))return f(t,e);if(gn("concat",t))return t.concat(e);throw new TypeError("can't concat "+typeof t)}),jn=g(cn),kn=dt(3,function(t){var e=U(arguments,1);return function(){var n=arguments;return t.apply(this,P(function(t){return t.apply(this,n)},e))}}),Nn=d(function(t){return dt(t.length,t)}),Pn=g(function(t,e){for(var n=[],r=-1,i=t.length;++r<i;)cn(t[r],e)||cn(t[r],n)||(n[n.length]=t[r]);return n}),Cn=g(dn),Rn=g(pn("drop",V,function(t,e){return t<e.length?U(e,t):[]})),Dn=g(pn("dropWhile",W,function(t,e){for(var n=-1,r=e.length;++n<r&&t(e[n]););return U(e,n)})),Ln=d(function(t){return gn("empty",t)?t.empty():[]}),Mn=g(pn("filter",q,y)),Bn=g(pn("find",Y,function(t,e){for(var n=-1,r=e.length;++n<r;)if(t(e[n]))return e[n]})),Un=g(pn("findIndex",H,function(t,e){for(var n=-1,r=e.length;++n<r;)if(t(e[n]))return n;return-1})),Fn=g(pn("findLast",G,function(t,e){for(var n=e.length;--n>=0;)if(t(e[n]))return e[n]})),$n=g(pn("findLastIndex",z,function(t,e){for(var n=e.length;--n>=0;)if(t(e[n]))return n;return-1})),Vn=d(vn(!0)),Wn=d(function(t){return Nn(function(e,n){var r=U(arguments);return r[0]=n,r[1]=e,t.apply(this,r)})}),qn=Nn(function(t,e){return e[t].apply(e,U(arguments,2))}),Yn=d(E(Vt)),Hn=g(pn("groupBy",bn,function(t,e){return yn(function(e,n){var r=t(n);return e[r]=rn(n,e[r]||(e[r]=[])),e},{},e)})),Gn=ue(0),zn=v(function(t,e,n){return t=t<n.length&&t>=0?t:n.length,f(rn(e,U(n,0,t)),U(n,t))}),Xn=v(function(t,e,n){for(var r=[],i=-1;++i<e.length;)l(t,e[i],n)&&(r[r.length]=e[i]);return ze(t,r)}),Qn=Nn(function(t,e,n){return n[t].apply(n,e)}),Jn=Nn(function(t,e){var n=U(arguments,2),r=t-n.length;return dt(r+1,function(){var t=arguments[r],i=n.concat(U(arguments,0,r));return t[e].apply(t,i)})}),Kn=Jn(1,"join"),Zn=function(){var t=!{toString:null}.propertyIsEnumerable("toString"),e=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];return d(function(n){if(Object(n)!==n)return[];if(Object.keys)return Object.keys(n);var r,i,o=[];for(r in n)T(r,n)&&(o[o.length]=r);if(t)for(i=e.length;--i>=0;)r=e[i],T(r,n)&&!cn(r,o)&&(o[o.length]=r);return o})}(),tr=ue(-1),er=g(pn("map",X,P)),nr=g(function(t,e){return yn(function(n,r){return n[r]=t(e[r]),n},{},Zn(e))}),rr=g(function(t,e){return yn(function(n,r){return n[r]=t(e[r],r,e),n},{},Zn(e))}),ir=Jn(1,"match"),or=ln(_,-(1/0)),sr=ln(N,1/0),ur=g(a(pn("any",$,o))),ar=Nn(hn(f)),cr=Nn(hn(Wn(f))),fr=g(function(t,e){return yn(function(e,n){var r=e[t(n)?0:1];return r[r.length]=n,e},[[],[]],e)}),lr=function(){return Sn.apply(this,Pe(arguments))},hr=function(){return On.apply(this,Pe(arguments))},pr=g(mn),dr=v(yn),gr=g(function(t,e){return Mn(a(t),e)}),vr=g(function(t,e){return Fe(tt(t),e)}),mr=v(un("slice",function(t,e,n){return Array.prototype.slice.call(n,t,e)})),yr=g(function(t,e){return An(e).sort(t)}),br=Jn(1,"split"),wr=mr,Er=wr(t,1/0),_r=wr(0),Tr=dr(r,0),xr=un("tail",function(t){return U(t,1)}),Ar=g(pn("take",Q,function(t,e){return U(e,0,Math.min(t,e.length))})),Sr=g(pn("takeWhile",J,function(t,e){for(var n=-1,r=e.length;++n<r&&t(e[n]););return U(e,0,n)})),Or=Jn(0,"toLowerCase"),Ir=Jn(0,"toUpperCase"),jr=dt(4,function(t,e,n,r){return yn(t("function"==typeof e?K(e):e),n,r)}),kr=v(function(t,e,n){return ze(t,f(e,n))}),Nr=d(function(t){for(var e,n=-1,r=t.length,i=[];++n<r;)e=t[n],cn(e,i)||(i[i.length]=e);return i}),Pr=d(vn(!1)),Cr=Nn(function(t){var e=U(arguments,1),n=e.length;return Nn(it(n,function(){for(var r=[],i=-1;++i<n;)r[i]=e[i](arguments[i]);return t.apply(this,r.concat(U(arguments,n)))}))}),Rr=d(function(t){for(var e=Zn(t),n=e.length,r=[],i=-1;++i<n;)r[i]=t[e[i]];return r}),Dr=g(function(t,e){var n=Hn(function(e){return"function"==typeof t[e]?"fn":"obj"},Zn(t));return B(t,n,e)}),Lr=function yi(t,e,n,r){var i=qe(t);if(i!==qe(e))return!1;if(Et(t,e))return!0;if("RegExp"==i)return t.source===e.source&&t.global===e.global&&t.ignoreCase===e.ignoreCase&&t.multiline===e.multiline&&t.sticky===e.sticky&&t.unicode===e.unicode;if(Object(t)===t){if("Date"===i&&t.getTime()!=e.getTime())return!1;var o=Zn(t);if(o.length!==Zn(e).length)return!1;for(var s=n.length;--s>=0;)if(n[s]===t)return r[s]===e;for(n[n.length]=t,r[r.length]=e,s=o.length;--s>=0;){var u=o[s];if(!T(u,e)||!yi(e[u],t[u],n,r))return!1}return n.pop(),r.pop(),!0}return!1},Mr=function(t,e){for(var n=Zn(e),r=-1,i=n.length;++r<i;)t[n[r]]=e[n[r]];return t},Br=function(t){return function(e){var n=function(){var n=arguments;return t(function(t){return t.apply(null,n)},e)};return arguments.length>1?n.apply(null,U(arguments,1)):it(or(mn("length",e)),n)}},Ur=Nn(Br(i)),Fr=Nn(Br(o)),$r=g(function(t,e){return gn("ap",t)?t.ap(e):yn(function(t,n){return f(t,er(n,e))},[],t)}),Vr=Nn(function(t){return t.apply(this,U(arguments,1))}),Wr=g(un("chain",function(t,e){return Pr(P(t,e))})),qr=Jn(1,"charAt"),Yr=Jn(1,"charCodeAt"),Hr=v(function(t,e,n){function r(e,n){return $r(er(_n,t(n)),e)}return yn(r,e([]),n)}),Gr=g(function(t,e){if(t>10)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new e}:Nn(ie(t,function(t,n,r,i,o,s,u,a,c,f){switch(arguments.length){case 1:return new e(t);case 2:return new e(t,n);case 3:return new e(t,n,r);case 4:return new e(t,n,r,i);case 5:return new e(t,n,r,i,o);case 6:return new e(t,n,r,i,o,s);case 7:return new e(t,n,r,i,o,s,u);case 8:return new e(t,n,r,i,o,s,u,a);case 9:return new e(t,n,r,i,o,s,u,a,c);case 10:return new e(t,n,r,i,o,s,u,a,c,f)}}))}),zr=g(function(t,e){return Lr(t,e,[],[])}),Xr=g(function(t,e){return Mr(Mr({},e),rr(function(t,n){return t(e[n])},t))}),Qr=d(E(Zn)),Jr=mr(0,-1),Kr=g(function(t,e){return Nr(y(Wn(cn)(t),e))}),Zr=d(function(t){for(var e=Zn(t),n=e.length,r=-1,i={};++r<n;){var o=e[r],s=t[o],u=T(s,i)?i[s]:i[s]=[];u[u.length]=o}return i}),ti=d(function(t){for(var e=Zn(t),n=e.length,r=-1,i={};++r<n;){var o=e[r];i[t[o]]=o}return i}),ei=g(function(t,e){var n=dt(t,e);return dt(t,function(){return yn($r,er(n,arguments[0]),U(arguments,1))})}),ni=g(function(t,e){return Mr(Mr({},t),e)}),ri=d(function(t){return dr(ni,{},t)}),ii=dr(C,1),oi=Cr(P,ye,Nt),si=g(Sn(Nr,f)),ui=function(){var t={init:Array,step:function(t,e){return f(t,[e])},result:x},e={init:String,step:r,result:x},n={init:Object,step:function(t,e){return ni(t,Mt(e)?h(e[0],e[1]):e)},result:x};return function(r){if(j(r))return r;if(Mt(r))return t;if("string"==typeof r)return e;if("object"==typeof r)return n;throw new Error("Cannot create transformer for "+r)}}(),ai=Hr(er(Nt)),ci=d(function(t){return Gr(t.length,t)}),fi=v(function(t,e,n){return j(t)?yn(e(t),t.init(),n):yn(e(ui(t)),t,n)}),li=d(function(t){return ei(t.length,t)}),hi={F:en,T:nn,__:t,add:Z,all:wn,allPass:Ur,always:tt,and:et,any:En,anyPass:Fr,ap:$r,aperture:nt,append:_n,apply:rt,arity:it,assoc:ot,assocPath:Tn,binary:xn,bind:st,both:ut,call:Vr,chain:Wr,charAt:qr,charCodeAt:Yr,clone:An,commute:ai,commuteMap:Hr,comparator:at,complement:ct,compose:Sn,composeP:On,concat:In,cond:ft,construct:ci,constructN:Gr,contains:jn,containsWith:lt,converge:kn,countBy:ht,createMapEntry:pt,curry:Nn,curryN:dt,dec:gt,defaultTo:vt,difference:Pn,differenceWith:mt,dissoc:yt,dissocPath:Cn,divide:bt,drop:Rn,dropWhile:Dn,either:wt,empty:Ln,eq:Et,eqDeep:zr,eqProps:_t,evolve:Xr,filter:Mn,filterIndexed:Tt,find:Bn,findIndex:Un,findLast:Fn,findLastIndex:$n,flatten:Vn,flip:Wn,forEach:xt,forEachIndexed:At,fromPairs:St,func:qn,functions:Qr,functionsIn:Yn,groupBy:Hn,gt:Ot,gte:It,has:jt,hasIn:kt,head:Gn,identity:Nt,ifElse:Pt,inc:Ct,indexOf:Rt,init:Jr,insert:zn,insertAll:Dt,intersection:Kr,intersectionWith:Xn,into:fi,invert:Zr,invertObj:ti,invoke:Qn,invoker:Jn,is:Lt,isArrayLike:Mt,isEmpty:Bt,isNaN:Ut,isNil:Ft,isSet:$t,join:Kn,keys:Zn,keysIn:Vt,last:tr,lastIndexOf:Wt,length:qt,lens:Yt,lensOn:Ht,lift:li,liftN:ei,lt:Gt,lte:zt,map:er,mapAccum:Xt,mapAccumRight:Qt,mapIndexed:Jt,mapObj:nr,mapObjIndexed:rr,match:ir,mathMod:Kt,max:or,maxBy:Zt,memoize:te,merge:ni,mergeAll:ri,min:sr,minBy:ee,modulo:ne,multiply:re,nAry:ie,negate:oe,none:ur,not:se,nth:ue,nthArg:ae,nthChar:ce,nthCharCode:fe,of:le,omit:he,once:pe,or:de,partial:ar,partialRight:cr,partition:fr,path:ge,pathEq:ve,pick:me,pickAll:ye,pickBy:be,pipe:lr,pipeP:hr,pluck:pr,prepend:we,product:ii,project:oi,prop:Ee,propEq:_e,propOr:Te,props:xe,range:Ae,reduce:dr,reduceIndexed:Se,reduceRight:Oe,reduceRightIndexed:Ie,reject:gr,rejectIndexed:je,remove:ke,repeat:vr,replace:Ne,reverse:Pe,scan:Ce,slice:mr,sort:yr,sortBy:Re,split:br,strIndexOf:De,strLastIndexOf:Le,substring:wr,substringFrom:Er,substringTo:_r,subtract:Me,sum:Tr,tail:xr,take:Ar,takeWhile:Sr,tap:Be,test:Ue,times:Fe,toLower:Or,toPairs:$e,toPairsIn:Ve,toUpper:Ir,transduce:jr,trim:We,type:qe,unapply:Ye,unary:He,unfold:Ge,union:si,unionWith:kr,uniq:Nr,uniqWith:ze,unnest:Pr,useWith:Cr,values:Rr,valuesIn:Xe,where:Dr,wrap:Qe,xprod:Je,zip:Ke,zipObj:Ze,zipWith:tn};"object"==typeof n?e.exports=hi:"function"==typeof define&&define.amd?define(function(){return hi}):this.R=hi}).call(this)},{}],38:[function(t,e,n){(function(t){var n;if(t.crypto&&crypto.getRandomValues){var r=new Uint8Array(16);n=function(){return crypto.getRandomValues(r),r}}if(!n){var i=new Array(16);n=function(){for(var t,e=0;16>e;e++)0===(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],39:[function(t,e,n){function r(t,e,n){var r=e&&n||0,i=0;for(e=e||[],t.toLowerCase().replace(/[0-9a-f]{2}/g,function(t){16>i&&(e[r+i++]=c[t])});16>i;)e[r+i++]=0;return e}function i(t,e){var n=e||0,r=a;return r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+"-"+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]+r[t[n++]]}function o(t,e,n){var r=e&&n||0,o=e||[];t=t||{};var s=void 0!==t.clockseq?t.clockseq:p,u=void 0!==t.msecs?t.msecs:(new Date).getTime(),a=void 0!==t.nsecs?t.nsecs:g+1,c=u-d+(a-g)/1e4;if(0>c&&void 0===t.clockseq&&(s=s+1&16383),(0>c||u>d)&&void 0===t.nsecs&&(a=0),a>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=u,g=a,p=s,u+=122192928e5;var f=(1e4*(268435455&u)+a)%4294967296;o[r++]=f>>>24&255,o[r++]=f>>>16&255,o[r++]=f>>>8&255,o[r++]=255&f;var l=u/4294967296*1e4&268435455;o[r++]=l>>>8&255,o[r++]=255&l,o[r++]=l>>>24&15|16,o[r++]=l>>>16&255,o[r++]=s>>>8|128,o[r++]=255&s;for(var v=t.node||h,m=0;6>m;m++)o[r+m]=v[m];return e?e:i(o)}function s(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var o=t.random||(t.rng||u)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e)for(var s=0;16>s;s++)e[r+s]=o[s];return e||i(o)}for(var u=t("./rng"),a=[],c={},f=0;256>f;f++)a[f]=(f+256).toString(16).substr(1),c[a[f]]=f;var l=u(),h=[1|l[0],l[1],l[2],l[3],l[4],l[5]],p=16383&(l[6]<<8|l[7]),d=0,g=0,v=s;v.v1=o,v.v4=s,v.parse=r,v.unparse=i,e.exports=v},{"./rng":38}],40:[function(t,e,n){var r=t("./vdom/create-element.js");e.exports=r},{"./vdom/create-element.js":53}],41:[function(t,e,n){var r=t("./vtree/diff.js");e.exports=r},{"./vtree/diff.js":73}],42:[function(t,e,n){var r=t("./virtual-hyperscript/index.js");e.exports=r},{"./virtual-hyperscript/index.js":60}],43:[function(t,e,n){var r=t("./diff.js"),i=t("./patch.js"),o=t("./h.js"),s=t("./create-element.js"),u=t("./vnode/vnode.js"),a=t("./vnode/vtext.js");e.exports={diff:r,patch:i,h:o,create:s,VNode:u,VText:a}},{"./create-element.js":40,"./diff.js":41,"./h.js":42,"./patch.js":51,"./vnode/vnode.js":69,"./vnode/vtext.js":71}],44:[function(t,e,n){e.exports=function(t){var e,n=String.prototype.split,r=/()??/.exec("")[1]===t;return e=function(e,i,o){if("[object RegExp]"!==Object.prototype.toString.call(i))return n.call(e,i,o);var s,u,a,c,f=[],l=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.extended?"x":"")+(i.sticky?"y":""),h=0,i=new RegExp(i.source,l+"g");for(e+="",r||(s=new RegExp("^"+i.source+"$(?!\\s)",l)),o=o===t?-1>>>0:o>>>0;(u=i.exec(e))&&(a=u.index+u[0].length,!(a>h&&(f.push(e.slice(h,u.index)),!r&&u.length>1&&u[0].replace(s,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===t&&(u[e]=t)}),u.length>1&&u.index<e.length&&Array.prototype.push.apply(f,u.slice(1)),c=u[0].length,h=a,f.length>=o)));)i.lastIndex===u.index&&i.lastIndex++;return h===e.length?(c||!i.test(""))&&f.push(""):f.push(e.slice(h)),f.length>o?f.slice(0,o):f}}()},{}],45:[function(t,e,n){"use strict";function r(t){var e=t[s];return e||(e=t[s]={}),e}var i=t("individual/one-version"),o="7";i("ev-store",o);var s="__EV_STORE_KEY@"+o;e.exports=r},{"individual/one-version":47}],46:[function(t,e,n){(function(t){"use strict";function n(t,e){return t in r?r[t]:(r[t]=e,e)}var r="undefined"!=typeof window?window:"undefined"!=typeof t?t:{};e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],47:[function(t,e,n){"use strict";function r(t,e,n){var r="__INDIVIDUAL_ONE_VERSION_"+t,o=r+"_ENFORCE_SINGLETON",s=i(o,e);if(s!==e)throw new Error("Can only have one copy of "+t+".\nYou already have version "+s+" installed.\nThis means you cannot install version "+e);return i(r,n)}var i=t("./index.js");e.exports=r},{"./index.js":46}],48:[function(t,e,n){(function(n){var r="undefined"!=typeof n?n:"undefined"!=typeof window?window:{},i=t("min-document");if("undefined"!=typeof document)e.exports=document;else{var o=r["__GLOBAL_DOCUMENT_CACHE@4"];o||(o=r["__GLOBAL_DOCUMENT_CACHE@4"]=i),e.exports=o}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"min-document":14}],49:[function(t,e,n){"use strict";e.exports=function(t){return"object"==typeof t&&null!==t}},{}],50:[function(t,e,n){function r(t){return"[object Array]"===o.call(t)}var i=Array.isArray,o=Object.prototype.toString;e.exports=i||r},{}],51:[function(t,e,n){var r=t("./vdom/patch.js");e.exports=r},{"./vdom/patch.js":56}],52:[function(t,e,n){function r(t,e,n){for(var r in e){var s=e[r];void 0===s?i(t,r,s,n):a(s)?(i(t,r,s,n),s.hook&&s.hook(t,r,n?n[r]:void 0)):u(s)?o(t,e,n,r,s):t[r]=s}}function i(t,e,n,r){if(r){var i=r[e];if(a(i))i.unhook&&i.unhook(t,e,n);else if("attributes"===e)for(var o in i)t.removeAttribute(o);else if("style"===e)for(var s in i)t.style[s]="";else t[e]="string"==typeof i?"":null}}function o(t,e,n,r,i){var o=n?n[r]:void 0;if("attributes"!==r){if(o&&u(o)&&s(o)!==s(i))return void(t[r]=i);u(t[r])||(t[r]={});var a="style"===r?"":void 0;for(var c in i){var f=i[c];t[r][c]=void 0===f?a:f}}else for(var l in i){var h=i[l];void 0===h?t.removeAttribute(l):t.setAttribute(l,h)}}function s(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}var u=t("is-object"),a=t("../vnode/is-vhook.js");e.exports=r},{"../vnode/is-vhook.js":64,"is-object":49}],53:[function(t,e,n){function r(t,e){var n=e?e.document||i:i,f=e?e.warn:null;if(t=c(t).a,a(t))return t.init();if(u(t))return n.createTextNode(t.text);if(!s(t))return f&&f("Item is not a valid virtual dom node",t),null;var l=null===t.namespace?n.createElement(t.tagName):n.createElementNS(t.namespace,t.tagName),h=t.properties;o(l,h);for(var p=t.children,d=0;d<p.length;d++){var g=r(p[d],e);g&&l.appendChild(g)}return l}var i=t("global/document"),o=t("./apply-properties"),s=t("../vnode/is-vnode.js"),u=t("../vnode/is-vtext.js"),a=t("../vnode/is-widget.js"),c=t("../vnode/handle-thunk.js");e.exports=r},{"../vnode/handle-thunk.js":62,"../vnode/is-vnode.js":65,"../vnode/is-vtext.js":66,"../vnode/is-widget.js":67,"./apply-properties":52,"global/document":48}],54:[function(t,e,n){function r(t,e,n,r){return n&&0!==n.length?(n.sort(s),i(t,e,n,r,0)):{}}function i(t,e,n,r,s){if(r=r||{},t){o(n,s,s)&&(r[s]=t);var a=e.children;if(a)for(var c=t.childNodes,f=0;f<e.children.length;f++){s+=1;var l=a[f]||u,h=s+(l.count||0);o(n,s,h)&&i(c[f],l,n,r,s),s=h}}return r}function o(t,e,n){if(0===t.length)return!1;for(var r,i,o=0,s=t.length-1;s>=o;){if(r=(s+o)/2>>0,i=t[r],o===s)return i>=e&&n>=i;if(e>i)o=r+1;else{if(!(i>n))return!0;s=r-1}}return!1}function s(t,e){return t>e?1:-1}var u={};e.exports=r},{}],55:[function(t,e,n){function r(t,e,n){var r=t.type,c=t.vNode,p=t.patch;switch(r){case d.REMOVE:return i(e,c);case d.INSERT:return o(e,p,n);case d.VTEXT:return s(e,c,p,n);case d.WIDGET:return u(e,c,p,n);case d.VNODE:return a(e,c,p,n);case d.ORDER:return f(e,p),e;case d.PROPS:return h(e,p,c.properties),e;case d.THUNK:return l(e,n.patch(e,p,n));default:return e}}function i(t,e){var n=t.parentNode;return n&&n.removeChild(t),c(t,e),null}function o(t,e,n){var r=g(e,n);return t&&t.appendChild(r),t}function s(t,e,n,r){var i;if(3===t.nodeType)t.replaceData(0,t.length,n.text),i=t;else{var o=t.parentNode;i=g(n,r),o&&i!==t&&o.replaceChild(i,t)}return i}function u(t,e,n,r){var i,o=v(e,n);i=o?n.update(e,t)||t:g(n,r);var s=t.parentNode;return s&&i!==t&&s.replaceChild(i,t),o||c(t,e),i}function a(t,e,n,r){var i=t.parentNode,o=g(n,r);return i&&o!==t&&i.replaceChild(o,t),o}function c(t,e){"function"==typeof e.destroy&&p(e)&&e.destroy(t)}function f(t,e){for(var n,r,i,o=t.childNodes,s={},u=0;u<e.removes.length;u++)r=e.removes[u],n=o[r.from],r.key&&(s[r.key]=n),t.removeChild(n);for(var a=o.length,c=0;c<e.inserts.length;c++)i=e.inserts[c],n=s[i.key],t.insertBefore(n,i.to>=a++?null:o[i.to])}function l(t,e){return t&&e&&t!==e&&t.parentNode&&t.parentNode.replaceChild(e,t),e}var h=t("./apply-properties"),p=t("../vnode/is-widget.js"),d=t("../vnode/vpatch.js"),g=t("./create-element"),v=t("./update-widget");e.exports=r},{"../vnode/is-widget.js":67,"../vnode/vpatch.js":70,"./apply-properties":52,"./create-element":53,"./update-widget":57}],56:[function(t,e,n){function r(t,e){return i(t,e)}function i(t,e,n){var r=s(e);if(0===r.length)return t;var a=c(t,e.a,r),f=t.ownerDocument;n||(n={patch:i},f!==u&&(n.document=f));for(var l=0;l<r.length;l++){var h=r[l];t=o(t,a[h],e[h],n)}return t}function o(t,e,n,r){if(!e)return t;var i;if(a(n))for(var o=0;o<n.length;o++)i=f(n[o],e,r),e===t&&(t=i);else i=f(n,e,r),e===t&&(t=i);return t}function s(t){var e=[];for(var n in t)"a"!==n&&e.push(Number(n));return e}var u=t("global/document"),a=t("x-is-array"),c=t("./dom-index"),f=t("./patch-op");e.exports=r},{"./dom-index":54,"./patch-op":55,"global/document":48,"x-is-array":50}],57:[function(t,e,n){function r(t,e){return i(t)&&i(e)?"name"in t&&"name"in e?t.id===e.id:t.init===e.init:!1}var i=t("../vnode/is-widget.js");e.exports=r},{"../vnode/is-widget.js":67}],58:[function(t,e,n){"use strict";function r(t){return this instanceof r?void(this.value=t):new r(t)}var i=t("ev-store");e.exports=r,r.prototype.hook=function(t,e){var n=i(t),r=e.substr(3);n[r]=this.value},r.prototype.unhook=function(t,e){var n=i(t),r=e.substr(3);n[r]=void 0}},{"ev-store":45}],59:[function(t,e,n){"use strict";function r(t){return this instanceof r?void(this.value=t):new r(t)}e.exports=r,r.prototype.hook=function(t,e){t[e]!==this.value&&(t[e]=this.value)}},{}],60:[function(t,e,n){"use strict";function r(t,e,n){var r,s,a,c,f=[];return!n&&u(e)&&(n=e,s={}),s=s||e||{},r=y(t,s),s.hasOwnProperty("key")&&(a=s.key,s.key=void 0),s.hasOwnProperty("namespace")&&(c=s.namespace,s.namespace=void 0),"INPUT"!==r||c||!s.hasOwnProperty("value")||void 0===s.value||v(s.value)||(s.value=b(s.value)),o(s),void 0!==n&&null!==n&&i(n,f,r,s),new l(r,s,f,a,c)}function i(t,e,n,r){if("string"==typeof t)e.push(new h(t));else if(s(t))e.push(t);else{if(!f(t)){if(null===t||void 0===t)return;throw a({foreignObject:t,parentVnode:{tagName:n,properties:r}})}for(var o=0;o<t.length;o++)i(t[o],e,n,r)}}function o(t){for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if(v(n))continue;"ev-"===e.substr(0,3)&&(t[e]=w(n))}}function s(t){return p(t)||d(t)||g(t)||m(t)}function u(t){return"string"==typeof t||f(t)||s(t)}function a(t){var e=new Error;return e.type="virtual-hyperscript.unexpected.virtual-element",e.message="Unexpected virtual child passed to h().\nExpected a VNode / Vthunk / VWidget / string but:\ngot:\n"+c(t.foreignObject)+".\nThe parent vnode is:\n"+c(t.parentVnode),e.foreignObject=t.foreignObject,e.parentVnode=t.parentVnode,e}function c(t){try{return JSON.stringify(t,null,"    ")}catch(e){return String(t)}}var f=t("x-is-array"),l=t("../vnode/vnode.js"),h=t("../vnode/vtext.js"),p=t("../vnode/is-vnode"),d=t("../vnode/is-vtext"),g=t("../vnode/is-widget"),v=t("../vnode/is-vhook"),m=t("../vnode/is-thunk"),y=t("./parse-tag.js"),b=t("./hooks/soft-set-hook.js"),w=t("./hooks/ev-hook.js");e.exports=r},{"../vnode/is-thunk":63,"../vnode/is-vhook":64,"../vnode/is-vnode":65,"../vnode/is-vtext":66,"../vnode/is-widget":67,"../vnode/vnode.js":69,"../vnode/vtext.js":71,"./hooks/ev-hook.js":58,"./hooks/soft-set-hook.js":59,"./parse-tag.js":61,"x-is-array":50}],61:[function(t,e,n){"use strict";function r(t,e){if(!t)return"DIV";var n=!e.hasOwnProperty("id"),r=i(t,o),u=null;s.test(r[1])&&(u="DIV");var a,c,f,l;for(l=0;l<r.length;l++)c=r[l],c&&(f=c.charAt(0),u?"."===f?(a=a||[],a.push(c.substring(1,c.length))):"#"===f&&n&&(e.id=c.substring(1,c.length)):u=c);return a&&(e.className&&a.push(e.className),e.className=a.join(" ")),e.namespace?u:u.toUpperCase()}var i=t("browser-split"),o=/([\.#]?[a-zA-Z0-9_:-]+)/,s=/^\.|#/;e.exports=r},{"browser-split":44}],62:[function(t,e,n){function r(t,e){var n=t,r=e;

return a(e)&&(r=i(e,t)),a(t)&&(n=i(t,null)),{a:n,b:r}}function i(t,e){var n=t.vnode;if(n||(n=t.vnode=t.render(e)),!(o(n)||s(n)||u(n)))throw new Error("thunk did not return a valid node");return n}var o=t("./is-vnode"),s=t("./is-vtext"),u=t("./is-widget"),a=t("./is-thunk");e.exports=r},{"./is-thunk":63,"./is-vnode":65,"./is-vtext":66,"./is-widget":67}],63:[function(t,e,n){function r(t){return t&&"Thunk"===t.type}e.exports=r},{}],64:[function(t,e,n){function r(t){return t&&("function"==typeof t.hook&&!t.hasOwnProperty("hook")||"function"==typeof t.unhook&&!t.hasOwnProperty("unhook"))}e.exports=r},{}],65:[function(t,e,n){function r(t){return t&&"VirtualNode"===t.type&&t.version===i}var i=t("./version");e.exports=r},{"./version":68}],66:[function(t,e,n){function r(t){return t&&"VirtualText"===t.type&&t.version===i}var i=t("./version");e.exports=r},{"./version":68}],67:[function(t,e,n){function r(t){return t&&"Widget"===t.type}e.exports=r},{}],68:[function(t,e,n){e.exports="2"},{}],69:[function(t,e,n){function r(t,e,n,r,i){this.tagName=t,this.properties=e||c,this.children=n||f,this.key=null!=r?String(r):void 0,this.namespace="string"==typeof i?i:null;var l,h=n&&n.length||0,p=0,d=!1,g=!1,v=!1;for(var m in e)if(e.hasOwnProperty(m)){var y=e[m];a(y)&&y.unhook&&(l||(l={}),l[m]=y)}for(var b=0;h>b;b++){var w=n[b];o(w)?(p+=w.count||0,!d&&w.hasWidgets&&(d=!0),!g&&w.hasThunks&&(g=!0),v||!w.hooks&&!w.descendantHooks||(v=!0)):!d&&s(w)?"function"==typeof w.destroy&&(d=!0):!g&&u(w)&&(g=!0)}this.count=h+p,this.hasWidgets=d,this.hasThunks=g,this.hooks=l,this.descendantHooks=v}var i=t("./version"),o=t("./is-vnode"),s=t("./is-widget"),u=t("./is-thunk"),a=t("./is-vhook");e.exports=r;var c={},f=[];r.prototype.version=i,r.prototype.type="VirtualNode"},{"./is-thunk":63,"./is-vhook":64,"./is-vnode":65,"./is-widget":67,"./version":68}],70:[function(t,e,n){function r(t,e,n){this.type=Number(t),this.vNode=e,this.patch=n}var i=t("./version");r.NONE=0,r.VTEXT=1,r.VNODE=2,r.WIDGET=3,r.PROPS=4,r.ORDER=5,r.INSERT=6,r.REMOVE=7,r.THUNK=8,e.exports=r,r.prototype.version=i,r.prototype.type="VirtualPatch"},{"./version":68}],71:[function(t,e,n){function r(t){this.text=String(t)}var i=t("./version");e.exports=r,r.prototype.version=i,r.prototype.type="VirtualText"},{"./version":68}],72:[function(t,e,n){function r(t,e){var n;for(var u in t){u in e||(n=n||{},n[u]=void 0);var a=t[u],c=e[u];if(a!==c)if(o(a)&&o(c))if(i(c)!==i(a))n=n||{},n[u]=c;else if(s(c))n=n||{},n[u]=c;else{var f=r(a,c);f&&(n=n||{},n[u]=f)}else n=n||{},n[u]=c}for(var l in e)l in t||(n=n||{},n[l]=e[l]);return n}function i(t){return Object.getPrototypeOf?Object.getPrototypeOf(t):t.__proto__?t.__proto__:t.constructor?t.constructor.prototype:void 0}var o=t("is-object"),s=t("../vnode/is-vhook");e.exports=r},{"../vnode/is-vhook":64,"is-object":49}],73:[function(t,e,n){function r(t,e){var n={a:t};return i(t,e,n,0),n}function i(t,e,n,r){if(t!==e){var i=n[r],u=!1;if(E(t)||E(e))a(t,e,n,r);else if(null==e)w(t)||(s(t,n,r),i=n[r]),i=g(i,new m(m.REMOVE,t,e));else if(y(e))if(y(t))if(t.tagName===e.tagName&&t.namespace===e.namespace&&t.key===e.key){var c=T(t.properties,e.properties);c&&(i=g(i,new m(m.PROPS,t,c))),i=o(t,e,n,i,r)}else i=g(i,new m(m.VNODE,t,e)),u=!0;else i=g(i,new m(m.VNODE,t,e)),u=!0;else b(e)?b(t)?t.text!==e.text&&(i=g(i,new m(m.VTEXT,t,e))):(i=g(i,new m(m.VTEXT,t,e)),u=!0):w(e)&&(w(t)||(u=!0),i=g(i,new m(m.WIDGET,t,e)));i&&(n[r]=i),u&&s(t,n,r)}}function o(t,e,n,r,o){for(var s=t.children,u=h(s,e.children),a=u.children,c=s.length,f=a.length,l=c>f?c:f,p=0;l>p;p++){var d=s[p],v=a[p];o+=1,d?i(d,v,n,o):v&&(r=g(r,new m(m.INSERT,null,v))),y(d)&&d.count&&(o+=d.count)}return u.moves&&(r=g(r,new m(m.ORDER,t,u.moves))),r}function s(t,e,n){f(t,e,n),u(t,e,n)}function u(t,e,n){if(w(t))"function"==typeof t.destroy&&(e[n]=g(e[n],new m(m.REMOVE,t,null)));else if(y(t)&&(t.hasWidgets||t.hasThunks))for(var r=t.children,i=r.length,o=0;i>o;o++){var s=r[o];n+=1,u(s,e,n),y(s)&&s.count&&(n+=s.count)}else E(t)&&a(t,null,e,n)}function a(t,e,n,i){var o=_(t,e),s=r(o.a,o.b);c(s)&&(n[i]=new m(m.THUNK,null,s))}function c(t){for(var e in t)if("a"!==e)return!0;return!1}function f(t,e,n){if(y(t)){if(t.hooks&&(e[n]=g(e[n],new m(m.PROPS,t,l(t.hooks)))),t.descendantHooks||t.hasThunks)for(var r=t.children,i=r.length,o=0;i>o;o++){var s=r[o];n+=1,f(s,e,n),y(s)&&s.count&&(n+=s.count)}}else E(t)&&a(t,null,e,n)}function l(t){var e={};for(var n in t)e[n]=void 0;return e}function h(t,e){var n=d(e),r=n.keys,i=n.free;if(i.length===e.length)return{children:e,moves:null};var o=d(t),s=o.keys,u=o.free;if(u.length===t.length)return{children:e,moves:null};for(var a=[],c=0,f=i.length,l=0,h=0;h<t.length;h++){var g,v=t[h];v.key?r.hasOwnProperty(v.key)?(g=r[v.key],a.push(e[g])):(g=h-l++,a.push(null)):f>c?(g=i[c++],a.push(e[g])):(g=h-l++,a.push(null))}for(var m=c>=i.length?e.length:i[c],y=0;y<e.length;y++){var b=e[y];b.key?s.hasOwnProperty(b.key)||a.push(b):y>=m&&a.push(b)}for(var w,E=a.slice(),_=0,T=[],x=[],A=0;A<e.length;){var S=e[A];for(w=E[_];null===w&&E.length;)T.push(p(E,_,null)),w=E[_];w&&w.key===S.key?(_++,A++):S.key?(w&&w.key&&r[w.key]!==A+1?(T.push(p(E,_,w.key)),w=E[_],w&&w.key===S.key?_++:x.push({key:S.key,to:A})):x.push({key:S.key,to:A}),A++):w&&w.key&&T.push(p(E,_,w.key))}for(;_<E.length;)w=E[_],T.push(p(E,_,w&&w.key));return T.length!==l||x.length?{children:a,moves:{removes:T,inserts:x}}:{children:a,moves:null}}function p(t,e,n){return t.splice(e,1),{from:e,key:n}}function d(t){for(var e={},n=[],r=t.length,i=0;r>i;i++){var o=t[i];o.key?e[o.key]=i:n.push(i)}return{keys:e,free:n}}function g(t,e){return t?(v(t)?t.push(e):t=[t,e],t):e}var v=t("x-is-array"),m=t("../vnode/vpatch"),y=t("../vnode/is-vnode"),b=t("../vnode/is-vtext"),w=t("../vnode/is-widget"),E=t("../vnode/is-thunk"),_=t("../vnode/handle-thunk"),T=t("./diff-props");e.exports=r},{"../vnode/handle-thunk":62,"../vnode/is-thunk":63,"../vnode/is-vnode":65,"../vnode/is-vtext":66,"../vnode/is-widget":67,"../vnode/vpatch":70,"./diff-props":72,"x-is-array":50}],74:[function(t,e,n){function r(t,e){function n(t){if(t)throw new Error(t)}e=e||n,"function"==typeof t&&(t=t());var r=null;return a(t,function(t,n){return t?e(t):(r=i(n.root[0]),void e(void 0,r))}),r}function i(t){if("text"==t.type)return t.data;if("tag"==t.type){var e,n,r,a;if(t.children.length)for(e=[],r=t.children.length,a=-1;++a<r;)n=i(t.children[a]),n&&e.push(n);var c=t.attributes;return c.style&&(c.style=o(c.style)),c["class"]&&(c.className=c["class"]),c["for"]&&(c.htmlFor=c["for"],delete c["for"]),c.dataset=s(c),u(t.name,c,e)}}function o(t){if(!t)return{};for(var e,n={},r=t.split(/;\s?/),i=r.length,o=-1;++o<i;)e=r[o].indexOf(":"),n[r[o].slice(0,e)]=r[o].slice(e+1).trim();return n}function s(t){var e,n;for(n in t)"data-"==n.slice(0,5)&&(e||(e={}),e[c(n.slice(5))]=t[n]);return e}var u=t("virtual-dom/h"),a=t("htmltree"),c=t("to-camel-case");e.exports=r},{htmltree:75,"to-camel-case":77,"virtual-dom/h":42}],75:[function(t,e,n){function r(t,e){var n=!1,r=i.parser(n,{lowercase:!0}),s=void 0,u={children:[]},a=[];r.onerror=function(t){e(t)},r.ondoctype=function(t){s=t},r.ontext=function(t){u.children.push({type:"text",data:t})},r.oncomment=function(t){u.children.push({type:"comment",data:t})},r.onscript=function(t){u.data=t},r.onopentag=function(t){var e={type:"tag",name:t.name,attributes:t.attributes,children:[],"void":o[t.name]};u.children.push(e),o[e.name]||(a.push(u),u=e)},r.onclosetag=function(t){return u.name===t&&(u=a.pop()),u?void 0:e(new Error("mismatched closing tag: "+t))},r.onend=function(){e(null,{doctype:s,root:u.children})},r.write(t).close()}var i=t("sax"),o={};["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].forEach(function(t){o[t]=!0}),e.exports=r},{sax:76}],76:[function(t,e,n){(function(e){!function(n){function r(t,e){if(!(this instanceof r))return new r(t,e);var i=this;o(i),i.q=i.c="",i.bufferCheckPosition=n.MAX_BUFFER_LENGTH,i.opt=e||{},i.opt.lowercase=i.opt.lowercase||i.opt.lowercasetags,i.looseCase=i.opt.lowercase?"toLowerCase":"toUpperCase",i.tags=[],i.closed=i.closedRoot=i.sawRoot=!1,i.tag=i.error=null,i.strict=!!t,i.noscript=!(!t&&!i.opt.noscript),i.state=W.BEGIN,i.ENTITIES=Object.create(n.ENTITIES),i.attribList=[],i.opt.xmlns&&(i.ns=Object.create(F)),i.trackPosition=i.opt.position!==!1,i.trackPosition&&(i.position=i.line=i.column=0),h(i,"onready")}function i(t){for(var e=Math.max(n.MAX_BUFFER_LENGTH,10),r=0,i=0,o=S.length;o>i;i++){var s=t[S[i]].length;if(s>e)switch(S[i]){case"textNode":d(t);break;case"cdata":p(t,"oncdata",t.cdata),t.cdata="";break;case"script":p(t,"onscript",t.script),t.script="";break;default:v(t,"Max buffer length exceeded: "+S[i])}r=Math.max(r,s)}t.bufferCheckPosition=n.MAX_BUFFER_LENGTH-r+t.position}function o(t){for(var e=0,n=S.length;n>e;e++)t[S[e]]=""}function s(t,e){return new u(t,e)}function u(t,e){if(!(this instanceof u))return new u(t,e);O.apply(this),this._parser=new r(t,e),this.writable=!0,this.readable=!0;var n=this;this._parser.onend=function(){n.emit("end")},this._parser.onerror=function(t){n.emit("error",t),n._parser.error=null},this._decoder=null,j.forEach(function(t){Object.defineProperty(n,"on"+t,{get:function(){return n._parser["on"+t]},set:function(e){return e?void n.on(t,e):(n.removeAllListeners(t),n._parser["on"+t]=e)},enumerable:!0,configurable:!1})})}function a(t){return t.split("").reduce(function(t,e){return t[e]=!0,t},{})}function c(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function f(t,e){return c(t)?!!e.match(t):t[e]}function l(t,e){return!f(t,e)}function h(t,e,n){t[e]&&t[e](n)}function p(t,e,n){t.textNode&&d(t),h(t,e,n)}function d(t){t.textNode=g(t.opt,t.textNode),t.textNode&&h(t,"ontext",t.textNode),t.textNode=""}function g(t,e){return t.trim&&(e=e.trim()),t.normalize&&(e=e.replace(/\s+/g," ")),e}function v(t,e){return d(t),t.trackPosition&&(e+="\nLine: "+t.line+"\nColumn: "+t.column+"\nChar: "+t.c),e=new Error(e),t.error=e,h(t,"onerror",e),t}function m(t){return t.closedRoot||y(t,"Unclosed root tag"),t.state!==W.TEXT&&v(t,"Unexpected end"),d(t),t.c="",t.closed=!0,h(t,"onend"),r.call(t,t.strict,t.opt),t}function y(t,e){if("object"!=typeof t||!(t instanceof r))throw new Error("bad call to strictFail");t.strict&&v(t,e)}function b(t){t.strict||(t.tagName=t.tagName[t.looseCase]());var e=t.tags[t.tags.length-1]||t,n=t.tag={name:t.tagName,attributes:{}};t.opt.xmlns&&(n.ns=e.ns),t.attribList.length=0}function w(t){var e=t.indexOf(":"),n=0>e?["",t]:t.split(":"),r=n[0],i=n[1];return"xmlns"===t&&(r="xmlns",i=""),{prefix:r,local:i}}function E(t){if(t.strict||(t.attribName=t.attribName[t.looseCase]()),-1!==t.attribList.indexOf(t.attribName)||t.tag.attributes.hasOwnProperty(t.attribName))return t.attribName=t.attribValue="";if(t.opt.xmlns){var e=w(t.attribName),n=e.prefix,r=e.local;if("xmlns"===n)if("xml"===r&&t.attribValue!==B)y(t,"xml: prefix must be bound to "+B+"\nActual: "+t.attribValue);else if("xmlns"===r&&t.attribValue!==U)y(t,"xmlns: prefix must be bound to "+U+"\nActual: "+t.attribValue);else{var i=t.tag,o=t.tags[t.tags.length-1]||t;i.ns===o.ns&&(i.ns=Object.create(o.ns)),i.ns[r]=t.attribValue}t.attribList.push([t.attribName,t.attribValue])}else t.tag.attributes[t.attribName]=t.attribValue,p(t,"onattribute",{name:t.attribName,value:t.attribValue});t.attribName=t.attribValue=""}function _(t,e){if(t.opt.xmlns){var n=t.tag,r=w(t.tagName);n.prefix=r.prefix,n.local=r.local,n.uri=n.ns[r.prefix]||"",n.prefix&&!n.uri&&(y(t,"Unbound namespace prefix: "+JSON.stringify(t.tagName)),n.uri=r.prefix);var i=t.tags[t.tags.length-1]||t;n.ns&&i.ns!==n.ns&&Object.keys(n.ns).forEach(function(e){p(t,"onopennamespace",{prefix:e,uri:n.ns[e]})});for(var o=0,s=t.attribList.length;s>o;o++){var u=t.attribList[o],a=u[0],c=u[1],f=w(a),l=f.prefix,h=f.local,d=""==l?"":n.ns[l]||"",g={name:a,value:c,prefix:l,local:h,uri:d};l&&"xmlns"!=l&&!d&&(y(t,"Unbound namespace prefix: "+JSON.stringify(l)),g.uri=l),t.tag.attributes[a]=g,p(t,"onattribute",g)}t.attribList.length=0}t.tag.isSelfClosing=!!e,t.sawRoot=!0,t.tags.push(t.tag),p(t,"onopentag",t.tag),e||(t.state=t.noscript||"script"!==t.tagName.toLowerCase()?W.TEXT:W.SCRIPT,t.tag=null,t.tagName=""),t.attribName=t.attribValue="",t.attribList.length=0}function T(t){if(!t.tagName)return y(t,"Weird empty close tag."),t.textNode+="</>",void(t.state=W.TEXT);if(t.script){if("script"!==t.tagName)return t.script+="</"+t.tagName+">",t.tagName="",void(t.state=W.SCRIPT);p(t,"onscript",t.script),t.script=""}var e=t.tags.length,n=t.tagName;t.strict||(n=n[t.looseCase]());for(var r=n;e--;){var i=t.tags[e];if(i.name===r)break;y(t,"Unexpected close tag")}if(0>e)return y(t,"Unmatched closing tag: "+t.tagName),t.textNode+="</"+t.tagName+">",void(t.state=W.TEXT);t.tagName=n;for(var o=t.tags.length;o-->e;){var s=t.tag=t.tags.pop();t.tagName=t.tag.name,p(t,"onclosetag",t.tagName);var u={};for(var a in s.ns)u[a]=s.ns[a];var c=t.tags[t.tags.length-1]||t;t.opt.xmlns&&s.ns!==c.ns&&Object.keys(s.ns).forEach(function(e){var n=s.ns[e];p(t,"onclosenamespace",{prefix:e,uri:n})})}0===e&&(t.closedRoot=!0),t.tagName=t.attribValue=t.attribName="",t.attribList.length=0,t.state=W.TEXT}function x(t){var e,n=t.entity,r=n.toLowerCase(),i="";return t.ENTITIES[n]?t.ENTITIES[n]:t.ENTITIES[r]?t.ENTITIES[r]:(n=r,"#"===n.charAt(0)&&("x"===n.charAt(1)?(n=n.slice(2),e=parseInt(n,16),i=e.toString(16)):(n=n.slice(1),e=parseInt(n,10),i=e.toString(10))),n=n.replace(/^0+/,""),i.toLowerCase()!==n?(y(t,"Invalid character entity"),"&"+t.entity+";"):String.fromCharCode(e))}function A(t){var e=this;if(this.error)throw this.error;if(e.closed)return v(e,"Cannot write after close. Assign an onready handler.");if(null===t)return m(e);for(var n=0,r="";e.c=r=t.charAt(n++);)switch(e.trackPosition&&(e.position++,"\n"===r?(e.line++,e.column=0):e.column++),e.state){case W.BEGIN:"<"===r?(e.state=W.OPEN_WAKA,e.startTagPosition=e.position):l(k,r)&&(y(e,"Non-whitespace before first tag."),e.textNode=r,e.state=W.TEXT);continue;case W.TEXT:if(e.sawRoot&&!e.closedRoot){for(var o=n-1;r&&"<"!==r&&"&"!==r;)r=t.charAt(n++),r&&e.trackPosition&&(e.position++,"\n"===r?(e.line++,e.column=0):e.column++);e.textNode+=t.substring(o,n-1)}"<"===r?(e.state=W.OPEN_WAKA,e.startTagPosition=e.position):(!l(k,r)||e.sawRoot&&!e.closedRoot||y(e,"Text data outside of root node."),"&"===r?e.state=W.TEXT_ENTITY:e.textNode+=r);continue;case W.SCRIPT:"<"===r?e.state=W.SCRIPT_ENDING:e.script+=r;continue;case W.SCRIPT_ENDING:"/"===r?e.state=W.CLOSE_TAG:(e.script+="<"+r,e.state=W.SCRIPT);continue;case W.OPEN_WAKA:if("!"===r)e.state=W.SGML_DECL,e.sgmlDecl="";else if(f(k,r));else if(f($,r))e.state=W.OPEN_TAG,e.tagName=r;else if("/"===r)e.state=W.CLOSE_TAG,e.tagName="";else if("?"===r)e.state=W.PROC_INST,e.procInstName=e.procInstBody="";else{if(y(e,"Unencoded <"),e.startTagPosition+1<e.position){var s=e.position-e.startTagPosition;r=new Array(s).join(" ")+r}e.textNode+="<"+r,e.state=W.TEXT}continue;case W.SGML_DECL:(e.sgmlDecl+r).toUpperCase()===L?(p(e,"onopencdata"),e.state=W.CDATA,e.sgmlDecl="",e.cdata=""):e.sgmlDecl+r==="--"?(e.state=W.COMMENT,e.comment="",e.sgmlDecl=""):(e.sgmlDecl+r).toUpperCase()===M?(e.state=W.DOCTYPE,(e.doctype||e.sawRoot)&&y(e,"Inappropriately located doctype declaration"),e.doctype="",e.sgmlDecl=""):">"===r?(p(e,"onsgmldeclaration",e.sgmlDecl),e.sgmlDecl="",e.state=W.TEXT):f(C,r)?(e.state=W.SGML_DECL_QUOTED,e.sgmlDecl+=r):e.sgmlDecl+=r;continue;case W.SGML_DECL_QUOTED:r===e.q&&(e.state=W.SGML_DECL,e.q=""),e.sgmlDecl+=r;continue;case W.DOCTYPE:">"===r?(e.state=W.TEXT,p(e,"ondoctype",e.doctype),e.doctype=!0):(e.doctype+=r,"["===r?e.state=W.DOCTYPE_DTD:f(C,r)&&(e.state=W.DOCTYPE_QUOTED,e.q=r));continue;case W.DOCTYPE_QUOTED:e.doctype+=r,r===e.q&&(e.q="",e.state=W.DOCTYPE);continue;case W.DOCTYPE_DTD:e.doctype+=r,"]"===r?e.state=W.DOCTYPE:f(C,r)&&(e.state=W.DOCTYPE_DTD_QUOTED,e.q=r);continue;case W.DOCTYPE_DTD_QUOTED:e.doctype+=r,r===e.q&&(e.state=W.DOCTYPE_DTD,e.q="");continue;case W.COMMENT:"-"===r?e.state=W.COMMENT_ENDING:e.comment+=r;continue;case W.COMMENT_ENDING:"-"===r?(e.state=W.COMMENT_ENDED,e.comment=g(e.opt,e.comment),e.comment&&p(e,"oncomment",e.comment),e.comment=""):(e.comment+="-"+r,e.state=W.COMMENT);continue;case W.COMMENT_ENDED:">"!==r?(y(e,"Malformed comment"),e.comment+="--"+r,e.state=W.COMMENT):e.state=W.TEXT;continue;case W.CDATA:"]"===r?e.state=W.CDATA_ENDING:e.cdata+=r;continue;case W.CDATA_ENDING:"]"===r?e.state=W.CDATA_ENDING_2:(e.cdata+="]"+r,e.state=W.CDATA);continue;case W.CDATA_ENDING_2:">"===r?(e.cdata&&p(e,"oncdata",e.cdata),p(e,"onclosecdata"),e.cdata="",e.state=W.TEXT):"]"===r?e.cdata+="]":(e.cdata+="]]"+r,e.state=W.CDATA);continue;case W.PROC_INST:"?"===r?e.state=W.PROC_INST_ENDING:f(k,r)?e.state=W.PROC_INST_BODY:e.procInstName+=r;continue;case W.PROC_INST_BODY:if(!e.procInstBody&&f(k,r))continue;"?"===r?e.state=W.PROC_INST_ENDING:e.procInstBody+=r;continue;case W.PROC_INST_ENDING:">"===r?(p(e,"onprocessinginstruction",{name:e.procInstName,body:e.procInstBody}),e.procInstName=e.procInstBody="",e.state=W.TEXT):(e.procInstBody+="?"+r,e.state=W.PROC_INST_BODY);continue;case W.OPEN_TAG:f(V,r)?e.tagName+=r:(b(e),">"===r?_(e):"/"===r?e.state=W.OPEN_TAG_SLASH:(l(k,r)&&y(e,"Invalid character in tag name"),e.state=W.ATTRIB));continue;case W.OPEN_TAG_SLASH:">"===r?(_(e,!0),T(e)):(y(e,"Forward-slash in opening tag not followed by >"),e.state=W.ATTRIB);continue;case W.ATTRIB:if(f(k,r))continue;">"===r?_(e):"/"===r?e.state=W.OPEN_TAG_SLASH:f($,r)?(e.attribName=r,e.attribValue="",e.state=W.ATTRIB_NAME):y(e,"Invalid attribute name");continue;case W.ATTRIB_NAME:"="===r?e.state=W.ATTRIB_VALUE:">"===r?(y(e,"Attribute without value"),e.attribValue=e.attribName,E(e),_(e)):f(k,r)?e.state=W.ATTRIB_NAME_SAW_WHITE:f(V,r)?e.attribName+=r:y(e,"Invalid attribute name");continue;case W.ATTRIB_NAME_SAW_WHITE:if("="===r)e.state=W.ATTRIB_VALUE;else{if(f(k,r))continue;y(e,"Attribute without value"),e.tag.attributes[e.attribName]="",e.attribValue="",p(e,"onattribute",{name:e.attribName,value:""}),e.attribName="",">"===r?_(e):f($,r)?(e.attribName=r,e.state=W.ATTRIB_NAME):(y(e,"Invalid attribute name"),e.state=W.ATTRIB)}continue;case W.ATTRIB_VALUE:if(f(k,r))continue;f(C,r)?(e.q=r,e.state=W.ATTRIB_VALUE_QUOTED):(y(e,"Unquoted attribute value"),e.state=W.ATTRIB_VALUE_UNQUOTED,e.attribValue=r);continue;case W.ATTRIB_VALUE_QUOTED:if(r!==e.q){"&"===r?e.state=W.ATTRIB_VALUE_ENTITY_Q:e.attribValue+=r;continue}E(e),e.q="",e.state=W.ATTRIB;continue;case W.ATTRIB_VALUE_UNQUOTED:if(l(D,r)){"&"===r?e.state=W.ATTRIB_VALUE_ENTITY_U:e.attribValue+=r;continue}E(e),">"===r?_(e):e.state=W.ATTRIB;continue;case W.CLOSE_TAG:if(e.tagName)">"===r?T(e):f(V,r)?e.tagName+=r:e.script?(e.script+="</"+e.tagName,e.tagName="",e.state=W.SCRIPT):(l(k,r)&&y(e,"Invalid tagname in closing tag"),e.state=W.CLOSE_TAG_SAW_WHITE);else{if(f(k,r))continue;l($,r)?e.script?(e.script+="</"+r,e.state=W.SCRIPT):y(e,"Invalid tagname in closing tag."):e.tagName=r}continue;case W.CLOSE_TAG_SAW_WHITE:if(f(k,r))continue;">"===r?T(e):y(e,"Invalid characters in closing tag");continue;case W.TEXT_ENTITY:case W.ATTRIB_VALUE_ENTITY_Q:case W.ATTRIB_VALUE_ENTITY_U:switch(e.state){case W.TEXT_ENTITY:var u=W.TEXT,a="textNode";break;case W.ATTRIB_VALUE_ENTITY_Q:var u=W.ATTRIB_VALUE_QUOTED,a="attribValue";break;case W.ATTRIB_VALUE_ENTITY_U:var u=W.ATTRIB_VALUE_UNQUOTED,a="attribValue"}";"===r?(e[a]+=x(e),e.entity="",e.state=u):f(R,r)?e.entity+=r:(y(e,"Invalid character entity"),e[a]+="&"+e.entity+r,e.entity="",e.state=u);continue;default:throw new Error(e,"Unknown state: "+e.state)}return e.position>=e.bufferCheckPosition&&i(e),e}n.parser=function(t,e){return new r(t,e)},n.SAXParser=r,n.SAXStream=u,n.createStream=s,n.MAX_BUFFER_LENGTH=65536;var S=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];n.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(t){function e(){this.__proto__=t}return e.prototype=t,new e}),Object.getPrototypeOf||(Object.getPrototypeOf=function(t){return t.__proto__}),Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),r.prototype={end:function(){m(this)},write:A,resume:function(){return this.error=null,this},close:function(){return this.write(null)}};try{var O=t("stream").Stream}catch(I){var O=function(){}}var j=n.EVENTS.filter(function(t){return"error"!==t&&"end"!==t});u.prototype=Object.create(O.prototype,{constructor:{value:u}}),u.prototype.write=function(n){if("function"==typeof e&&"function"==typeof e.isBuffer&&e.isBuffer(n)){if(!this._decoder){var r=t("string_decoder").StringDecoder;this._decoder=new r("utf8")}n=this._decoder.write(n)}return this._parser.write(n.toString()),this.emit("data",n),!0},u.prototype.end=function(t){return t&&t.length?this.write(t):this.leftovers&&this._parser.write(this.leftovers.toString()),this._parser.end(),!0},u.prototype.on=function(t,e){var n=this;return n._parser["on"+t]||-1===j.indexOf(t)||(n._parser["on"+t]=function(){var e=1===arguments.length?[arguments[0]]:Array.apply(null,arguments);e.splice(0,0,t),n.emit.apply(n,e)}),O.prototype.on.call(n,t,e)};var k="\r\n	 ",N="0124356789",P="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",C="'\"",R=N+P+"#",D=k+">",L="[CDATA[",M="DOCTYPE",B="http://www.w3.org/XML/1998/namespace",U="http://www.w3.org/2000/xmlns/",F={xml:B,xmlns:U};k=a(k),N=a(N),P=a(P);var $=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,V=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;C=a(C),R=a(R),D=a(D);var W=0;n.STATE={BEGIN:W++,TEXT:W++,TEXT_ENTITY:W++,OPEN_WAKA:W++,SGML_DECL:W++,SGML_DECL_QUOTED:W++,DOCTYPE:W++,DOCTYPE_QUOTED:W++,DOCTYPE_DTD:W++,DOCTYPE_DTD_QUOTED:W++,COMMENT_STARTING:W++,COMMENT:W++,COMMENT_ENDING:W++,COMMENT_ENDED:W++,CDATA:W++,CDATA_ENDING:W++,CDATA_ENDING_2:W++,PROC_INST:W++,PROC_INST_BODY:W++,PROC_INST_ENDING:W++,OPEN_TAG:W++,OPEN_TAG_SLASH:W++,ATTRIB:W++,ATTRIB_NAME:W++,ATTRIB_NAME_SAW_WHITE:W++,ATTRIB_VALUE:W++,ATTRIB_VALUE_QUOTED:W++,ATTRIB_VALUE_UNQUOTED:W++,ATTRIB_VALUE_ENTITY_Q:W++,ATTRIB_VALUE_ENTITY_U:W++,CLOSE_TAG:W++,CLOSE_TAG_SAW_WHITE:W++,SCRIPT:W++,SCRIPT_ENDING:W++},n.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,"int":8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(n.ENTITIES).forEach(function(t){var e=n.ENTITIES[t],r="number"==typeof e?String.fromCharCode(e):e;n.ENTITIES[t]=r});for(var W in n.STATE)n.STATE[n.STATE[W]]=W;W=n.STATE}("undefined"==typeof n?sax={}:n)}).call(this,t("buffer").Buffer)},{buffer:15,stream:34,string_decoder:35}],77:[function(t,e,n){function r(t){return i(t).replace(/\s(\w)/g,function(t,e){return e.toUpperCase()})}var i=t("to-space-case");e.exports=r},{"to-space-case":78}],78:[function(t,e,n){function r(t){return i(t).replace(/[\W_]+(.|$)/g,function(t,e){return e?" "+e:""})}var i=t("to-no-case");e.exports=r},{"to-no-case":79}],79:[function(t,e,n){function r(t){return s.test(t)?t.toLowerCase():(a.test(t)&&(t=i(t)),u.test(t)&&(t=o(t)),t.toLowerCase())}function i(t){return t.replace(c,function(t,e){return e?" "+e:""})}function o(t){return t.replace(f,function(t,e,n){return e+" "+n.toLowerCase().split("").join(" ")})}e.exports=r;var s=/\s/,u=/[a-z][A-Z]/,a=/[\W_]/,c=/[\W_]+(.|$)/g,f=/(.)([A-Z]+)/g},{}],80:[function(t,e,n){"use strict";var r=t("ramda"),i=t("uuid"),o=t("../state"),s=e.exports={getCurrentPlan:function(){var t=o.select("currentPlanId").get(),e=r.findIndex(r.propEq("id",t))(o.select("plans").get());return o.select("plans",e)},addCategory:function(t){var e=t.type,n=t.name,r=t.budget;s.getCurrentPlan().select("categories").push({type:e,name:n,budget:r,id:i.v4()})},addEntry:function(t){var e=t.description,n=t.category,r=t.expense,o=t.income,u=t.period;s.getCurrentPlan().select("entries").push({description:e,category:n,expense:r,income:o,period:u,id:i.v4()})},addPlan:function(t){var e=t.name,n=t.periods,r=t.categories,s=void 0===r?[]:r;o.select("plans").push({name:e,periods:n,id:i.v4(),entries:[],categories:s})},updateCategory:function(t,e){var n=s.getCurrentPlan().select("categories"),i=r.findIndex(r.propEq("id",t))(n.get());i>-1&&!function(){var t=s.getCurrentPlan().select("categories",i);Object.keys(e).forEach(function(n){t.set(n,e[n])})}()},updateEntry:function(t,e){var n=s.getCurrentPlan().select("entries"),i=r.findIndex(r.propEq("id",t))(n.get());i>-1&&!function(){var t=s.getCurrentPlan().select("entries",i);Object.keys(e).forEach(function(n){t.set(n,e[n])})}()},updateCurrentPlan:function(t){o.select("currentPlanId").set(t)},removeCategory:function(t){var e=s.getCurrentPlan().select("categories"),n=r.findIndex(r.propEq("id",t))(e.get());n>-1&&e.splice([n,1])},removeEntry:function(t){var e=s.getCurrentPlan().select("entries"),n=r.findIndex(r.propEq("id",t))(e.get());n>-1&&e.splice([n,1])},removePlan:function(t){var e=o.select("plans"),n=r.findIndex(r.propEq("id",t))(e.get());n>-1&&e.splice([n,1])},loadAllData:function(t){Object.keys(t).forEach(function(e){o.set(e,t[e])})}}},{"../state":82,ramda:37,uuid:39}],81:[function(t,e,n){"use strict";n.sync=function(t,e){e.on("update",function(){window.localStorage.setItem(t,JSON.stringify(e.get()))})},n.load=function(t,e){var n=JSON.parse(window.localStorage.getItem(t)||"null");n&&"object"==typeof n&&Object.keys(n).forEach(function(t){e.set(t,n[t])})}},{}],82:[function(t,e,n){"use strict";var r=t("baobab"),i=t("baconjs"),o=t("ramda"),s=t("baobab/src/cursor"),u=t("baobab/src/facet");s.prototype.asProperty=u.prototype.asProperty=function(){var t=this;return i.fromEventTarget(t,"update").map(function(){return t.get()}).toProperty(t.get())};var a=["January","February","March","April","May","June","July","August","September","October","November","December"],c=[{name:"Rent",id:"Rent-default",type:"expense",budget:54e3},{name:"Food",id:"Food-default",type:"expense",budget:24e3},{name:"Travel",id:"Travel-default",type:"expense",budget:12e3},{name:"Salary",id:"Salary-default",type:"income",budget:12e4}];e.exports=new r({currentPlanId:"default-plan",plans:[{name:"Sample plan",id:"default-plan",periods:[].concat(a,a).slice((new Date).getMonth(),(new Date).getMonth()+6),entries:[],categories:c}]},{facets:{currentPlan:{cursors:{id:"currentPlanId",plans:"plans"},get:function(t){var e=t.id,n=t.plans;return o.find(o.propEq("id",e),n)||{}}},currentCategories:{cursors:{id:"currentPlanId",plans:"plans"},get:function(t){var e=t.id,n=t.plans,r=o.find(o.propEq("id",e),n);return r&&r.categories||[]}},currentEntries:{cursors:{id:"currentPlanId",plans:"plans"},get:function(t){var e=t.id,n=t.plans,r=o.find(o.propEq("id",e),n);return r&&r.entries||[]}},currentPeriods:{cursors:{id:"currentPlanId",plans:"plans"},get:function(t){var e=t.id,n=t.plans,r=o.find(o.propEq("id",e),n);return r&&r.periods}}}})},{baconjs:2,baobab:4,"baobab/src/cursor":7,"baobab/src/facet":8,ramda:37}],83:[function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n in e){var r=e[n];r.configurable=!0,r.value&&(r.writable=!0)}Object.defineProperties(t,e)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o=t("virtual-dom"),s=t("virtual-html"),u=function(t,e){return Object.keys(e).forEach(function(n){return t[n]=e[n]}),t},a=function(t){return function(e){return t.render(e)}},c=function(){function t(){i(this,t)}return r(t,{render:{value:function(t){return this.tree?this.render_(t):this.init(t),this}},init:{value:function(t){var e=this.template(t);this.tree=s(e),this.root=o.create(this.tree),this.parent.appendChild(this.root)}},render_:{value:function(t){var e=this.template(t),n=s(e),r=o.diff(this.tree,n);o.patch(this.root,r),this.tree=n}}},{create:{value:function(e){return a(u(new t,e))}}}),t}();e.exports=c},{"virtual-dom":43,"virtual-html":74}],84:[function(t,e,n){"use strict";var r=t("../utils/omnium"),i=function(){var t=void 0===arguments[0]?{}:arguments[0],e=t.name,n=void 0===e?"":e,r=t.budget,i=void 0===r?"":r;return'\n    <form class="form-inline">\n      <select type="text" class="js-category-type form-control">\n        <option value="expense">Expense</option>\n        <option value="income">Income</option>\n      </select>\n      <input type="text" class="js-category-name form-control" placeholder="Name" value="'+n+'">\n      <input type="number" class="js-category-budget form-control" placeholder="Budget" value="'+i+'">\n      <button class="btn btn-primary"><i class="glyphicon glyphicon-plus"></i> Add Category</button>\n    </form>\n  '};n.init=function(t,e,n){var o=r.create({parent:t.get(0),template:i});o(),t.asEventStream("submit").doAction(".preventDefault").map(function(){return{type:t.find(".js-category-type").val(),name:t.find(".js-category-name").val(),budget:t.find(".js-category-budget").val()}}).doAction(n.addCategory).onValue(o)}},{"../utils/omnium":83}],85:[function(t,e,n){"use strict";t("bootstrap/js/modal");var r=t("../utils/omnium"),i=["January","February","March","April","May","June","July","August","September","October","November","December"],o=function(t){return'<option value="'+t+'">'+t+"</option>"},s=function(){return'\n    <div class="js-add-plan-modal modal fade" tabindex="-1">\n      <div class="modal-dialog">\n        <form class="modal-content">\n          <div class="modal-header">\n            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>\n            <h4 class="modal-title" id="myModalLabel">New plan</h4>\n          </div>\n          <div class="modal-body">\n            <div class="form form-horizontal">\n              <div class="form-group">\n                <label class="col-sm-4 control-label">Name</label>\n                <div class="col-sm-6">\n                  <input type="text" class="js-add-plan-name form-control" value="">\n                </div>\n              </div>\n              <div class="form-group">\n                <label class="col-sm-4 control-label">Periods</label>\n                <div class="col-sm-6">\n                  <select type="text" class="js-add-plan-period form-control">\n                    '+i.map(o).join("")+'\n                  </select>\n                </div>\n              </div>\n              <div class="form-group">\n                <label class="col-sm-4 control-label">Use budgets from current plan</label>\n                <div class="col-sm-6">\n                  <input type="checkbox" class="js-add-plan-clone">\n                </div>\n              </div>\n            </div>\n          </div>\n          <div class="modal-footer">\n            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>\n            <button class="btn btn-primary">Add plan</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  ';

},u=function(){return'\n    <div>\n      <button class="js-add btn btn-primary pull-right"><i class="glyphicon glyphicon-plus"></i></button>\n      '+s()+"\n    </div>\n  "};n.init=function(t,e,n){var o=e.categories,s=r.create({parent:t.get(0),template:u});s(),t.asEventStream("click",".js-add").onValue(function(){t.find(".js-add-plan-modal").modal()}),t.asEventStream("submit").doAction(".preventDefault").onValue(function(){var e=6,r=t.find(".js-add-plan-name").val(),u=t.find(".js-add-plan-clone").prop("checked"),a=t.find(".js-add-plan-period").val(),c=i.indexOf(a),f=[].concat(i).concat(i.slice(0,e)),l=f.slice(c,c+e);n.addPlan({name:r,periods:l,categories:u?o.get():[]}),t.find(".js-add-plan-modal").modal("hide"),s()})}},{"../utils/omnium":83,"bootstrap/js/modal":13}],86:[function(t,e,n){"use strict";var r=function(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0})},i=t("baconjs"),o=t("ramda"),s=t("../utils/omnium"),u=o.propEq("category"),a=o.propEq("period"),c=function(t,e,n,r){return t.filter(u(e.id)).filter(a(n)).map(r).reduce(o.add,0)},f=function(t){return+t.expense-t.income},l=function(t){return+t.income-t.expense},h=function(t){return"<th>"+t+"</th>"},p=function(t,e,n){return function(r){var i=t.map(function(t){return"\n      <td>"+c(e,r,t,n)+"</td>\n    "}).join(""),s=r.budget,a=t.map(function(i,o){var u=s/(t.length-o),a=c(e,r,i,n),f=Math.max(u,a),l=f-a;return s-=f,"\n      <td>"+l.toFixed(0)+"</td>\n    "}).join(""),f=e.filter(u(r.id)).map(n).reduce(o.add,0),l=r.budget-f<0?"u-negative":"";return'\n    <tr class="actions-row" data-id="'+r.id+'">\n      <td>\n        <div class="actions-box">\n          <button class="js-remove btn btn-xs btn-danger" data-id="'+r.id+'"><i class="glyphicon glyphicon-minus"></i></button>\n        </div>\n        <input class="editable" data-field="name" value="'+r.name+'">\n      </td>\n      '+i+"\n      <td>"+f+'</td>\n    </tr>\n    <tr data-id="'+r.id+'">\n      <td><input class="editable" data-field="budget" value="'+r.budget+'"></td>\n      '+a+'\n      <td class="'+l+'">'+(r.budget-f)+"</td>\n    </tr>\n  "}},d=function(t){return function(e,n){return'\n    <table class="table table-striped">\n      <thead>\n        <tr>\n          <th>'+e+"</th>\n          "+t.map(h).join("")+"\n          <th>Total</th>\n        </tr>\n      </thead>\n      <tbody>\n        "+n+"\n      </tbody>\n    </table>\n  "}},g=function(t){return function(e){var n=t.filter(a(e)).map(l).reduce(o.add,0),r=0>n?"u-negative":"";return'<td class="'+r+'">'+n+"</td>"}},v=function(t){return t.map(l).reduce(o.add,0)},m=function(t,e){var n=v(t),r=0>n?"u-negative":"";return"\n    <tr>\n      <td>Balance</td>\n      "+e.map(g(t)).join("")+'\n      <td class="'+r+'">'+n+"</td>\n    </tr>\n  "},y=function(t){var e=t.periods,n=t.categories,r=t.entries;if(!e)return"<div>No plan selected</div>";var i=n.filter(o.propEq("type","expense")),s=n.filter(o.propEq("type","income")),u=d(e);return"\n    <div>\n      "+u("Expenses",i.map(p(e,r,f)).join(""))+"\n      "+u("Incomes",s.map(p(e,r,l)).join(""))+"\n      "+u("Result",m(r,e))+"\n    </div>\n  "};n.init=function(t,e,n){var o=e.periods,u=e.categories,a=e.entries,c=s.create({template:y,parent:t.get(0)});i.combineTemplate({periods:o.asProperty(),categories:u.asProperty(),entries:a.asProperty()}).onValue(c),t.asEventStream("click",".js-remove").map(".currentTarget").map($).onValue(function(t){n.removeCategory(t.attr("data-id"))}),t.asEventStream("change").map(".target").map($).onValue(function(t){var e=t.closest("tr").attr("data-id"),i=t.attr("data-field"),o=t.val();n.updateCategory(e,r({},i,o))})}},{"../utils/omnium":83,baconjs:2,ramda:37}],87:[function(t,e,n){"use strict";var r=t("filesaver.js");n.init=function(t,e){var n=e.state;t.asEventStream("click",".js-export").doAction(".preventDefault").onValue(function(){r(new Blob([JSON.stringify(n.get())],{type:"application/javascript;charset=utf-8"}),"data.json")})}},{"filesaver.js":36}],88:[function(t,e,n){"use strict";var r=t("../utils/omnium"),i=function(){var t=void 0===arguments[0]?!1:arguments[0];return function(){return t=!t}}(),o=function(){return'\n    <a href="#" class="js-import-toggle"><i class="glyphicon glyphicon-open"></i> Import</a>\n  '},s=function(){return'\n    <input type="file" class="form-control js-import-file">\n    <button class="btn btn-default js-import-toggle"><i class="glyphicon glyphicon-remove"></i></button>\n  '},u=function(t){return'\n    <ul class="nav navbar-'+(t?"form":"nav")+' navbar-right js-importer">\n      <li>'+(t?s():o())+"</li>\n    </ul>\n  "};n.init=function(t,e,n){var o=r.create({parent:t.get(0),template:u});o(),t.asEventStream("click",".js-import-toggle").doAction(".preventDefault").onValue(function(){o(i())}),t.asEventStream("change",".js-import-file").onValue(function(t){var e=new FileReader;e.onload=function(t){n.loadAllData(JSON.parse(t.target.result)),o(i())},e.readAsText(t.target.files[0])})}},{"../utils/omnium":83}],89:[function(t,e,n){"use strict";var r=function(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0})},i=t("baconjs"),o=t("ramda"),s=t("../utils/omnium"),u=o.propEq("period"),a=function(t){return+t.income-t.expense},c=o.curry(function(t,e){var n=e.id,r=e.name,i=t===n?"selected":"";return'<option value="'+n+'" '+i+">"+r+"</option>"}),f=function(t,e){var n=void 0===arguments[2]?"editable":arguments[2];return'\n    <select class="'+n+' form-control input-sm" data-field="category">\n      '+t.map(c(e)).join("")+"\n    </select>\n  "},l=o.curry(function(t,e){return'\n    <tr class="actions-row" data-id="'+e.id+'">\n      <td>\n        <div class="actions-box">\n          <button type="button" class="js-remove btn btn-xs btn-danger" data-id="'+e.id+'"><i class="glyphicon glyphicon-minus"></i></button>\n        </div>\n        '+f(t,e.category)+'\n      </td>\n      <td>\n        <input class="editable" data-field="description" value="'+(e.description||"")+'">\n      </td>\n      <td>\n        <input type="number" data-field="expense" class="editable" value="'+(e.expense||"")+'">\n      </td>\n      <td>\n        <input type="number" data-field="income" class="editable" value="'+(e.income||"")+'">\n      </td>\n    </tr>\n  '}),h=function(t,e){return'\n    <tr class="actions-row">\n      <td>\n        <button class="hidden"></button>\n        <input type="hidden" class="js-add-entry-period" value="'+t+'">\n        <div class="actions-box">\n          <button class="btn btn-xs btn-primary"><i class="glyphicon glyphicon-plus"></i></button>\n        </div>\n        '+f(e,"","js-add-entry-category")+'\n      </td>\n      <td>\n        <input type="text" class="js-add-entry-text form-control input-sm" value="" placeholder="Description">\n      </td>\n      <td>\n        <input type="number" class="js-add-entry-expense form-control input-sm" value="" placeholder="Expense">\n      </td>\n      <td>\n        <input type="number" class="js-add-entry-income form-control input-sm" value="" placeholder="Income">\n      </td>\n    </tr>\n  '},p=function(t,e,n){var r=o.sum(e.map(a).map(Number)),i=0>r?"u-negative":"";return'<form>\n    <table class="table table-bordered table-hover">\n      <caption>'+t+"</caption>\n      <thead>\n        <tr>\n          <th>Category</th>\n          <th>Comment</th>\n          <th>Expense</th>\n          <th>Income</th>\n        </tr>\n      </thead>\n      <tbody>\n        "+e.map(l(n)).join("")+"\n      </tbody>\n      <tfoot>\n        "+h(t,n)+'\n      </tfoot>\n    </table>\n    <p>\n      Result: <span class="'+i+'">'+r+"</span>\n    </p>\n  </form>"},d=function(t){var e=t.entries,n=t.periods,r=t.categories;return n?"\n    <div>\n      "+n.map(function(t){return p(t,e.filter(u(t)),r)}).join("")+"\n    </div>\n  ":"<div>No plan selected</div>"};n.init=function(t,e,n){var o=e.periods,u=e.entries,a=e.categories,c=s.create({template:d,parent:t.get(0)});i.combineTemplate({entries:u.asProperty(),periods:o.asProperty(),categories:a.asProperty()}).onValue(c),t.asEventStream("click",".js-remove").map(".currentTarget").map($).onValue(function(t){n.removeEntry(t.attr("data-id"))}),t.asEventStream("change").map(".target").map($).onValue(function(t){var e=t.closest("tr").attr("data-id"),i=t.attr("data-field"),o=t.val();e&&n.updateEntry(e,r({},i,o))}),t.asEventStream("keypress",".editable").onValue(function(t){13===t.which&&(t.preventDefault(),t.stopPropagation())}),t.asEventStream("submit","form").doAction(".preventDefault").map(".target").map($).map(function(t){var e={period:t.find(".js-add-entry-period").val(),category:t.find(".js-add-entry-category").val(),description:t.find(".js-add-entry-text").val(),expense:t.find(".js-add-entry-expense").val(),income:t.find(".js-add-entry-income").val()};return e}).onValue(n.addEntry)}},{"../utils/omnium":83,baconjs:2,ramda:37}],90:[function(t,e,n){"use strict";var r=t("baconjs"),i=t("ramda"),o=t("../utils/omnium"),s=i.curry(function(t,e){var n=t===e.id?"active":"";return'\n    <li class="'+n+' actions-row">\n      <a href="#/'+e.id+'">\n        <button\n          class="js-plans-remove btn btn-danger btn-xs actions-box actions-box--xr"\n          data-id="'+e.id+'"\n          ><i class="glyphicon glyphicon-minus"></i></button>\n        '+e.name+"\n      </a>\n    </li>\n  "}),u=function(t){var e=t.currentPlanId,n=t.plans;return'\n    <ul class="nav nav-tabs">\n      '+n.map(s(e)).join("")+"\n    </ul>\n  "};n.init=function(t,e,n){var i=e.currentPlanId,s=e.plans,a=o.create({parent:t.get(0),template:u});r.combineTemplate({currentPlanId:i.asProperty(),plans:s.asProperty()}).onValue(a),t.asEventStream("click","a").doAction(".preventDefault").map(".currentTarget").map($).onValue(function(t){n.updateCurrentPlan(t.attr("href").substring(2))}),t.asEventStream("click",".js-plans-remove").doAction(".preventDefault").doAction(".stopPropagation").map(".currentTarget").map($).onValue(function(t){window.confirm("Are you really sure you want to delete the plan? There is no going back...")&&n.removePlan(t.attr("data-id"))})}},{"../utils/omnium":83,baconjs:2,ramda:37}]},{},[1]);
//# sourceMappingURL=main.min.js.map